# å¼‚æ˜Ÿå·¥å‚æ‰‹æœºç‰ˆ PRD - æ›´æ–°ç‰ˆæœ¬

## 1. äº§å“æ¦‚è¿°

### 1.1 äº§å“å®šä½

åŸºäºç»å…¸ PC æ¸¸æˆã€ŠFactorioã€‹è®¾è®¡çš„ç§»åŠ¨ç«¯å·¥å‚è‡ªåŠ¨åŒ–ç®¡ç†æ¸¸æˆï¼Œé‡‡ç”¨ä»¥ç‰©å“ä¸ºä¸­å¿ƒçš„ç®€åŒ–ç•Œé¢è®¾è®¡ï¼Œæ”¯æŒå¤šè®¾å¤‡ç±»å‹ç”Ÿäº§å’Œå®Œå…¨è‡ªåŠ¨åŒ–çš„èµ„æºç®¡ç†ç³»ç»Ÿã€‚

### 1.2 æ ¸å¿ƒç‰¹è‰²

- **ä»¥ç‰©å“ä¸ºä¸­å¿ƒ**çš„å·¥å‚ç®¡ç†ç•Œé¢
- **å¤šè®¾å¤‡ç±»å‹**æ”¯æŒåŒä¸€ç‰©å“çš„ä¸åŒç”Ÿäº§æ–¹å¼
- **å®Œå…¨è‡ªåŠ¨åŒ–**çš„èµ„æºç®¡ç†ï¼ˆè®¾å¤‡è‡ªåŠ¨è·å–ç‡ƒæ–™å’ŒåŸæ–™ï¼‰
- **ç®€åŒ–ç•Œé¢**ä¸“æ³¨æ ¸å¿ƒæ•°æ®å’Œæ“ä½œ
- **æœ¬åœ°å­˜å‚¨**æ”¯æŒå®Œå…¨ç¦»çº¿æ¸¸æˆä½“éªŒ

### 1.3 ç›®æ ‡ç”¨æˆ·

- **æ ¸å¿ƒç”¨æˆ·**ï¼š25-44 å²ç­–ç•¥æ¸¸æˆçˆ±å¥½è€…
- **ç§»åŠ¨ç”¨æˆ·**ï¼šåå¥½ç®€æ´ç•Œé¢çš„æ‰‹æœºæ¸¸æˆç©å®¶
- **Factorio ç²‰ä¸**ï¼šç†Ÿæ‚‰åŸç‰ˆæ¸¸æˆæœºåˆ¶çš„ç©å®¶

## 2. åŠŸèƒ½éœ€æ±‚è§„æ ¼

### 2.1 ç‰©å“åˆ†ç±»ç³»ç»Ÿ

#### 2.1.1 åŸºäº Factorio çš„å…­å¤§åˆ†ç±»ä½“ç³»

```
ç‰©å“åˆ†ç±»ç»“æ„ï¼ˆåŸºäºFactorio 1.1.107æ•°æ®ï¼‰ï¼š
â”œâ”€â”€ ç‰©æµç³»ç»Ÿ (Logistics) ğŸ“¦
â”‚   â”œâ”€â”€ ä¼ é€è®¾å¤‡ï¼šä¼ é€å¸¦ã€åœ°ä¸‹ä¼ é€å¸¦ã€åˆ†æµå™¨
â”‚   â”œâ”€â”€ æ¬è¿è®¾å¤‡ï¼šæœºæ¢°è‡‚ã€å¿«é€Ÿæœºæ¢°è‡‚ã€å †å æœºæ¢°è‡‚
â”‚   â”œâ”€â”€ å­˜å‚¨è®¾å¤‡ï¼šç®±å­ã€å‚¨æ¶²ç½ã€ç‰©æµç®±å­
â”‚   â”œâ”€â”€ è¿è¾“è®¾å¤‡ï¼šç«è½¦ã€è½¦å¢ã€è½¨é“ä¿¡å·
â”‚   â””â”€â”€ ç‰¹æ€§ï¼šè‡ªåŠ¨åŒ–ç‰©æµæ ¸å¿ƒï¼Œæ”¯æŒç‰©å“ä¼ è¾“å’Œå­˜å‚¨
â”‚
â”œâ”€â”€ ç”Ÿäº§ç³»ç»Ÿ (Production) ğŸ­
â”‚   â”œâ”€â”€ å¼€é‡‡è®¾å¤‡ï¼šçƒ­åŠ›é‡‡æ˜æœºã€ç”µåŠ›é‡‡æ˜æœº
â”‚   â”œâ”€â”€ å†¶ç‚¼è®¾å¤‡ï¼šçŸ³è´¨ç†”ç‚‰ã€é’¢è´¨ç†”ç‚‰ã€ç”µç‚‰
â”‚   â”œâ”€â”€ è£…é…è®¾å¤‡ï¼šè£…é…æœº1-3å‹ã€åŒ–å·¥å‚ã€ç‚¼æ²¹å‚
â”‚   â”œâ”€â”€ å‘ç”µè®¾å¤‡ï¼šè’¸æ±½æœºã€å¤ªé˜³èƒ½æ¿ã€æ ¸ååº”å †
â”‚   â””â”€â”€ ç‰¹æ€§ï¼šè‡ªåŠ¨åŒ–ç”Ÿäº§æ ¸å¿ƒï¼Œæ”¯æŒèµ„æºåŠ å·¥å’Œåˆ¶é€ 
â”‚
â”œâ”€â”€ ä¸­é—´äº§å“ (Intermediate Products) âš™ï¸
â”‚   â”œâ”€â”€ é‡‘å±åˆ¶å“ï¼šé“æ¿ã€é“œæ¿ã€é’¢æ¿ã€çŸ³ç –
â”‚   â”œâ”€â”€ æœºæ¢°ç»„ä»¶ï¼šé“é½¿è½®ã€é“œçº¿ã€ç”µè·¯æ¿ã€é«˜çº§ç”µè·¯
â”‚   â”œâ”€â”€ åŒ–å·¥äº§å“ï¼šå¡‘æ–™ã€ç¡«é…¸ã€æ¶¦æ»‘æ²¹ã€ç”µæ± 
â”‚   â”œâ”€â”€ ç‡ƒæ–™äº§å“ï¼šå›ºä½“ç‡ƒæ–™ã€ç«ç®­ç‡ƒæ–™ã€æ ¸ç‡ƒæ–™
â”‚   â””â”€â”€ ç‰¹æ€§ï¼šç”Ÿäº§é“¾ä¸­é—´ç¯èŠ‚ï¼Œç”¨äºåˆ¶é€ æ›´é«˜çº§ç‰©å“
â”‚
â”œâ”€â”€ æˆ˜æ–—ç³»ç»Ÿ (Combat) âš”ï¸
â”‚   â”œâ”€â”€ æ­¦å™¨ç³»ç»Ÿï¼šæ‰‹æªã€å†²é”‹æªã€ç«ç®­ç­’ã€ç«ç„°å–·å°„å™¨
â”‚   â”œâ”€â”€ å¼¹è¯ç³»ç»Ÿï¼šå¼¹å¤¹ã€çˆ†ç‚¸å¼¹å¤¹ã€é“€å¼¹å¤¹
â”‚   â”œâ”€â”€ é˜²æŠ¤è®¾å¤‡ï¼šè½»å‹æŠ¤ç”²ã€é‡å‹æŠ¤ç”²ã€æ¨¡å—åŒ–æŠ¤ç”²
â”‚   â”œâ”€â”€ é˜²å¾¡è®¾æ–½ï¼šç‚®å¡”ã€æ¿€å…‰ç‚®å¡”ã€ç«ç„°ç‚®å¡”
â”‚   â””â”€â”€ ç‰¹æ€§ï¼šå†›äº‹é˜²å¾¡å’Œæ”»å‡»ç³»ç»Ÿ
â”‚
â”œâ”€â”€ æµä½“ç³»ç»Ÿ (Fluids) ğŸŒŠ
â”‚   â”œâ”€â”€ åŸºç¡€æµä½“ï¼šæ°´ã€åŸæ²¹ã€è’¸æ±½
â”‚   â”œâ”€â”€ åŠ å·¥æµä½“ï¼šé‡æ²¹ã€è½»æ²¹ã€çŸ³æ²¹æ°”
â”‚   â”œâ”€â”€ åŒ–å·¥æµä½“ï¼šç¡«é…¸ã€æ¶¦æ»‘æ²¹
â”‚   â”œâ”€â”€ ç‰¹æ®Šæµä½“ï¼šæ ¸ç‡ƒæ–™ã€é“€ç‡ƒæ–™
â”‚   â””â”€â”€ ç‰¹æ€§ï¼šæµä½“èµ„æºç®¡ç†ï¼Œæ”¯æŒåŒ–å·¥ç”Ÿäº§
â”‚
â””â”€â”€ ç§‘æŠ€ç³»ç»Ÿ (Technology) ğŸ§ª
    â”œâ”€â”€ ç§‘æŠ€åŒ…ï¼šè‡ªåŠ¨åŒ–ã€ç‰©æµã€å†›äº‹ã€åŒ–å­¦ã€ç”Ÿäº§ã€å®ç”¨ã€å¤ªç©ºç§‘æŠ€åŒ…
    â”œâ”€â”€ ç ”ç©¶è®¾æ–½ï¼šå®éªŒå®¤
    â”œâ”€â”€ ç§‘æŠ€å‡çº§ï¼šæ­¦å™¨ä¼¤å®³ã€å°„å‡»é€Ÿåº¦ã€æœºå™¨äººé€Ÿåº¦ç­‰
    â””â”€â”€ ç‰¹æ€§ï¼šç§‘æŠ€ç ”å‘å’Œè§£é”ç³»ç»Ÿï¼Œæ¨åŠ¨æ¸¸æˆè¿›ç¨‹
```

#### 2.1.2 åŸºäº Factorio çš„åˆ†ç±»åŠŸèƒ½è¦æ±‚

- **Tab åˆ‡æ¢**ï¼šæ¨ªå‘æ»šåŠ¨æ ‡ç­¾æ ï¼Œæ”¯æŒ 6 ä¸ªåŸºäº Factorio çš„åˆ†ç±»
- **å›¾æ ‡è¯†åˆ«**ï¼šæ¯ä¸ªåˆ†ç±»æœ‰ç‹¬ç‰¹çš„å›¾æ ‡å’Œé¢œè‰²ï¼ŒåŸºäº Factorio è®¾è®¡
- **çŠ¶æ€æŒ‡ç¤º**ï¼šæ˜¾ç¤ºè¯¥åˆ†ç±»ç‰©å“çš„ç”Ÿäº§çŠ¶æ€å’Œç§‘æŠ€è§£é”çŠ¶æ€
- **å¿«é€Ÿå®šä½**ï¼šç‚¹å‡»åˆ†ç±»å¿«é€Ÿè·³è½¬åˆ°å¯¹åº”ç‰©å“
- **ç§‘æŠ€å…³è”**ï¼šæ˜¾ç¤ºåˆ†ç±»ä¸­å·²è§£é”å’Œæœªè§£é”çš„ç‰©å“
- **é…æ–¹é¢„è§ˆ**ï¼šæ˜¾ç¤ºåˆ†ç±»ä¸­å¯ç”¨çš„é…æ–¹æ•°é‡

```typescript
// åŸºäºFactorioçš„åˆ†ç±»æ ‡ç­¾é…ç½®
const categoryTabs = [
  {
    id: "logistics",
    name: "ç‰©æµç³»ç»Ÿ",
    icon: "ğŸ“¦",
    color: "#22C55E",
    description: "ä¼ é€å¸¦ã€æœºæ¢°è‡‚ã€ç®±å­ç­‰ç‰©æµè®¾å¤‡",
  },
  {
    id: "production",
    name: "ç”Ÿäº§ç³»ç»Ÿ",
    icon: "ğŸ­",
    color: "#EAB308",
    description: "ç†”ç‚‰ã€è£…é…æœºã€é‡‡æ˜æœºç­‰ç”Ÿäº§è®¾å¤‡",
  },
  {
    id: "intermediate-products",
    name: "ä¸­é—´äº§å“",
    icon: "âš™ï¸",
    color: "#3B82F6",
    description: "é“æ¿ã€é“œæ¿ã€ç”µè·¯æ¿ç­‰ä¸­é—´äº§å“",
  },
  {
    id: "combat",
    name: "æˆ˜æ–—ç³»ç»Ÿ",
    icon: "âš”ï¸",
    color: "#EF4444",
    description: "æ­¦å™¨ã€å¼¹è¯ã€æŠ¤ç”²ç­‰å†›äº‹è£…å¤‡",
  },
  {
    id: "fluids",
    name: "æµä½“ç³»ç»Ÿ",
    icon: "ğŸŒŠ",
    color: "#06B6D4",
    description: "æ°´ã€æ²¹ã€è’¸æ±½ç­‰æµä½“èµ„æº",
  },
  {
    id: "technology",
    name: "ç§‘æŠ€ç³»ç»Ÿ",
    icon: "ğŸ§ª",
    color: "#8B5CF6",
    description: "ç§‘æŠ€åŒ…ã€å®éªŒå®¤ç­‰ç ”ç©¶è®¾æ–½",
  },
];
```

### 2.2 ç‰©å“ç½‘æ ¼ç•Œé¢

#### 2.2.1 ç½‘æ ¼å¸ƒå±€è®¾è®¡

```
ç½‘æ ¼å¸ƒå±€è§„èŒƒï¼š
â”œâ”€â”€ åŸºç¡€å¸ƒå±€ï¼š4åˆ— Ã— Nè¡Œ
â”œâ”€â”€ å¡ç‰‡å°ºå¯¸ï¼š80Ã—100px
â”œâ”€â”€ é—´è·è®¾ç½®ï¼š3pxç‰©å“é—´è·ï¼Œ12pxè¡Œé—´è·
â”œâ”€â”€ æ»šåŠ¨åŒºåŸŸï¼šå‚ç›´æ»šåŠ¨ï¼Œæ”¯æŒæƒ¯æ€§æ»šåŠ¨
â””â”€â”€ å“åº”å¼ï¼šè‡ªé€‚åº”ä¸åŒå±å¹•å®½åº¦
```

#### 2.2.2 ç‰©å“å¡ç‰‡è®¾è®¡

```
ç‰©å“å¡ç‰‡ç»“æ„ï¼ˆä¼˜åŒ–ç‰ˆï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [çŠ¶æ€æŒ‡ç¤º]      â”‚ â† çŠ¶æ€å¾½ç« ï¼ˆå³ä¸Šè§’ï¼‰
â”‚                 â”‚
â”‚   [å½©è‰²å›¾æ ‡]     â”‚ â† ç‰©å“å›¾æ ‡ï¼ˆä¸­å¤®ï¼‰
â”‚                 â”‚
â”‚   ç‰©å“åç§°       â”‚ â† åç§°ï¼ˆåº•éƒ¨ï¼‰
â”‚   245ä¸ª         â”‚ â† åº“å­˜æ•°é‡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€å¾½ç« è®¾è®¡ï¼š**
- **ç”Ÿäº§ä¸­**ï¼šç»¿è‰²åœ†ç‚¹ â— (è¡¨ç¤ºæ­£åœ¨ç”Ÿäº§)
- **åœäº§ä¸­**ï¼šç°è‰²åœ†ç‚¹ â—‹ (è¡¨ç¤ºè®¾å¤‡åœæ­¢)
- **ç¼ºæ–™ä¸­**ï¼šæ©™è‰²åœ†ç‚¹ âš  (è¡¨ç¤ºææ–™ä¸è¶³)
- **åº“å­˜æ»¡**ï¼šçº¢è‰²åœ†ç‚¹ ğŸ”´ (è¡¨ç¤ºåº“å­˜å·²æ»¡)
- **ç ”ç©¶ä¸­**ï¼šç´«è‰²åœ†ç‚¹ ğŸ”¬ (è¡¨ç¤ºç§‘æŠ€ç ”å‘ä¸­)
- **æ— çŠ¶æ€**ï¼šä¸æ˜¾ç¤ºå¾½ç«  (æ­£å¸¸çŠ¶æ€)

#### 2.2.3 è§†è§‰è®¾è®¡è§„èŒƒ

- **å›¾æ ‡é¢œè‰²**ï¼šæ¯ç±»ç‰©å“æœ‰ç‹¬ç‰¹çš„èƒŒæ™¯è‰²ç³»
- **çŠ¶æ€å¾½ç« **ï¼šå³ä¸Šè§’å°åœ†ç‚¹ï¼Œæ˜¾ç¤ºç‰©å“å½“å‰çŠ¶æ€
- **åº“å­˜æ˜¾ç¤º**ï¼šåº•éƒ¨æ˜¾ç¤ºå…·ä½“æ•°é‡ï¼Œæä¾›ç²¾ç¡®ä¿¡æ¯
- **çŠ¶æ€æŒ‡ç¤º**ï¼šç”Ÿäº§ä¸­ã€åœäº§ã€ç¼ºæ–™ç­‰çŠ¶æ€ç”¨ä¸åŒé¢œè‰²è¾¹æ¡†
- **äº¤äº’åé¦ˆ**ï¼šç‚¹å‡»æ—¶å¡ç‰‡é˜´å½±åŠ æ·±ï¼Œæä¾›è§†è§‰åé¦ˆ

**çŠ¶æ€å¾½ç« é¢œè‰²è§„èŒƒï¼š**
- **ç”Ÿäº§ä¸­**ï¼š#10B981 (ç»¿è‰²) - è®¾å¤‡æ­£åœ¨è¿è¡Œ
- **åœäº§ä¸­**ï¼š#6B7280 (ç°è‰²) - è®¾å¤‡åœæ­¢å·¥ä½œ
- **ç¼ºæ–™ä¸­**ï¼š#F59E0B (æ©™è‰²) - ææ–™ä¸è¶³
- **åº“å­˜æ»¡**ï¼š#EF4444 (çº¢è‰²) - åº“å­˜å·²æ»¡ï¼Œåœæ­¢ç”Ÿäº§
- **ç ”ç©¶ä¸­**ï¼š#8B5CF6 (ç´«è‰²) - ç§‘æŠ€ç ”å‘ä¸­
- **ç»´æŠ¤ä¸­**ï¼š#DC2626 (æ·±çº¢è‰²) - è®¾å¤‡éœ€è¦ç»´æŠ¤

**çŠ¶æ€å¾½ç« å®ç°é€»è¾‘ï¼š**
```typescript
interface ItemCardState {
  // çŠ¶æ€ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰
  priority: {
    maintenance: 1,    // ç»´æŠ¤ä¸­ - æœ€é«˜ä¼˜å…ˆçº§
    inventoryFull: 2,  // åº“å­˜æ»¡ - é«˜ä¼˜å…ˆçº§
    researching: 3,    // ç ”ç©¶ä¸­
    insufficient: 4,   // ç¼ºæ–™ä¸­
    stopped: 5,        // åœäº§ä¸­
    producing: 6,      // ç”Ÿäº§ä¸­
    normal: 7          // æ­£å¸¸çŠ¶æ€ - æœ€ä½ä¼˜å…ˆçº§
  };

  // çŠ¶æ€åˆ¤æ–­é€»è¾‘
  getItemState(itemId: string): ItemState {
    const item = this.getItem(itemId);
    
    // æ£€æŸ¥ç»´æŠ¤çŠ¶æ€
    if (this.hasMaintenanceIssues(itemId)) {
      return { type: 'maintenance', color: '#EF4444', icon: 'ğŸ”§' };
    }
    
    // æ£€æŸ¥åº“å­˜æ»¡çŠ¶æ€
    if (this.isInventoryFull(itemId)) {
      return { type: 'inventoryFull', color: '#EF4444', icon: 'ğŸ”´' };
    }
    
    // æ£€æŸ¥ç ”ç©¶çŠ¶æ€
    if (this.isResearching(itemId)) {
      return { type: 'researching', color: '#8B5CF6', icon: 'ğŸ”¬' };
    }
    
    // æ£€æŸ¥ç¼ºæ–™çŠ¶æ€
    if (this.hasInsufficientMaterials(itemId)) {
      return { type: 'insufficient', color: '#F59E0B', icon: 'âš ' };
    }
    
    // æ£€æŸ¥åœäº§çŠ¶æ€
    if (this.isStopped(itemId)) {
      return { type: 'stopped', color: '#6B7280', icon: 'â—‹' };
    }
    
    // æ£€æŸ¥ç”Ÿäº§çŠ¶æ€
    if (this.isProducing(itemId)) {
      return { type: 'producing', color: '#10B981', icon: 'â—' };
    }
    
    // æ­£å¸¸çŠ¶æ€ - ä¸æ˜¾ç¤ºå¾½ç« 
    return { type: 'normal', color: 'transparent', icon: '' };
  }
}
```

### 2.3 ç®€åŒ–ç‰©å“è¯¦æƒ…ç³»ç»Ÿ

#### 2.3.1 åŸºäº Factorio çš„è¯¦æƒ…é¡µé¢ç»“æ„

```
ç®€åŒ–è¯¦æƒ…é¡µé¢å¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å›¾æ ‡] ç‰©å“åç§°          [Ã—å…³é—­] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š æ ¸å¿ƒæ•°æ®åŒºåŸŸ                  â”‚
â”‚ åº“å­˜: 245/1000  å‡€å¢é•¿: +12.5/ç§’ â”‚
â”‚ äº§é‡: +15.0/ç§’  æ¶ˆè€—: -2.5/ç§’   â”‚
â”‚ ç§‘æŠ€çŠ¶æ€: å·²è§£é”/æœªè§£é”         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¦ å­˜å‚¨ç®¡ç†åŒºåŸŸ                  â”‚
â”‚ å­˜å‚¨è®¾å¤‡: é“ç®±å­ Ã— 1            â”‚
â”‚ [æ·»åŠ ç®±å­] [ç§»é™¤ç®±å­]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ é…æ–¹ä¿¡æ¯åŒºåŸŸ (æ¡ä»¶æ˜¾ç¤º) - ä½äºç‰©å“ä»‹ç»ä¸‹æ–¹ â”‚
â”‚ åˆ¶ä½œæ—¶é—´: 0.5ç§’  è§£é”ç§‘æŠ€: è‡ªåŠ¨åŒ–â”‚
â”‚ è¾“å…¥: é“æ¿Ã—8  è¾“å‡º: é“ç®±å­Ã—1    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”¨ æ‰‹åŠ¨æ“ä½œåŒºåŸŸ (æ¡ä»¶æ˜¾ç¤º)       â”‚
â”‚ [æ‰‹åŠ¨å¼€é‡‡] [æ‰‹åŠ¨åˆ¶ä½œ]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ­ ç”Ÿäº§è®¾æ–½åˆ—è¡¨                  â”‚
â”‚ çƒ­åŠ›é‡‡æ˜æœº  3å°  +8.4/ç§’ [-][+] â”‚
â”‚ ç”µåŠ›é‡‡æ˜æœº  2å°  +10.0/ç§’ [-][+]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3.2 æ ¸å¿ƒæ•°æ®åŒºåŸŸ

**æ•°æ®é¡¹å®šä¹‰ï¼š**

- **åº“å­˜æ•°é‡**ï¼šå½“å‰æ‹¥æœ‰çš„ç‰©å“æ€»æ•°
- **åº“å­˜ä¸Šé™**ï¼šé€šè¿‡ç®±å­/å‚¨ç½æä¾›çš„æœ€å¤§å­˜å‚¨å®¹é‡
- **å‡€å¢é•¿é‡**ï¼šæ¯ç§’å®é™…å¢é•¿é‡ï¼ˆäº§é‡-æ¶ˆè€—é‡ï¼‰
- **æ¯ç§’äº§é‡**ï¼šæ‰€æœ‰ç”Ÿäº§è®¾å¤‡çš„äº§é‡æ€»å’Œ
- **æ¯ç§’æ¶ˆè€—**ï¼šä½œä¸ºå…¶ä»–ç‰©å“åŸæ–™çš„æ¶ˆè€—é€Ÿåº¦

#### 2.3.3 å­˜å‚¨ç®¡ç†åŒºåŸŸ

**å­˜å‚¨ç³»ç»Ÿè®¾è®¡ï¼š**

```
åº“å­˜ä¸Šé™ç®¡ç†ï¼š
â”œâ”€â”€ åŸºç¡€å­˜å‚¨ï¼šæ¯ç§ç‰©å“é»˜è®¤100ä¸ªå­˜å‚¨ä¸Šé™
â”œâ”€â”€ ç®±å­æ‰©å®¹ï¼šæ¯ä¸ªé“ç®±å­å¢åŠ 1000ä¸ªå­˜å‚¨å®¹é‡
â”œâ”€â”€ å‚¨ç½æ‰©å®¹ï¼šæ¯ä¸ªå‚¨æ¶²ç½å¢åŠ 25000ä¸ªæµä½“å®¹é‡
â”œâ”€â”€ è‡ªåŠ¨åœæ­¢ï¼šè¾¾åˆ°ä¸Šé™æ—¶è‡ªåŠ¨åœæ­¢ç›¸å…³ç”Ÿäº§è®¾å¤‡
â””â”€â”€ æº¢å‡ºä¿æŠ¤ï¼šé˜²æ­¢åº“å­˜è¶…è¿‡ä¸Šé™å¯¼è‡´çš„æ•°æ®é”™è¯¯
```

**å­˜å‚¨è®¾å¤‡ç±»å‹ï¼š**

```typescript
interface StorageDevice {
  id: string;
  name: string;
  capacity: number;
  itemType: "solid" | "fluid";
  unlockedBy?: string;
}

const storageDevices: { [id: string]: StorageDevice } = {
  // å›ºä½“ç‰©å“å­˜å‚¨
  "iron-chest": {
    id: "iron-chest",
    name: "é“ç®±å­",
    capacity: 1000,
    itemType: "solid",
    unlockedBy: "automation",
  },

  "steel-chest": {
    id: "steel-chest", 
    name: "é’¢ç®±å­",
    capacity: 2000,
    itemType: "solid",
    unlockedBy: "steel-processing",
  },

  // æµä½“ç‰©å“å­˜å‚¨
  "storage-tank": {
    id: "storage-tank",
    name: "å‚¨æ¶²ç½",
    capacity: 25000,
    itemType: "fluid",
    unlockedBy: "fluid-handling",
  },
};
```

**å­˜å‚¨ç®¡ç†ç•Œé¢ï¼š**

```
å­˜å‚¨ç®¡ç†åŒºåŸŸè®¾è®¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ å­˜å‚¨ç®¡ç†                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å½“å‰åº“å­˜: 245/1000              â”‚
â”‚ å­˜å‚¨è®¾å¤‡: é“ç®±å­ Ã— 1            â”‚
â”‚ [æ·»åŠ ç®±å­] [ç§»é™¤ç®±å­]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ€: ç”Ÿäº§ä¸­ (æœªè¾¾ä¸Šé™)          â”‚
â”‚ æˆ–: å·²æ»¡ (åœæ­¢ç”Ÿäº§)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ·»åŠ è®¾å¤‡æ—¶çš„åº“å­˜æ£€æŸ¥ï¼š**

```
æ·»åŠ è®¾å¤‡æµç¨‹ï¼š
â”œâ”€â”€ ç‚¹å‡»æ·»åŠ æŒ‰é’®
â”œâ”€â”€ æ£€æŸ¥ç®±å­/å‚¨ç½åº“å­˜
â”‚   â”œâ”€â”€ æœ‰åº“å­˜ï¼šæ¶ˆè€—1ä¸ªç®±å­ï¼Œå¢åŠ å­˜å‚¨å®¹é‡
â”‚   â””â”€â”€ æ— åº“å­˜ï¼šæ˜¾ç¤ºæç¤º"åº“å­˜ä¸è¶³ï¼šéœ€è¦é“ç®±å­ä½†å½“å‰æ²¡æœ‰åº“å­˜"
â”œâ”€â”€ æ›´æ–°å­˜å‚¨è®¾å¤‡åˆ—è¡¨
â””â”€â”€ åˆ·æ–°ç•Œé¢æ˜¾ç¤º
```

**æŒ‰é’®çŠ¶æ€ç®¡ç†ï¼š**

```
æŒ‰é’®çŠ¶æ€é€»è¾‘ï¼š
â”œâ”€â”€ æ·»åŠ æŒ‰é’®ï¼š
â”‚   â”œâ”€â”€ æœ‰ç®±å­åº“å­˜ï¼šé«˜äº®å¯ç‚¹å‡»
â”‚   â””â”€â”€ æ— ç®±å­åº“å­˜ï¼šç½®ç°ä¸å¯ç‚¹å‡»
â”œâ”€â”€ ç§»é™¤æŒ‰é’®ï¼š
â”‚   â”œâ”€â”€ æœ‰å­˜å‚¨è®¾å¤‡ï¼šé«˜äº®å¯ç‚¹å‡»
â”‚   â””â”€â”€ æ— å­˜å‚¨è®¾å¤‡ï¼šç½®ç°ä¸å¯ç‚¹å‡»
â””â”€â”€ çŠ¶æ€æç¤ºï¼š
    â”œâ”€â”€ åº“å­˜å……è¶³ï¼šæ˜¾ç¤º"å¯æ·»åŠ "
    â””â”€â”€ åº“å­˜ä¸è¶³ï¼šæ˜¾ç¤º"åº“å­˜ä¸è¶³"
```

**å­˜å‚¨ç®¡ç†åŠŸèƒ½ï¼š**

- **æ·»åŠ å­˜å‚¨è®¾å¤‡**ï¼šç‚¹å‡»æ·»åŠ æŒ‰é’®ï¼Œæ¶ˆè€—ç®±å­/å‚¨ç½åº“å­˜å»ºé€ å­˜å‚¨è®¾å¤‡
- **ç§»é™¤å­˜å‚¨è®¾å¤‡**ï¼šç‚¹å‡»ç§»é™¤æŒ‰é’®ï¼Œå‡å°‘å­˜å‚¨å®¹é‡ï¼ˆéœ€è¦ç¡®è®¤ï¼‰
- **å®¹é‡æ˜¾ç¤º**ï¼šå®æ—¶æ˜¾ç¤ºå½“å‰åº“å­˜å’Œæœ€å¤§å®¹é‡
- **çŠ¶æ€æŒ‡ç¤º**ï¼šæ˜¾ç¤ºå­˜å‚¨çŠ¶æ€ï¼ˆæœªæ»¡/å·²æ»¡ï¼‰
- **è‡ªåŠ¨ç®¡ç†**ï¼šè¾¾åˆ°ä¸Šé™æ—¶è‡ªåŠ¨åœæ­¢ç›¸å…³ç”Ÿäº§è®¾å¤‡
- **åº“å­˜æ£€æŸ¥**ï¼šæ·»åŠ è®¾å¤‡å‰æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç®±å­/å‚¨ç½åº“å­˜

**åº“å­˜ä¸Šé™å®ç°é€»è¾‘ï¼š**

```typescript
class InventoryLimitManager {
  // åº“å­˜ä¸Šé™æ•°æ®ç»“æ„
  interface InventoryLimit {
    itemId: string;
    currentAmount: number;
    maxCapacity: number;
    storageDevices: StorageDeviceInstance[];
    isFull: boolean;
  }

  // æ£€æŸ¥åº“å­˜æ˜¯å¦è¾¾åˆ°ä¸Šé™
  checkInventoryLimit(itemId: string): boolean {
    const limit = this.getInventoryLimit(itemId);
    return limit.currentAmount >= limit.maxCapacity;
  }

  // æ›´æ–°åº“å­˜ä¸Šé™
  updateInventoryLimit(itemId: string, newAmount: number): void {
    const limit = this.getInventoryLimit(itemId);
    
    // é˜²æ­¢è¶…è¿‡ä¸Šé™
    if (newAmount > limit.maxCapacity) {
      newAmount = limit.maxCapacity;
      this.notifyInventoryFull(itemId);
    }
    
    limit.currentAmount = newAmount;
    limit.isFull = newAmount >= limit.maxCapacity;
    
    // å¦‚æœè¾¾åˆ°ä¸Šé™ï¼Œåœæ­¢ç›¸å…³ç”Ÿäº§è®¾å¤‡
    if (limit.isFull) {
      this.stopProductionDevices(itemId);
    }
  }

  // æ·»åŠ å­˜å‚¨è®¾å¤‡
  addStorageDevice(itemId: string, deviceType: string): boolean {
    const device = storageDevices[deviceType];
    if (!device) return false;
    
    // æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç®±å­/å‚¨ç½åº“å­˜
    if (!this.hasEnoughStorageDevice(deviceType)) {
      this.notifyInsufficientStorageDevice(deviceType);
      return false;
    }
    
    // æ¶ˆè€—ç®±å­/å‚¨ç½åº“å­˜
    this.consumeStorageDevice(deviceType);
    
    // å¢åŠ å­˜å‚¨å®¹é‡
    const limit = this.getInventoryLimit(itemId);
    limit.maxCapacity += device.capacity;
    limit.storageDevices.push({
      type: deviceType,
      capacity: device.capacity
    });
    
    return true;
  }

  // ç§»é™¤å­˜å‚¨è®¾å¤‡
  removeStorageDevice(itemId: string, deviceIndex: number): boolean {
    const limit = this.getInventoryLimit(itemId);
    const device = limit.storageDevices[deviceIndex];
    
    if (!device) return false;
    
    // æ£€æŸ¥ç§»é™¤åæ˜¯å¦ä¼šå¯¼è‡´åº“å­˜æº¢å‡º
    const newCapacity = limit.maxCapacity - device.capacity;
    if (limit.currentAmount > newCapacity) {
      this.notifyCannotRemoveDevice(itemId, "åº“å­˜å°†æº¢å‡º");
      return false;
    }
    
    // ç§»é™¤è®¾å¤‡
    limit.maxCapacity -= device.capacity;
    limit.storageDevices.splice(deviceIndex, 1);
    
    return true;
  }

  // åœæ­¢ç”Ÿäº§è®¾å¤‡
  private stopProductionDevices(itemId: string): void {
    const devices = this.getProductionDevices(itemId);
    devices.forEach(device => {
      device.working = false;
      device.status = "stopped_full_inventory";
    });
  }

  // æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„å­˜å‚¨è®¾å¤‡åº“å­˜
  private hasEnoughStorageDevice(deviceType: string): boolean {
    const currentStock = this.getInventoryAmount(deviceType);
    return currentStock > 0;
  }

  // æ¶ˆè€—å­˜å‚¨è®¾å¤‡åº“å­˜
  private consumeStorageDevice(deviceType: string): void {
    this.decreaseInventory(deviceType, 1);
  }

  // é€šçŸ¥å­˜å‚¨è®¾å¤‡åº“å­˜ä¸è¶³
  private notifyInsufficientStorageDevice(deviceType: string): void {
    const deviceName = storageDevices[deviceType]?.name || deviceType;
    this.showNotification(`åº“å­˜ä¸è¶³ï¼šéœ€è¦ ${deviceName} ä½†å½“å‰æ²¡æœ‰åº“å­˜`);
  }

  // è·å–å­˜å‚¨è®¾å¤‡åº“å­˜ä¿¡æ¯
  getStorageDeviceStockInfo(): StorageDeviceStockInfo[] {
    return Object.keys(storageDevices).map(deviceType => ({
      deviceType,
      deviceName: storageDevices[deviceType].name,
      currentStock: this.getInventoryAmount(deviceType),
      canAdd: this.getInventoryAmount(deviceType) > 0
    }));
  }
}

// å­˜å‚¨è®¾å¤‡åº“å­˜ä¿¡æ¯æ¥å£
interface StorageDeviceStockInfo {
  deviceType: string;
  deviceName: string;
  currentStock: number;
  canAdd: boolean;
}

// ä½¿ç”¨ç¤ºä¾‹ï¼šä¸ºé“æ¿æ·»åŠ é“ç®±å­å­˜å‚¨
const ironPlateStorageExample = {
  // æ£€æŸ¥é“ç®±å­åº“å­˜
  ironChestStock: 5, // å½“å‰æœ‰5ä¸ªé“ç®±å­
  
  // æ·»åŠ å­˜å‚¨è®¾å¤‡
  addIronChestToIronPlate: () => {
    if (ironChestStock > 0) {
      // æ¶ˆè€—1ä¸ªé“ç®±å­
      ironChestStock--;
      
      // ä¸ºé“æ¿å¢åŠ 1000å­˜å‚¨å®¹é‡
      ironPlateMaxCapacity += 1000;
      
      return { success: true, message: "å·²æ·»åŠ é“ç®±å­å­˜å‚¨" };
    } else {
      return { success: false, message: "åº“å­˜ä¸è¶³ï¼šéœ€è¦é“ç®±å­ä½†å½“å‰æ²¡æœ‰åº“å­˜" };
    }
  }
};
```
```

#### 2.3.4 é…æ–¹ä¿¡æ¯åŒºåŸŸ

**æ˜¾ç¤ºæ¡ä»¶ï¼š**
- ç‰©å“æœ‰åˆ¶ä½œé…æ–¹æ—¶æ˜¾ç¤º
- é…æ–¹å·²è§£é”æ—¶æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯
- é…æ–¹æœªè§£é”æ—¶æ˜¾ç¤ºé”å®šçŠ¶æ€

**ä¿¡æ¯å±•ç¤ºï¼š**
- **åˆ¶ä½œæ—¶é—´**ï¼šé…æ–¹çš„åŸºç¡€åˆ¶ä½œæ—¶é—´
- **è§£é”ç§‘æŠ€**ï¼šè§£é”è¯¥é…æ–¹çš„ç§‘æŠ€åç§°
- **è¾“å…¥ææ–™**ï¼šåˆ¶ä½œæ‰€éœ€çš„åŸææ–™åŠæ•°é‡
- **è¾“å‡ºç‰©å“**ï¼šåˆ¶ä½œäº§å‡ºçš„ç‰©å“åŠæ•°é‡
- **åˆ¶ä½œè®¾å¤‡**ï¼šå¯ç”¨äºåˆ¶ä½œè¯¥é…æ–¹çš„è®¾å¤‡ç±»å‹

**åŸºäº Factorio çš„è®¡ç®—å…¬å¼ï¼š**

```typescript
// åŸºäºFactorioçš„ç”Ÿäº§é€Ÿç‡è®¡ç®—
interface ProductionCalculation {
  // æ¯ç§’äº§é‡è®¡ç®—
  productionPerSecond = Î£(
    è®¾å¤‡åŸºç¡€é€Ÿåº¦ Ã—
    è®¾å¤‡ç­‰çº§ç³»æ•° Ã—
    è®¾å¤‡æ•ˆç‡ç³»æ•° Ã—
    æ¨¡å—åŠ æˆç³»æ•° Ã—
    å·¥ä½œçŠ¶æ€ç³»æ•°
  );

  // æ¯ç§’æ¶ˆè€—è®¡ç®— (åŸºäºé…æ–¹æ•°æ®)
  consumptionPerSecond = Î£(
    æ¶ˆè€—è¯¥ç‰©å“çš„é…æ–¹äº§é‡ Ã—
    é…æ–¹ä¸­è¯¥ç‰©å“çš„æ¶ˆè€—æ¯”ä¾‹
  );

  // å‡€å¢é•¿é‡
  netGrowth = productionPerSecond - consumptionPerSecond;

  // ç§‘æŠ€è§£é”çŠ¶æ€
  isUnlocked = æ£€æŸ¥ç§‘æŠ€è§£é”çŠ¶æ€(ç‰©å“ID);

  // å¯ç”¨é…æ–¹
  availableRecipes = è·å–å¯ç”¨é…æ–¹(ç‰©å“ID);
}

// ç¤ºä¾‹ï¼šé“æ¿çš„ç”Ÿäº§è®¡ç®—
const ironPlateCalculation = {
  // ç”Ÿäº§è®¾å¤‡
  electricMiningDrills: 5, // 5å°ç”µåŠ›é‡‡æ˜æœº
  stoneFurnaces: 3,        // 3å°çŸ³è´¨ç†”ç‚‰

  // äº§é‡è®¡ç®—
  miningProduction: 5 Ã— 0.5 Ã— 1.0 = 2.5 é“çŸ¿çŸ³/ç§’,
  smeltingProduction: 3 Ã— 1.0 Ã— 1.0 = 3.0 é“æ¿/ç§’,

  // æ¶ˆè€—è®¡ç®— (ä½œä¸ºå…¶ä»–ç‰©å“åŸæ–™)
  consumption: è®¡ç®—ä½œä¸ºåŸæ–™çš„æ¶ˆè€—,

  // å‡€å¢é•¿
  netGrowth: 3.0 - æ¶ˆè€—é‡
};
```

#### 2.3.5 æ‰‹åŠ¨æ“ä½œåŒºåŸŸ

**æ˜¾ç¤ºæ¡ä»¶ï¼š**

- **æ‰‹åŠ¨å¼€é‡‡**ï¼šåŸææ–™ç±»ç‰©å“ä¸”å¯å¼€é‡‡æ—¶æ˜¾ç¤º
- **æ‰‹åŠ¨åˆ¶ä½œ**ï¼šæœ‰åˆ¶ä½œé…æ–¹çš„ç‰©å“æ˜¾ç¤º

**æ“ä½œåŠŸèƒ½ï¼š**

- ç‚¹å‡»åæ·»åŠ ä»»åŠ¡åˆ°åˆ¶ä½œé˜Ÿåˆ—
- æ˜¾ç¤ºé¢„è®¡å®Œæˆæ—¶é—´
- æ£€æŸ¥ææ–™å……è¶³æ€§

**ç§»åŠ¨ç«¯åˆ¶ä½œæŒ‰é’®è®¾è®¡ï¼š**

```
æ‰‹åŠ¨åˆ¶ä½œæŒ‰é’®å¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¨ æ‰‹å·¥åˆ¶ä½œ                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [åˆ¶ä½œ1ä¸ª] [åˆ¶ä½œ5ä¸ª] [æœ€å¤šåˆ¶é€ ]   â”‚
â”‚ ææ–™å……è¶³ âœ“ é¢„è®¡æ—¶é—´: 2.5ç§’      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŒ‰é’®åŠŸèƒ½ï¼š**

- **åˆ¶ä½œ 1 ä¸ªæŒ‰é’®**ï¼šæ·»åŠ  1 ä¸ªåˆ¶ä½œä»»åŠ¡åˆ°é˜Ÿåˆ—
- **åˆ¶ä½œ 5 ä¸ªæŒ‰é’®**ï¼šæ·»åŠ  5 ä¸ªåˆ¶ä½œä»»åŠ¡åˆ°é˜Ÿåˆ—
- **æœ€å¤šåˆ¶é€ æŒ‰é’®**ï¼šæ ¹æ®ææ–™æ•°é‡æ·»åŠ æœ€å¤§å¯åˆ¶ä½œæ•°é‡çš„ä»»åŠ¡

**çŠ¶æ€æ˜¾ç¤ºï¼š**

- ææ–™å……è¶³æ—¶æŒ‰é’®é«˜äº®ï¼Œææ–™ä¸è¶³æ—¶æŒ‰é’®ç½®ç°
- æ˜¾ç¤ºé¢„è®¡å®Œæˆæ—¶é—´
- æ˜¾ç¤ºææ–™æ¶ˆè€—æç¤º

#### 2.3.6 ç”Ÿäº§è®¾æ–½åˆ—è¡¨

**è®¾æ–½å¡ç‰‡è®¾è®¡ï¼š**

```
è®¾æ–½å¡ç‰‡ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è®¾æ–½åç§°                        â”‚
â”‚ Xå° | äº§èƒ½: +XX.X/ç§’             â”‚
â”‚ â—â—â—‹ 2/3 è¿è¡Œä¸­     [-] 3 [+]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¿¡æ¯å±•ç¤ºï¼š**

- **è®¾æ–½åç§°**ï¼šè®¾å¤‡ç±»å‹åç§°
- **æ•°é‡ç»Ÿè®¡**ï¼šè¯¥ç±»è®¾æ–½çš„æ€»æ•°é‡
- **æ€»äº§èƒ½**ï¼šè¯¥ç±»è®¾æ–½çš„æ€»äº§é‡
- **è¿è¡ŒçŠ¶æ€**ï¼šç”¨å½©è‰²åœ†ç‚¹æ˜¾ç¤ºæ¯å°è®¾å¤‡çŠ¶æ€ï¼ˆç»¿=è¿è¡Œï¼Œçº¢=åœæ­¢ï¼‰
- **æ•°é‡æ§åˆ¶**ï¼šå¢å‡æŒ‰é’®ç›´æ¥è°ƒæ•´è®¾æ–½æ•°é‡

### 2.4 è®¾å¤‡è‡ªåŠ¨åŒ–ç®¡ç†ç³»ç»Ÿ

#### 2.4.1 åŸºäº Factorio çš„è®¾å¤‡ç±»å‹å®šä¹‰

```typescript
// åŸºäºFactorio 1.1.107æ•°æ®çš„è®¾å¤‡ç±»å‹å®šä¹‰
interface EquipmentType {
  id: string;
  name: string;
  category: "mining" | "smelting" | "assembly" | "chemical" | "research";
  baseSpeed: number;
  powerType: "fuel" | "electric";
  powerConsumption?: number; // kW
  fuelType?: "coal" | "wood" | "solid-fuel";
  cost: { [itemId: string]: number };
  canProduce: string[]; // å¯ç”Ÿäº§çš„ç‰©å“IDåˆ—è¡¨
  efficiency: number;
  unlockedBy?: string; // è§£é”ç§‘æŠ€ID
}

// ä¸»è¦è®¾å¤‡ç±»å‹å®šä¹‰
const equipmentTypes: { [id: string]: EquipmentType } = {
  // å¼€é‡‡è®¾å¤‡
  "burner-mining-drill": {
    id: "burner-mining-drill",
    name: "çƒ­åŠ›é‡‡æ˜æœº",
    category: "mining",
    baseSpeed: 0.25,
    powerType: "fuel",
    fuelType: "coal",
    cost: { "stone-furnace": 1, "iron-gear-wheel": 3, "iron-plate": 3 },
    canProduce: ["iron-ore", "copper-ore", "coal", "stone", "uranium-ore"],
    efficiency: 1.0,
  },

  "electric-mining-drill": {
    id: "electric-mining-drill",
    name: "ç”µåŠ›é‡‡æ˜æœº",
    category: "mining",
    baseSpeed: 0.5,
    powerType: "electric",
    powerConsumption: 90,
    cost: { "electronic-circuit": 3, "iron-gear-wheel": 5, "iron-plate": 10 },
    canProduce: ["iron-ore", "copper-ore", "coal", "stone", "uranium-ore"],
    efficiency: 1.0,
    unlockedBy: "automation",
  },

  // å†¶ç‚¼è®¾å¤‡
  "stone-furnace": {
    id: "stone-furnace",
    name: "çŸ³è´¨ç†”ç‚‰",
    category: "smelting",
    baseSpeed: 1.0,
    powerType: "fuel",
    fuelType: "coal",
    cost: { stone: 5 },
    canProduce: ["iron-plate", "copper-plate", "steel-plate", "stone-brick"],
    efficiency: 1.0,
  },

  "steel-furnace": {
    id: "steel-furnace",
    name: "é’¢è´¨ç†”ç‚‰",
    category: "smelting",
    baseSpeed: 2.0,
    powerType: "fuel",
    fuelType: "coal",
    cost: { "steel-plate": 6, "advanced-circuit": 10, "stone-brick": 10 },
    canProduce: ["iron-plate", "copper-plate", "steel-plate", "stone-brick"],
    efficiency: 1.0,
    unlockedBy: "steel-processing",
  },

  "electric-furnace": {
    id: "electric-furnace",
    name: "ç”µç‚‰",
    category: "smelting",
    baseSpeed: 2.0,
    powerType: "electric",
    powerConsumption: 180,
    cost: { "advanced-circuit": 5, "steel-plate": 10, "stone-brick": 10 },
    canProduce: ["iron-plate", "copper-plate", "steel-plate", "stone-brick"],
    efficiency: 1.0,
    unlockedBy: "advanced-material-processing",
  },

  // è£…é…è®¾å¤‡
  "assembling-machine-1": {
    id: "assembling-machine-1",
    name: "è£…é…æœº1å‹",
    category: "assembly",
    baseSpeed: 0.5,
    powerType: "electric",
    powerConsumption: 77,
    cost: { "electronic-circuit": 3, "iron-gear-wheel": 5, "iron-plate": 9 },
    canProduce: [], // å¯ç”Ÿäº§æ‰€æœ‰æœ‰é…æ–¹çš„ç‰©å“
    efficiency: 1.0,
    unlockedBy: "automation",
  },

  "assembling-machine-2": {
    id: "assembling-machine-2",
    name: "è£…é…æœº2å‹",
    category: "assembly",
    baseSpeed: 0.75,
    powerType: "electric",
    powerConsumption: 155,
    cost: {
      "assembling-machine-1": 1,
      "electronic-circuit": 2,
      "iron-gear-wheel": 5,
    },
    canProduce: [], // å¯ç”Ÿäº§æ‰€æœ‰æœ‰é…æ–¹çš„ç‰©å“
    efficiency: 1.0,
    unlockedBy: "automation-2",
  },

  "assembling-machine-3": {
    id: "assembling-machine-3",
    name: "è£…é…æœº3å‹",
    category: "assembly",
    baseSpeed: 1.25,
    powerType: "electric",
    powerConsumption: 388,
    cost: {
      "assembling-machine-2": 1,
      "speed-module": 4,
      "advanced-circuit": 2,
    },
    canProduce: [], // å¯ç”Ÿäº§æ‰€æœ‰æœ‰é…æ–¹çš„ç‰©å“
    efficiency: 1.0,
    unlockedBy: "automation-3",
  },

  // åŒ–å·¥è®¾å¤‡
  "chemical-plant": {
    id: "chemical-plant",
    name: "åŒ–å·¥å‚",
    category: "chemical",
    baseSpeed: 1.0,
    powerType: "electric",
    powerConsumption: 210,
    cost: { "steel-plate": 5, "electronic-circuit": 5, "iron-gear-wheel": 5 },
    canProduce: [
      "sulfuric-acid",
      "plastic-bar",
      "sulfur",
      "battery",
      "lubricant",
    ],
    efficiency: 1.0,
    unlockedBy: "oil-processing",
  },

  "oil-refinery": {
    id: "oil-refinery",
    name: "ç‚¼æ²¹å‚",
    category: "chemical",
    baseSpeed: 1.0,
    powerType: "electric",
    powerConsumption: 420,
    cost: {
      "steel-plate": 10,
      "electronic-circuit": 10,
      "iron-gear-wheel": 10,
    },
    canProduce: ["heavy-oil", "light-oil", "petroleum-gas"],
    efficiency: 1.0,
    unlockedBy: "oil-processing",
  },

  // ç ”ç©¶è®¾å¤‡
  lab: {
    id: "lab",
    name: "å®éªŒå®¤",
    category: "research",
    baseSpeed: 1.0,
    powerType: "electric",
    powerConsumption: 60,
    cost: {
      "electronic-circuit": 10,
      "iron-gear-wheel": 4,
      "transport-belt": 4,
    },
    canProduce: [], // åªç”¨äºç§‘æŠ€ç ”ç©¶
    efficiency: 1.0,
    unlockedBy: "automation",
  },
};
```

#### 2.4.2 åŸºäº Factorio çš„é…æ–¹æ•°æ®ç»“æ„

```typescript
// åŸºäºFactorio 1.1.107æ•°æ®çš„é…æ–¹ç»“æ„
interface Recipe {
  id: string; // é…æ–¹å”¯ä¸€ID
  name: string; // æ˜¾ç¤ºåç§°
  category: string; // åˆ†ç±» (logistics, production, crafting-with-fluidç­‰)
  row: number; // ç§‘æŠ€æ ‘è¡Œä½ç½®
  time: number; // åˆ¶ä½œæ—¶é—´(ç§’)
  producers: string[]; // å¯ç”Ÿäº§æ­¤é…æ–¹çš„æœºå™¨åˆ—è¡¨
  in: { [itemId: string]: number }; // è¾“å…¥ææ–™åŠæ•°é‡
  out: { [itemId: string]: number }; // è¾“å‡ºç‰©å“åŠæ•°é‡
  unlockedBy?: string; // è§£é”æ­¤é…æ–¹çš„ç§‘æŠ€ID
}

// ç¤ºä¾‹é…æ–¹æ•°æ®
const recipeExamples: Recipe[] = [
  {
    id: "iron-chest",
    name: "Iron chest",
    category: "logistics",
    row: 0,
    time: 0.5,
    producers: [
      "assembling-machine-1",
      "assembling-machine-2",
      "assembling-machine-3",
    ],
    in: { "iron-plate": 8 },
    out: { "iron-chest": 1 },
  },

  {
    id: "transport-belt",
    name: "Transport belt",
    category: "logistics",
    row: 1,
    time: 0.5,
    producers: [
      "assembling-machine-1",
      "assembling-machine-2",
      "assembling-machine-3",
    ],
    in: { "iron-plate": 1, "iron-gear-wheel": 1 },
    out: { "transport-belt": 2 },
  },

  {
    id: "express-transport-belt",
    name: "Express transport belt",
    category: "crafting-with-fluid",
    row: 1,
    time: 0.5,
    producers: ["assembling-machine-2", "assembling-machine-3"],
    in: { "iron-gear-wheel": 10, "fast-transport-belt": 1, lubricant: 20 },
    out: { "express-transport-belt": 1 },
    unlockedBy: "logistics-3",
  },

  {
    id: "concrete",
    name: "Concrete",
    category: "crafting-with-fluid",
    row: 8,
    time: 10,
    producers: ["assembling-machine-2", "assembling-machine-3"],
    in: { "stone-brick": 5, "iron-ore": 1, water: 100 },
    out: { concrete: 10 },
    unlockedBy: "concrete-technology",
  },
];

// è®¾å¤‡å®ä¾‹æ•°æ®ç»“æ„
interface EquipmentInstance {
  id: string; // å”¯ä¸€æ ‡è¯†ç¬¦
  type: string; // è®¾å¤‡ç±»å‹ID
  level: number; // è®¾å¤‡ç­‰çº§
  efficiency: number; // æ•ˆç‡ç³»æ•°
  working: boolean; // å·¥ä½œçŠ¶æ€å¸ƒå°”å€¼

  // ç‡ƒæ–™è®¾å¤‡ä¸“æœ‰å±æ€§
  fuel?: number; // å½“å‰ç‡ƒæ–™é‡
  maxFuel?: number; // æœ€å¤§ç‡ƒæ–™å®¹é‡
  fuelType?: string; // ç‡ƒæ–™ç±»å‹

  // ç”µåŠ›è®¾å¤‡ä¸“æœ‰å±æ€§
  powerConnected?: boolean; // ç”µåŠ›è¿æ¥çŠ¶æ€
  powerConsumption?: number; // ç”µåŠ›æ¶ˆè€—

  // æ¨¡å—æ’æ§½
  modules?: { [slotIndex: number]: ModuleInstance };

  // çŠ¶æ€ä¿¡æ¯
  lastMaintenance?: number; // æœ€åç»´æŠ¤æ—¶é—´
  totalRuntime?: number; // æ€»è¿è¡Œæ—¶é—´
  totalProduction?: number; // æ€»äº§é‡
}

// è®¾å¤‡å®ä¾‹ç®¡ç†ç»“æ„
interface EquipmentManagement {
  [itemId: string]: {
    [equipmentType: string]: EquipmentInstance[];
  };
}
```

#### 2.4.3 å®Œå…¨è‡ªåŠ¨åŒ–æœºåˆ¶

**ç‡ƒæ–™è‡ªåŠ¨ç®¡ç†ï¼š**

```
ç‡ƒæ–™è‡ªåŠ¨è¡¥å……æµç¨‹ï¼š
1. æ¯100msæ£€æŸ¥è®¾å¤‡ç‡ƒæ–™æ°´å¹³
2. ç‡ƒæ–™ < 50%æœ€å¤§å®¹é‡æ—¶è§¦å‘è¡¥å……
3. è‡ªåŠ¨ä»åº“å­˜ä¸­æ¶ˆè€—ç…¤ç‚­
4. æŒ‰æ¯”ä¾‹è½¬æ¢ä¸ºè®¾å¤‡ç‡ƒæ–™
5. åº“å­˜ç…¤ç‚­ä¸è¶³æ—¶è®¾å¤‡è‡ªåŠ¨åœæœº
6. è¡¥å……ç…¤ç‚­åè®¾å¤‡è‡ªåŠ¨é‡å¯
```

**åŸæ–™è‡ªåŠ¨æ¶ˆè€—ï¼š**

```
åŸæ–™è‡ªåŠ¨æ¶ˆè€—æµç¨‹ï¼š
1. æ£€æŸ¥ç‰©å“åˆ¶ä½œé…æ–¹
2. éªŒè¯åº“å­˜åŸæ–™æ˜¯å¦å……è¶³
3. æŒ‰ç”Ÿäº§é€Ÿåº¦æ¯”ä¾‹æ¶ˆè€—åŸæ–™
4. åŒæ­¥äº§å‡ºç›®æ ‡ç‰©å“
5. åŸæ–™ä¸è¶³æ—¶è‡ªåŠ¨åœæ­¢ç”Ÿäº§
6. è¡¥å……åŸæ–™åè‡ªåŠ¨æ¢å¤ç”Ÿäº§
```

### 2.5 åˆ¶ä½œé˜Ÿåˆ—ç³»ç»Ÿ

#### 2.5.1 é˜Ÿåˆ—ç•Œé¢è®¾è®¡

**ç®€åŒ–ç§»åŠ¨ç«¯è®¾è®¡ï¼š**

```
åˆ¶ä½œé˜Ÿåˆ—å¸ƒå±€ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”§ åˆ¶ä½œé˜Ÿåˆ— (3/10)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å›¾æ ‡+ç¯å½¢è¿›åº¦] [å›¾æ ‡+ç¯å½¢è¿›åº¦] â”‚
â”‚  [å›¾æ ‡+ç¯å½¢è¿›åº¦] [å›¾æ ‡+ç¯å½¢è¿›åº¦] â”‚
â”‚  [å›¾æ ‡+ç¯å½¢è¿›åº¦] [å›¾æ ‡+ç¯å½¢è¿›åº¦] â”‚
â”‚  ...ï¼ˆç½‘æ ¼æ’åˆ—ï¼Œæœ€å¤šæ˜¾ç¤º10ä¸ªï¼‰   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¾è®¡ç‰¹ç‚¹ï¼š**

- **ç®€æ´ç•Œé¢**ï¼šåªæ˜¾ç¤ºå›¾æ ‡å’Œç¯å½¢è¿›åº¦æ¡
- **ç¯å½¢è¿›åº¦**ï¼šåŠé€æ˜ç¯å½¢è¿›åº¦æ¡è¦†ç›–åœ¨å›¾æ ‡ä¸Š
- **ç‚¹å‡»å–æ¶ˆ**ï¼šç‚¹å‡»å›¾æ ‡å³å¯å–æ¶ˆå¯¹åº”åˆ¶ä½œä»»åŠ¡
- **ç½‘æ ¼æ’åˆ—**ï¼šå¤šä¸ªä»»åŠ¡ä»¥ç½‘æ ¼å½¢å¼æ’åˆ—ï¼ŒèŠ‚çœç©ºé—´
- **è¿›åº¦æ˜¾ç¤º**ï¼šç¯å½¢è¿›åº¦æ¡æ˜¾ç¤ºåˆ¶ä½œè¿›åº¦ç™¾åˆ†æ¯”
- **ä¸“æ³¨é˜Ÿåˆ—**ï¼šåˆ¶ä½œé˜Ÿåˆ—ç•Œé¢ä¸“æ³¨äºæ˜¾ç¤ºé˜Ÿåˆ—çŠ¶æ€ï¼Œåˆ¶ä½œæŒ‰é’®åœ¨ç‰©å“è¯¦æƒ…é¡µ

**ç§»åŠ¨ç«¯å±•ç¤ºæ–¹æ¡ˆï¼š**

**æ–¹æ¡ˆ 1ï¼šæµ®åŠ¨æ°”æ³¡å¼è®¾è®¡ï¼ˆæ¨èï¼‰**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸»ç•Œé¢å†…å®¹                      â”‚
â”‚                                â”‚
â”‚                    [ğŸ”§3] â† æµ®åŠ¨ â”‚
â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æµ®åŠ¨æ°”æ³¡ç‰¹ç‚¹ï¼š**
- **ç©ºé—´æ•ˆç‡**ï¼šå¹³æ—¶åªå ç”¨å¾ˆå°ç©ºé—´ï¼Œä¸é®æŒ¡ä¸»è¦å†…å®¹
- **å¿«é€Ÿé¢„è§ˆ**ï¼šæ˜¾ç¤ºé˜Ÿåˆ—æ•°é‡ï¼Œç”¨æˆ·å¯å¿«é€Ÿäº†è§£çŠ¶æ€
- **æŒ‰éœ€å±•å¼€**ï¼šç‚¹å‡»æ°”æ³¡å±•å¼€è¯¦ç»†é˜Ÿåˆ—ç•Œé¢
- **æ™ºèƒ½æ˜¾ç¤º**ï¼šé˜Ÿåˆ—ä¸ºç©ºæ—¶è‡ªåŠ¨éšè—æ°”æ³¡
- **å¯æ‹–æ‹½**ï¼šæ”¯æŒæ‹–æ‹½è°ƒæ•´ä½ç½®ï¼Œé¿å…é®æŒ¡é‡è¦å†…å®¹

**å±•å¼€åçš„è¯¦ç»†ç•Œé¢ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”§ åˆ¶ä½œé˜Ÿåˆ— (3/10)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å›¾æ ‡+ç¯å½¢è¿›åº¦] [å›¾æ ‡+ç¯å½¢è¿›åº¦] â”‚
â”‚  [å›¾æ ‡+ç¯å½¢è¿›åº¦] [å›¾æ ‡+ç¯å½¢è¿›åº¦] â”‚
â”‚  [å›¾æ ‡+ç¯å½¢è¿›åº¦] [å›¾æ ‡+ç¯å½¢è¿›åº¦] â”‚
â”‚  ...ï¼ˆç½‘æ ¼æ’åˆ—ï¼Œæœ€å¤šæ˜¾ç¤º10ä¸ªï¼‰   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¨èæ–¹æ¡ˆç‰¹ç‚¹ï¼š**
- **æµ®åŠ¨æ°”æ³¡**ï¼šç©ºé—´æ•ˆç‡æœ€é«˜ï¼Œç”¨æˆ·ä½“éªŒæœ€ä½³
- **æ™ºèƒ½æ˜¾ç¤º**ï¼šé˜Ÿåˆ—ä¸ºç©ºæ—¶éšè—ï¼Œæœ‰ä»»åŠ¡æ—¶æ˜¾ç¤º
- **å¿«é€Ÿè®¿é—®**ï¼šç‚¹å‡»å³å¯æŸ¥çœ‹è¯¦ç»†é˜Ÿåˆ—
- **å¯æ‹–æ‹½**ï¼šæ”¯æŒæ‰‹åŠ¿æ‹–æ‹½è°ƒæ•´ä½ç½®
- **ç»“åˆå±•å¼€**ï¼šç‚¹å‡»æ°”æ³¡å±•å¼€è¯¦ç»†é˜Ÿåˆ—ç•Œé¢

#### 2.5.2 é˜Ÿåˆ—åŠŸèƒ½è§„èŒƒ

- **å®¹é‡é™åˆ¶**ï¼šæœ€å¤š 10 ä¸ªä»»åŠ¡å¹¶å‘
- **è¿›åº¦æ˜¾ç¤º**ï¼šç¯å½¢è¿›åº¦æ¡æ˜¾ç¤ºåˆ¶ä½œè¿›åº¦ç™¾åˆ†æ¯”
- **çŠ¶æ€æ ‡è¯†**ï¼šåˆ¶ä½œä¸­ã€ç­‰å¾…ä¸­ã€ææ–™ä¸è¶³ç­‰çŠ¶æ€ï¼ˆé€šè¿‡è¿›åº¦æ¡é¢œè‰²åŒºåˆ†ï¼‰
- **å–æ¶ˆåŠŸèƒ½**ï¼šç‚¹å‡»å›¾æ ‡å³å¯å–æ¶ˆå¯¹åº”åˆ¶ä½œä»»åŠ¡
- **è‡ªåŠ¨æ’é˜Ÿ**ï¼šæ‰‹åŠ¨æ“ä½œè‡ªåŠ¨æ·»åŠ åˆ°é˜Ÿåˆ—æœ«å°¾
- **ç½‘æ ¼å¸ƒå±€**ï¼šå¤šä¸ªä»»åŠ¡ä»¥ç½‘æ ¼å½¢å¼æ’åˆ—ï¼ŒèŠ‚çœå±å¹•ç©ºé—´

### 2.6 åŸºäº Factorio çš„æ‰‹åŠ¨ç”Ÿäº§é˜Ÿåˆ—ç³»ç»Ÿ

#### 2.6.1 æ‰‹åŠ¨ç”Ÿäº§é˜Ÿåˆ—æœºåˆ¶

åŸºäº[Factorio Wiki](https://wiki.factorio.com/Crafting#Manual_crafting)çš„å®˜æ–¹æ–‡æ¡£ï¼Œæ‰‹åŠ¨ç”Ÿäº§é˜Ÿåˆ—æ˜¯ç©å®¶é€šè¿‡æ‰‹åŠ¨æ“ä½œæ¥å®‰æ’ç‰©å“ç”Ÿäº§ä»»åŠ¡çš„æ ¸å¿ƒç³»ç»Ÿã€‚

**ç§»åŠ¨ç«¯é˜Ÿåˆ—æ“ä½œæ–¹å¼ï¼š**

- **åˆ¶ä½œ 1 ä¸ªæŒ‰é’®**ï¼šç‚¹å‡»åé˜Ÿåˆ—ä¸­æ·»åŠ  1 ä¸ªåˆ¶ä½œä»»åŠ¡
- **åˆ¶ä½œ 5 ä¸ªæŒ‰é’®**ï¼šç‚¹å‡»åé˜Ÿåˆ—ä¸­æ·»åŠ  5 ä¸ªåˆ¶ä½œä»»åŠ¡
- **æœ€å¤šåˆ¶é€ æŒ‰é’®**ï¼šç‚¹å‡»åæ ¹æ®å½“å‰ææ–™æ•°é‡ï¼Œé˜Ÿåˆ—ä¸­æ·»åŠ æœ€å¤§å¯åˆ¶ä½œæ•°é‡çš„ä»»åŠ¡

**é˜Ÿåˆ—æ˜¾ç¤ºä½ç½®ï¼š**

- é˜Ÿåˆ—æ˜¾ç¤ºåœ¨å±å¹•å·¦ä¸‹è§’
- æ˜¾ç¤ºå½“å‰æ­£åœ¨è¿›è¡Œçš„åˆ¶ä½œæ“ä½œ
- å¯ä»¥åŒæ—¶æ˜¾ç¤ºå¤šä¸ªåˆ¶ä½œä»»åŠ¡

#### 2.6.2 ææ–™é¢„æ‰£æœºåˆ¶

```typescript
interface ManualCraftingQueue {
  // ææ–™é¢„æ‰£
  preemptivelyConsumeMaterials(recipe: Recipe, quantity: number): boolean {
    const requiredMaterials = this.calculateRequiredMaterials(recipe, quantity);

    // æ£€æŸ¥åº“å­˜æ˜¯å¦è¶³å¤Ÿ
    if (!this.hasEnoughMaterials(requiredMaterials)) {
      return false;
    }

    // é¢„æ‰£ææ–™
    this.consumeMaterials(requiredMaterials);
    return true;
  }

  // å–æ¶ˆæ—¶è¿”è¿˜ææ–™
  cancelCraftingAndReturnMaterials(taskId: string): void {
    const task = this.getTask(taskId);
    if (task) {
      // è¿”è¿˜å·²é¢„æ‰£çš„ææ–™
      this.returnMaterials(task.consumedMaterials);
      this.removeTask(taskId);
    }
  }
}
```

#### 2.6.3 é“¾å¼åˆ¶ä½œæ”¯æŒ

```typescript
class ChainCraftingManager {
  // æ£€æŸ¥ä¸­é—´äº§å“
  checkIntermediateProducts(recipe: Recipe): IntermediateProduct[] {
    return recipe.ingredients
      .filter((ingredient) => !this.hasEnough(ingredient))
      .map((ingredient) => ({
        itemId: ingredient.itemId,
        required: ingredient.quantity,
        available: this.getAvailable(ingredient.itemId),
        canCraft: this.canCraftItem(ingredient.itemId),
      }));
  }

  // è‡ªåŠ¨é“¾å¼åˆ¶ä½œ
  autoChainCraft(targetRecipe: Recipe, quantity: number): CraftingTask[] {
    const tasks: CraftingTask[] = [];
    const intermediateProducts = this.checkIntermediateProducts(targetRecipe);

    intermediateProducts.forEach((product) => {
      if (product.canCraft && product.available < product.required) {
        const needed = product.required - product.available;
        const craftingTask = this.createCraftingTask(product.itemId, needed);
        tasks.push(craftingTask);
      }
    });

    // æ·»åŠ ç›®æ ‡åˆ¶ä½œä»»åŠ¡
    tasks.push(this.createCraftingTask(targetRecipe.id, quantity));
    return tasks;
  }
}
```

#### 2.6.4 å–æ¶ˆæ“ä½œæœºåˆ¶

```typescript
class CraftingQueueController {
  // å–æ¶ˆå•ä¸ªåˆ¶ä½œ
  cancelOneCrafting(itemId: string): void {
    const item = this.findQueuedItem(itemId);
    if (item) {
      this.returnMaterials(item.consumedMaterials);
      this.removeFromQueue(item);
    }
  }

  // å–æ¶ˆ5ä¸ªåˆ¶ä½œ
  cancelFiveCrafting(itemId: string): void {
    const items = this.findQueuedItems(itemId, 5);
    items.forEach((item) => {
      this.returnMaterials(item.consumedMaterials);
      this.removeFromQueue(item);
    });
  }

  // å–æ¶ˆæ‰€æœ‰è¯¥ç‰©å“çš„åˆ¶ä½œ
  cancelAllCrafting(itemId: string): void {
    const allItems = this.findQueuedItems(itemId);
    allItems.forEach((item) => {
      this.returnMaterials(item.consumedMaterials);
      this.removeFromQueue(item);
    });
  }
}
```

#### 2.6.5 ç‰¹æ®Šé™åˆ¶å’Œè§„åˆ™

**æ— æ³•æ‰‹åŠ¨åˆ¶ä½œçš„ç‰©å“ï¼š**

```typescript
const MANUAL_CRAFTING_RESTRICTIONS = {
  // çŸ¿çŸ³åªèƒ½é€šè¿‡ç†”ç‚‰å†¶ç‚¼
  smeltingOnly: ["iron-ore", "copper-ore", "stone", "coal"],

  // éœ€è¦æ¶²ä½“çš„é…æ–¹
  requiresFluid: ["engine-unit", "electric-engine-unit", "flying-robot-frame"],

  // å¿…é¡»åœ¨ç»„è£…æœºä¸­åˆ¶ä½œ
  assemblyMachineOnly: ["engine-unit", "electric-engine-unit"],
};

class ManualCraftingValidator {
  canCraftManually(recipeId: string): boolean {
    const recipe = this.getRecipe(recipeId);

    // æ£€æŸ¥æ˜¯å¦åŒ…å«æ¶²ä½“
    if (recipe.ingredients.some((ing) => ing.type === "fluid")) {
      return false;
    }

    // æ£€æŸ¥æ˜¯å¦åœ¨é™åˆ¶åˆ—è¡¨ä¸­
    if (MANUAL_CRAFTING_RESTRICTIONS.assemblyMachineOnly.includes(recipe.id)) {
      return false;
    }

    return true;
  }
}
```

**åº“å­˜æ»¡æ—¶çš„å¤„ç†ï¼š**

```typescript
class InventoryCraftingManager {
  // æ£€æŸ¥åº“å­˜ç©ºé—´
  checkInventorySpace(recipe: Recipe, quantity: number): boolean {
    const outputItem = recipe.output;
    const totalOutput = outputItem.quantity * quantity;

    return this.hasEnoughInventorySpace(outputItem.itemId, totalOutput);
  }

  // åº“å­˜æ»¡æ—¶æš‚åœåˆ¶ä½œ
  handleInventoryFull(): void {
    if (this.isInventoryFull()) {
      this.pauseCrafting();
      this.showNotification("åº“å­˜å·²æ»¡ï¼Œåˆ¶ä½œå·²æš‚åœ");
    }
  }
}
```

#### 2.6.6 é“¾å¼åˆ¶ä½œä¼˜åŠ¿

```typescript
class ChainCraftingAdvantage {
  // è‡ªåŠ¨åˆ¶ä½œä¸­é—´äº§å“
  autoCraftIntermediates(targetRecipe: Recipe): void {
    const intermediates = this.getRequiredIntermediates(targetRecipe);

    intermediates.forEach((intermediate) => {
      if (!this.hasEnough(intermediate.itemId)) {
        // è‡ªåŠ¨æ·»åŠ åˆ°åˆ¶ä½œé˜Ÿåˆ—
        this.addToCraftingQueue(intermediate.itemId, intermediate.quantity);
      }
    });
  }

  // ä¸è‡ªåŠ¨åŒ–åˆ¶ä½œçš„åŒºåˆ«
  compareWithAutomation(): string {
    return `
      æ‰‹åŠ¨åˆ¶ä½œä¼˜åŠ¿ï¼š
      - è‡ªåŠ¨é“¾å¼åˆ¶ä½œä¸­é—´äº§å“
      - æ— éœ€ä¸ºæ¯ä¸ªä¸­é—´äº§å“è®¾ç½®å•ç‹¬çš„ç»„è£…æœº
      - æ›´çµæ´»çš„ææ–™ç®¡ç†
      
      è‡ªåŠ¨åŒ–åˆ¶ä½œé™åˆ¶ï¼š
      - æ¯ä¸ªåˆ¶ä½œæ­¥éª¤éœ€è¦å•ç‹¬çš„ç»„è£…æœº
      - éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¼ é€å¸¦å’Œæœºæ¢°è‡‚
      - æ— æ³•è‡ªåŠ¨é“¾å¼åˆ¶ä½œ
    `;
  }
}
```

#### 2.6.7 ç”¨æˆ·ç•Œé¢è®¾è®¡

```typescript
interface ManualCraftingQueueUI {
  // æ˜¾ç¤ºç®€åŒ–åˆ¶ä½œé˜Ÿåˆ—
  displayCraftingQueue(): JSX.Element {
    return (
      <View style={styles.craftingQueue}>
        <Text style={styles.queueTitle}>åˆ¶ä½œé˜Ÿåˆ— ({this.queue.length}/10)</Text>

        {/* ç®€åŒ–é˜Ÿåˆ—æ˜¾ç¤º - ç½‘æ ¼å¸ƒå±€ */}
        <View style={styles.queueGrid}>
          {this.queue.map(task => (
            <CraftingTaskIcon
              key={task.id}
              task={task}
              onCancel={() => this.craftingQueue.cancelTask(task.id)}
            />
          ))}
        </View>
      </View>
    );
  }
}

// åº•éƒ¨æŠ½å±‰å¼é¢æ¿ç»„ä»¶
interface BottomDrawerProps {
  isVisible: boolean;
  onClose: () => void;
  children: React.ReactNode;
}

const BottomDrawer: React.FC<BottomDrawerProps> = ({
  isVisible,
  onClose,
  children
}) => {
  return (
    <Modal
      visible={isVisible}
      transparent={true}
      animationType="slide"
      onRequestClose={onClose}
    >
      <View style={styles.drawerOverlay}>
        <TouchableOpacity
          style={styles.drawerBackdrop}
          onPress={onClose}
        />
        <View style={styles.drawerContent}>
          {/* æ‹–æ‹½æŒ‡ç¤ºå™¨ */}
          <View style={styles.dragIndicator} />
          {children}
        </View>
      </View>
    </Modal>
  );
};

// æµ®åŠ¨æ°”æ³¡ç»„ä»¶ï¼ˆä¸»è¦æ¨èæ–¹æ¡ˆï¼‰
interface FloatingBubbleProps {
  queueCount: number;
  onPress: () => void;
  position?: { x: number; y: number };
  onPositionChange?: (position: { x: number; y: number }) => void;
}

const FloatingBubble: React.FC<FloatingBubbleProps> = ({ 
  queueCount, 
  onPress,
  position = { x: 20, y: 100 },
  onPositionChange
}) => {
  const [bubblePosition, setBubblePosition] = useState(position);
  
  // é˜Ÿåˆ—ä¸ºç©ºæ—¶éšè—æ°”æ³¡
  if (queueCount === 0) return null;
  
  const handlePanGesture = (event: any) => {
    const newPosition = {
      x: event.nativeEvent.pageX - 30, // 30æ˜¯æ°”æ³¡åŠå¾„
      y: event.nativeEvent.pageY - 30
    };
    setBubblePosition(newPosition);
    onPositionChange?.(newPosition);
  };
  
  return (
    <PanGestureHandler onGestureEvent={handlePanGesture}>
      <Animated.View style={[styles.floatingBubble, bubblePosition]}>
        <TouchableOpacity onPress={onPress}>
          <Text style={styles.bubbleText}>ğŸ”§{queueCount}</Text>
        </TouchableOpacity>
      </Animated.View>
    </PanGestureHandler>
  );
};

// æµ®åŠ¨æ°”æ³¡æ ·å¼
const styles = StyleSheet.create({
  floatingBubble: {
    position: 'absolute',
    width: 60,
    height: 60,
    borderRadius: 30,
    backgroundColor: 'rgba(34, 197, 94, 0.9)', // ç»¿è‰²åŠé€æ˜
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.25,
    shadowRadius: 4,
    elevation: 5,
    zIndex: 1000,
  },
  bubbleText: {
    color: 'white',
    fontSize: 16,
    fontWeight: 'bold',
  },
});
```

// ç¯å½¢è¿›åº¦æ¡ç»„ä»¶
interface CraftingTaskIcon {
task: CraftingTask;
onCancel: () => void;
}

const CraftingTaskIcon: React.FC<CraftingTaskIcon> = ({ task, onCancel }) => {
const progress = task.progress / task.totalTime;

return (
<TouchableOpacity style={styles.taskIcon} onPress={onCancel}>
{/_ ç‰©å“å›¾æ ‡ _/}
<Image source={getItemIcon(task.itemId)} style={styles.itemIcon} />

      {/* ç¯å½¢è¿›åº¦æ¡è¦†ç›– */}
      <View style={styles.progressOverlay}>
        <CircularProgress
          progress={progress}
          size={60}
          strokeWidth={4}
          strokeColor={getProgressColor(task.status)}
          backgroundColor="rgba(255,255,255,0.3)"
        />
      </View>

      {/* è¿›åº¦ç™¾åˆ†æ¯” */}
      <Text style={styles.progressText}>
        {Math.round(progress * 100)}%
      </Text>
    </TouchableOpacity>

);
};

// è¿›åº¦æ¡é¢œè‰²æ˜ å°„
const getProgressColor = (status: string): string => {
switch (status) {
case 'in_progress': return '#22C55E'; // ç»¿è‰² - åˆ¶ä½œä¸­
case 'waiting': return '#F59E0B'; // æ©™è‰² - ç­‰å¾…ä¸­
case 'blocked': return '#EF4444'; // çº¢è‰² - ææ–™ä¸è¶³
default: return '#6B7280'; // ç°è‰² - é»˜è®¤
}
};

````

**ç®€åŒ–è®¾è®¡è§„èŒƒï¼š**

- **å›¾æ ‡å°ºå¯¸**ï¼š60x60pxï¼Œé€‚åˆæ‰‹æŒ‡ç‚¹å‡»
- **ç¯å½¢è¿›åº¦**ï¼š4px å®½åº¦ï¼ŒåŠé€æ˜èƒŒæ™¯
- **ç½‘æ ¼å¸ƒå±€**ï¼š3 åˆ—ç½‘æ ¼ï¼Œè‡ªé€‚åº”å±å¹•å®½åº¦
- **ç‚¹å‡»åé¦ˆ**ï¼šç‚¹å‡»æ—¶æœ‰ç¼©æ”¾åŠ¨ç”»æ•ˆæœ
- **è¿›åº¦é¢œè‰²**ï¼šä¸åŒçŠ¶æ€ä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ†

### 2.7 åŸºäº Factorio çš„ç§‘æŠ€ç³»ç»Ÿ

#### 2.7.1 ç§‘æŠ€åŒ…ç³»ç»Ÿ

```typescript
// åŸºäºFactorio 1.1.107çš„ç§‘æŠ€åŒ…ç³»ç»Ÿ
interface SciencePack {
  id: string;
  name: string;
  color: string;
  complexity: number; // åˆ¶ä½œå¤æ‚åº¦
  time: number; // åˆ¶ä½œæ—¶é—´
  cost: { [itemId: string]: number };
}

const sciencePacks: { [id: string]: SciencePack } = {
  "automation-science-pack": {
    id: "automation-science-pack",
    name: "è‡ªåŠ¨åŒ–ç§‘æŠ€åŒ…",
    color: "#EF4444",
    complexity: 1,
    time: 5,
    cost: { "copper-plate": 1, "iron-gear-wheel": 1 },
  },

  "logistic-science-pack": {
    id: "logistic-science-pack",
    name: "ç‰©æµç§‘æŠ€åŒ…",
    color: "#22C55E",
    complexity: 2,
    time: 6,
    cost: { "transport-belt": 1, inserter: 1 },
  },

  "military-science-pack": {
    id: "military-science-pack",
    name: "å†›äº‹ç§‘æŠ€åŒ…",
    color: "#8B5CF6",
    complexity: 3,
    time: 10,
    cost: { "piercing-rounds-magazine": 1, grenade: 1, wall: 2 },
  },

  "chemical-science-pack": {
    id: "chemical-science-pack",
    name: "åŒ–å­¦ç§‘æŠ€åŒ…",
    color: "#06B6D4",
    complexity: 4,
    time: 24,
    cost: { sulfur: 1, "advanced-circuit": 3, "engine-unit": 2 },
  },

  "production-science-pack": {
    id: "production-science-pack",
    name: "ç”Ÿäº§ç§‘æŠ€åŒ…",
    color: "#F59E0B",
    complexity: 5,
    time: 21,
    cost: { "electric-furnace": 1, "productivity-module": 1 },
  },

  "utility-science-pack": {
    id: "utility-science-pack",
    name: "å®ç”¨ç§‘æŠ€åŒ…",
    color: "#10B981",
    complexity: 6,
    time: 21,
    cost: {
      "flying-robot-frame": 1,
      "low-density-structure": 3,
      "processing-unit": 2,
    },
  },

  "space-science-pack": {
    id: "space-science-pack",
    name: "å¤ªç©ºç§‘æŠ€åŒ…",
    color: "#6366F1",
    complexity: 7,
    time: 2000,
    cost: { satellite: 1 }, // éœ€è¦å‘å°„ç«ç®­
  },
};
````

#### 2.7.2 ç§‘æŠ€æ•°æ®ç»“æ„

```typescript
// åŸºäºFactorioçš„ç§‘æŠ€ç»“æ„
interface Technology {
  id: string;
  name: string;
  category: "technology";
  row: number;
  time: number;
  count: number; // ç ”ç©¶æ‰€éœ€ç§‘æŠ€åŒ…æ•°é‡
  producers: ["lab"]; // åªèƒ½ç”±å®éªŒå®¤ç ”ç©¶
  in: { [sciencePackId: string]: number }; // ç§‘æŠ€åŒ…éœ€æ±‚
  out: { [techId: string]: number };
  isTechnology: true;
  prerequisites?: string[]; // å‰ç½®ç§‘æŠ€
  icon?: string; // å›¾æ ‡
  iconText?: string; // ç­‰çº§æ–‡æœ¬
}

// ç¤ºä¾‹ç§‘æŠ€æ•°æ®
const technologyExamples: Technology[] = [
  {
    id: "automation",
    name: "Automation",
    category: "technology",
    row: 0,
    time: 15,
    count: 10,
    producers: ["lab"],
    in: { "automation-science-pack": 1 },
    out: { automation: 1 },
    isTechnology: true,
  },

  {
    id: "steel-processing",
    name: "Steel processing",
    category: "technology",
    row: 2,
    time: 5,
    count: 50,
    producers: ["lab"],
    in: { "automation-science-pack": 1 },
    out: { "steel-processing": 1 },
    isTechnology: true,
  },

  {
    id: "logistics-3",
    name: "Logistics 3",
    category: "technology",
    row: 4,
    time: 30,
    count: 200,
    producers: ["lab"],
    in: {
      "automation-science-pack": 1,
      "logistic-science-pack": 1,
      "chemical-science-pack": 1,
    },
    out: { "logistics-3": 1 },
    isTechnology: true,
    prerequisites: ["logistics-2"],
  },
];
```

#### 2.7.3 ç§‘æŠ€æ ‘ç®¡ç†

```typescript
// ç§‘æŠ€ç ”ç©¶è¿›åº¦ç®¡ç†
interface ResearchProgress {
  techId: string;
  unlocked: boolean; // æ˜¯å¦å·²è§£é”
  researched: boolean; // æ˜¯å¦å·²ç ”ç©¶å®Œæˆ
  progress: number; // ç ”ç©¶è¿›åº¦ (0-1)
  currentSciencePacks: { [packId: string]: number }; // å½“å‰æŠ•å…¥çš„ç§‘æŠ€åŒ…
  estimatedTime: number; // é¢„è®¡å®Œæˆæ—¶é—´
  isResearching: boolean; // æ˜¯å¦æ­£åœ¨ç ”ç©¶ä¸­
}

// ç§‘æŠ€è§£é”ç³»ç»Ÿ
interface TechnologyUnlockSystem {
  unlockedTechnologies: string[]; // å·²è§£é”çš„ç§‘æŠ€
  researchedTechnologies: string[]; // å·²ç ”ç©¶çš„ç§‘æŠ€
  availableRecipes: string[]; // å¯ç”¨çš„é…æ–¹
  researchQueue: string[]; // ç ”ç©¶é˜Ÿåˆ—
  currentResearch?: ResearchProgress; // å½“å‰ç ”ç©¶é¡¹ç›®
}
```

### 2.8 åº“å­˜æ›´æ–°ç³»ç»Ÿ

#### 2.8.1 åº“å­˜ç²¾åº¦é—®é¢˜è§£å†³æ–¹æ¡ˆ

åœ¨å·¥å‚æ¸¸æˆä¸­ï¼Œåº“å­˜å¿…é¡»æ˜¯æ•´æ•°ï¼Œä½†ç”Ÿäº§é€Ÿç‡å¾€å¾€ä¸æ˜¯æ•´æ•°ï¼ˆå¦‚ 1.5 ç§’ç”Ÿäº§ 2 ä¸ªç‰©å“ï¼Œæ¯ç§’äº§é‡ä¸º 1.33 ä¸ªï¼‰ã€‚é‡‡ç”¨**ç´¯ç§¯å°æ•°æ–¹æ¡ˆ**å¤„ç†æ­¤é—®é¢˜ã€‚

```typescript
// ç”Ÿäº§ç´¯ç§¯å™¨ - å¤„ç†å°æ•°äº§é‡é—®é¢˜
interface ProductionAccumulator {
  itemId: string; // ç‰©å“ID
  accumulatedAmount: number; // ç´¯ç§¯çš„å°æ•°éƒ¨åˆ†
  lastUpdateTime: number; // ä¸Šæ¬¡æ›´æ–°æ—¶é—´
  productionRate: number; // æ¯ç§’äº§é‡
  recipeTime: number; // é…æ–¹æ—¶é—´
  outputAmount: number; // é…æ–¹è¾“å‡ºæ•°é‡
}

// åº“å­˜ç®¡ç†å™¨
class InventoryManager {
  // æ›´æ–°ç”Ÿäº§ç´¯ç§¯å™¨
  updateProductionAccumulator(
    accumulator: ProductionAccumulator,
    currentTime: number
  ): { inventoryChange: number; displayRate: number } {
    const timeDiff = currentTime - accumulator.lastUpdateTime;
    const theoreticalProduction = accumulator.productionRate * timeDiff;

    // ç´¯ç§¯å°æ•°éƒ¨åˆ†
    accumulator.accumulatedAmount += theoreticalProduction;

    // è®¡ç®—æ•´æ•°éƒ¨åˆ†
    const integerPart = Math.floor(accumulator.accumulatedAmount);
    const fractionalPart = accumulator.accumulatedAmount - integerPart;

    // æ›´æ–°ç´¯ç§¯å€¼
    accumulator.accumulatedAmount = fractionalPart;
    accumulator.lastUpdateTime = currentTime;

    return {
      inventoryChange: integerPart,
      displayRate: accumulator.productionRate,
    };
  }

  // è®¡ç®—ç”Ÿäº§é€Ÿç‡
  calculateProductionRate(
    recipe: Recipe,
    equipment: EquipmentInstance
  ): number {
    const baseRate = recipe.out[recipe.id] / recipe.time; // åŸºç¡€é€Ÿç‡
    const efficiency = equipment.efficiency || 1.0;
    const workingFactor = equipment.working ? 1.0 : 0.0;

    return baseRate * efficiency * workingFactor;
  }
}
```

#### 2.8.2 å¤šè®¾å¤‡ç”Ÿäº§å¤„ç†

```typescript
// å¤„ç†å¤šä¸ªè®¾å¤‡ç”Ÿäº§åŒä¸€ç‰©å“
class MultiEquipmentProduction {
  private accumulators: Map<string, ProductionAccumulator> = new Map();

  // æ›´æ–°æ‰€æœ‰è®¾å¤‡çš„ç”Ÿäº§
  updateAllEquipment(currentTime: number): Map<string, number> {
    const inventoryChanges = new Map<string, number>();

    for (const [itemId, accumulator] of this.accumulators) {
      const result = this.updateProductionAccumulator(accumulator, currentTime);

      if (result.inventoryChange > 0) {
        const currentChange = inventoryChanges.get(itemId) || 0;
        inventoryChanges.set(itemId, currentChange + result.inventoryChange);
      }
    }

    return inventoryChanges;
  }

  // æ·»åŠ ç”Ÿäº§è®¾å¤‡
  addProductionEquipment(
    itemId: string,
    recipe: Recipe,
    equipment: EquipmentInstance
  ) {
    const existing = this.accumulators.get(itemId);
    const newRate = this.calculateProductionRate(recipe, equipment);

    if (existing) {
      // åˆå¹¶ç”Ÿäº§é€Ÿç‡
      existing.productionRate += newRate;
    } else {
      // åˆ›å»ºæ–°çš„ç´¯ç§¯å™¨
      this.accumulators.set(itemId, {
        itemId,
        accumulatedAmount: 0,
        lastUpdateTime: Date.now(),
        productionRate: newRate,
        recipeTime: recipe.time,
        outputAmount: Object.values(recipe.out)[0],
      });
    }
  }
}
```

#### 2.7.3 æ˜¾ç¤ºå¤„ç†æ–¹æ¡ˆ

```typescript
// æ˜¾ç¤ºé€»è¾‘ - å¤„ç†éæ•´æ•°äº§é‡
class DisplayManager {
  // æ ¼å¼åŒ–äº§é‡æ˜¾ç¤º
  formatProductionRate(rate: number): string {
    if (Number.isInteger(rate)) {
      return `${rate}/ç§’`;
    } else {
      // æ˜¾ç¤ºä¸ºåˆ†æ•°å½¢å¼
      const [numerator, denominator] = this.simplifyFraction(rate);
      return `${numerator}/${denominator}ç§’`;
    }
  }

  // ç®€åŒ–åˆ†æ•°
  simplifyFraction(decimal: number): [number, number] {
    // ç¤ºä¾‹ï¼š1.33 -> 4/3
    const tolerance = 0.001;
    let denominator = 1;

    while (
      Math.abs(decimal * denominator - Math.round(decimal * denominator)) >
      tolerance
    ) {
      denominator++;
    }

    return [Math.round(decimal * denominator), denominator];
  }

  // æ˜¾ç¤ºç¤ºä¾‹
  displayProductionInfo(accumulator: ProductionAccumulator) {
    const rate = accumulator.productionRate;
    const displayRate = this.formatProductionRate(rate);

    console.log(`äº§é‡: ${displayRate}`); // æ˜¾ç¤º: "äº§é‡: 4/3ç§’"
    console.log(`ç´¯ç§¯: ${accumulator.accumulatedAmount.toFixed(3)}`); // æ˜¾ç¤ºç´¯ç§¯çš„å°æ•°éƒ¨åˆ†
  }
}
```

#### 2.7.4 æ€§èƒ½ä¼˜åŒ–å®ç°

```typescript
// ä¼˜åŒ–ç‰ˆæœ¬ - æ‰¹é‡æ›´æ–°
class OptimizedInventoryManager {
  private updateInterval = 100; // 100msæ›´æ–°ä¸€æ¬¡
  private lastBatchUpdate = 0;

  // æ‰¹é‡æ›´æ–°æ‰€æœ‰ç”Ÿäº§
  batchUpdate(currentTime: number) {
    if (currentTime - this.lastBatchUpdate < this.updateInterval) {
      return; // è·³è¿‡æ›´æ–°
    }

    // æ‰§è¡Œæ‰¹é‡æ›´æ–°
    this.updateAllProduction(currentTime);
    this.lastBatchUpdate = currentTime;
  }

  // ä½¿ç”¨å¯¹è±¡æ± å‡å°‘å†…å­˜åˆ†é…
  private accumulatorPool: ProductionAccumulator[] = [];

  getAccumulator(): ProductionAccumulator {
    return this.accumulatorPool.pop() || this.createNewAccumulator();
  }

  recycleAccumulator(accumulator: ProductionAccumulator) {
    this.accumulatorPool.push(accumulator);
  }
}
```

#### 2.7.5 å®é™…åº”ç”¨ç¤ºä¾‹

```typescript
// æ¸¸æˆä¸»å¾ªç¯ä¸­çš„ä½¿ç”¨
class GameLoop {
  private inventoryManager = new InventoryManager();
  private lastUpdateTime = Date.now();

  update() {
    const currentTime = Date.now();
    const deltaTime = currentTime - this.lastUpdateTime;

    // æ›´æ–°æ‰€æœ‰ç”Ÿäº§è®¾å¤‡
    const inventoryChanges =
      this.inventoryManager.updateAllProduction(currentTime);

    // åº”ç”¨åº“å­˜å˜åŒ–
    for (const [itemId, change] of inventoryChanges) {
      this.gameState.resources[itemId] += change;
    }

    this.lastUpdateTime = currentTime;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const game = new GameLoop();

// æ·»åŠ é“æ¿ç”Ÿäº§ (1.5ç§’ç”Ÿäº§2ä¸ª)
game.inventoryManager.addProduction(
  "iron-plate",
  {
    time: 1.5,
    out: { "iron-plate": 2 },
  },
  equipment
);

// æ¸¸æˆå¾ªç¯ä¸­è‡ªåŠ¨å¤„ç†å°æ•°ç´¯ç§¯
setInterval(() => game.update(), 100); // 100msæ›´æ–°ä¸€æ¬¡
```

**ä¼˜åŠ¿æ€»ç»“ï¼š**

- âœ… **ç²¾ç¡®æ€§**ï¼šä¿æŒåº“å­˜ä¸ºæ•´æ•°ï¼ŒåŒæ—¶å‡†ç¡®åæ˜ ç”Ÿäº§è¿›åº¦
- âœ… **æ€§èƒ½**ï¼šæ‰¹é‡æ›´æ–°ï¼Œå‡å°‘è®¡ç®—å¼€é”€
- âœ… **æ˜¾ç¤º**ï¼šæ”¯æŒéæ•´æ•°äº§é‡çš„å‹å¥½æ˜¾ç¤º
- âœ… **æ‰©å±•æ€§**ï¼šæ”¯æŒå¤šè®¾å¤‡ã€å¤šé…æ–¹ã€å¤šç‰©å“
- âœ… **å…¼å®¹æ€§**ï¼šä¸ Factorio åŸç‰ˆé€»è¾‘ä¸€è‡´

### 2.9 æœ¬åœ°å­˜å‚¨ç³»ç»Ÿ

#### 2.9.1 å­˜å‚¨æ¶æ„è®¾è®¡

```
æœ¬åœ°å­˜å‚¨æ¶æ„ï¼š
â”œâ”€â”€ ä¸»å­˜å‚¨ï¼šSQLiteæ•°æ®åº“
â”‚   â”œâ”€â”€ game_stateè¡¨ï¼šæ¸¸æˆæ ¸å¿ƒçŠ¶æ€
â”‚   â”œâ”€â”€ save_slotsè¡¨ï¼šå¤šå­˜æ¡£æ”¯æŒ
â”‚   â””â”€â”€ user_settingsè¡¨ï¼šç”¨æˆ·é…ç½®
â”‚
â”œâ”€â”€ é…ç½®å­˜å‚¨ï¼šSharedPreferences/AsyncStorage
â”‚   â”œâ”€â”€ ç•Œé¢è®¾ç½®
â”‚   â”œâ”€â”€ æ¸¸æˆåå¥½
â”‚   â””â”€â”€ æœ€åé€‰æ‹©çš„å­˜æ¡£
â”‚
â””â”€â”€ ç¼“å­˜å­˜å‚¨ï¼šå†…å­˜ç¼“å­˜
    â”œâ”€â”€ å½“å‰æ¸¸æˆçŠ¶æ€
    â”œâ”€â”€ è®¡ç®—ç»“æœç¼“å­˜
    â””â”€â”€ ç•Œé¢çŠ¶æ€ç¼“å­˜
```

#### 2.9.2 æ•°æ®æŒä¹…åŒ–ç­–ç•¥

```
è‡ªåŠ¨ä¿å­˜æœºåˆ¶ï¼š
â”œâ”€â”€ é¢‘ç‡æ§åˆ¶ï¼šæ¯30ç§’è‡ªåŠ¨ä¿å­˜
â”œâ”€â”€ äº‹ä»¶è§¦å‘ï¼šé‡è¦æ“ä½œåç«‹å³ä¿å­˜
â”œâ”€â”€ åº”ç”¨ç”Ÿå‘½å‘¨æœŸï¼š
â”‚   â”œâ”€â”€ è¿›å…¥åå°ï¼šç«‹å³ä¿å­˜
â”‚   â”œâ”€â”€ åº”ç”¨é€€å‡ºï¼šå¼ºåˆ¶ä¿å­˜
â”‚   â””â”€â”€ å´©æºƒæ¢å¤ï¼šå®šæœŸå¤‡ä»½
â””â”€â”€ æ•°æ®å®Œæ•´æ€§ï¼š
    â”œâ”€â”€ ä¿å­˜å‰éªŒè¯æ•°æ®æœ‰æ•ˆæ€§
    â”œâ”€â”€ ä¿å­˜åæ ¡éªŒæ•°æ®å®Œæ•´æ€§
    â””â”€â”€ æŸåæ—¶è‡ªåŠ¨æ¢å¤æœºåˆ¶
```

#### 2.9.3 å¤šå­˜æ¡£ç³»ç»Ÿ

```
å­˜æ¡£ç®¡ç†åŠŸèƒ½ï¼š
â”œâ”€â”€ å­˜æ¡£æ§½ä½ï¼šæ”¯æŒæœ€å¤š5ä¸ªå­˜æ¡£
â”œâ”€â”€ å­˜æ¡£ä¿¡æ¯ï¼š
â”‚   â”œâ”€â”€ å­˜æ¡£åç§°ï¼ˆç”¨æˆ·è‡ªå®šä¹‰ï¼‰
â”‚   â”œâ”€â”€ æ¸¸æˆè¿›åº¦ï¼ˆç­‰çº§ã€æ—¶é—´ï¼‰
â”‚   â”œâ”€â”€ åˆ›å»ºæ—¶é—´å’Œæœ€åä¿®æ”¹æ—¶é—´
â”‚   â””â”€â”€ å­˜æ¡£é¢„è§ˆå›¾ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ å­˜æ¡£æ“ä½œï¼š
â”‚   â”œâ”€â”€ åˆ›å»ºæ–°å­˜æ¡£
â”‚   â”œâ”€â”€ åŠ è½½æŒ‡å®šå­˜æ¡£
â”‚   â”œâ”€â”€ åˆ é™¤å­˜æ¡£
â”‚   â”œâ”€â”€ é‡å‘½åå­˜æ¡£
â”‚   â””â”€â”€ å¯¼å‡º/å¯¼å…¥å­˜æ¡£æ–‡ä»¶
â””â”€â”€ å­˜æ¡£ä¿æŠ¤ï¼š
    â”œâ”€â”€ åˆ é™¤å‰äºŒæ¬¡ç¡®è®¤
    â”œâ”€â”€ é‡è¦å­˜æ¡£é”å®šä¿æŠ¤
    â””â”€â”€ æ„å¤–åˆ é™¤æ¢å¤æœºåˆ¶
```

## 3. ç”¨æˆ·ç•Œé¢è®¾è®¡è§„èŒƒ

### 3.1 æ•´ä½“è§†è§‰ç³»ç»Ÿ

#### 3.1.1 ä¸»ç•Œé¢å¸ƒå±€

```
ä¸»ç•Œé¢ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† çŠ¶æ€æ  (64px)
â”‚ å¼‚æ˜Ÿå·¥å‚  12:34  ğŸ’°100 ğŸ’10 [â¸ï¸] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† åˆ¶ä½œé˜Ÿåˆ— (æ¡ä»¶æ˜¾ç¤º)
â”‚ ğŸ”§ åˆ¶ä½œé˜Ÿåˆ— (2/10) [å±•å¼€/æ”¶èµ·]   â”‚
â”‚ [é˜Ÿåˆ—ä»»åŠ¡åˆ—è¡¨...]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† åˆ†ç±»æ ‡ç­¾ (48px)
â”‚ [åŸææ–™][ä¸­é—´äº§å“][ç§‘å­¦åŒ…]...   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† ä¸»è¦å†…å®¹åŒºåŸŸ
â”‚                                 â”‚
â”‚        4Ã—N ç‰©å“ç½‘æ ¼             â”‚
â”‚                                 â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.2 å“åº”å¼è®¾è®¡è§„èŒƒ

```
å±å¹•é€‚é…è§„èŒƒï¼š
â”œâ”€â”€ æœ€å°å®½åº¦ï¼š320px (iPhone SE)
â”œâ”€â”€ æœ€å¤§å®½åº¦ï¼š480px (å¤§å±æ‰‹æœº)
â”œâ”€â”€ å®‰å…¨åŒºåŸŸï¼šé€‚é…åˆ˜æµ·å±å’Œåœ†è§’
â”œâ”€â”€ è§¦æ‘¸ç›®æ ‡ï¼šæœ€å°44Ã—44px
â””â”€â”€ å­—ä½“ç¼©æ”¾ï¼šæ”¯æŒç³»ç»Ÿå­—ä½“å¤§å°è®¾ç½®
```

### 3.2 è‰²å½©è®¾è®¡ç³»ç»Ÿ

#### 3.2.1 åŸºäº Factorio çš„ä¸»è‰²è°ƒå®šä¹‰

```
é¢œè‰²è§„èŒƒï¼š
â”œâ”€â”€ ä¸»è‰²è°ƒï¼š
â”‚   â”œâ”€â”€ ä¸»è‰²ï¼š#2563EB (è“è‰²) - ä¸»è¦æŒ‰é’®ã€é“¾æ¥
â”‚   â”œâ”€â”€ æˆåŠŸï¼š#10B981 (ç»¿è‰²) - æˆåŠŸçŠ¶æ€ã€è¿è¡Œä¸­
â”‚   â”œâ”€â”€ è­¦å‘Šï¼š#F59E0B (æ©™è‰²) - è­¦å‘ŠçŠ¶æ€ã€ç‡ƒæ–™ç›¸å…³
â”‚   â”œâ”€â”€ é”™è¯¯ï¼š#EF4444 (çº¢è‰²) - é”™è¯¯çŠ¶æ€ã€åœæ­¢çŠ¶æ€
â”‚   â””â”€â”€ ä¸­æ€§ï¼š#6B7280 (ç°è‰²) - æ–‡æœ¬ã€è¾¹æ¡†
â”‚
â”œâ”€â”€ åŸºäºFactorioçš„åˆ†ç±»è‰²å½©ï¼š
â”‚   â”œâ”€â”€ ç‰©æµç³»ç»Ÿ (Logistics)ï¼š#22C55E (ç»¿è‰²ç³») - ä¼ é€å¸¦ã€æœºæ¢°è‡‚ã€ç®±å­
â”‚   â”œâ”€â”€ ç”Ÿäº§ç³»ç»Ÿ (Production)ï¼š#EAB308 (é»„è‰²ç³») - ç†”ç‚‰ã€è£…é…æœºã€é‡‡æ˜æœº
â”‚   â”œâ”€â”€ ä¸­é—´äº§å“ (Intermediate)ï¼š#3B82F6 (è“è‰²ç³») - é“æ¿ã€é“œæ¿ã€ç”µè·¯æ¿
â”‚   â”œâ”€â”€ æˆ˜æ–—ç³»ç»Ÿ (Combat)ï¼š#EF4444 (çº¢è‰²ç³») - æ­¦å™¨ã€å¼¹è¯ã€æŠ¤ç”²
â”‚   â”œâ”€â”€ æµä½“ç³»ç»Ÿ (Fluids)ï¼š#06B6D4 (é’è‰²ç³») - æ°´ã€æ²¹ã€è’¸æ±½
â”‚   â””â”€â”€ ç§‘æŠ€ç³»ç»Ÿ (Technology)ï¼š#8B5CF6 (ç´«è‰²ç³») - ç§‘æŠ€åŒ…ã€å®éªŒå®¤
â”‚
â”œâ”€â”€ ç§‘æŠ€åŒ…è‰²å½©ï¼š
â”‚   â”œâ”€â”€ è‡ªåŠ¨åŒ–ç§‘æŠ€åŒ…ï¼š#EF4444 (çº¢è‰²)
â”‚   â”œâ”€â”€ ç‰©æµç§‘æŠ€åŒ…ï¼š#22C55E (ç»¿è‰²)
â”‚   â”œâ”€â”€ å†›äº‹ç§‘æŠ€åŒ…ï¼š#8B5CF6 (ç´«è‰²)
â”‚   â”œâ”€â”€ åŒ–å­¦ç§‘æŠ€åŒ…ï¼š#06B6D4 (é’è‰²)
â”‚   â”œâ”€â”€ ç”Ÿäº§ç§‘æŠ€åŒ…ï¼š#F59E0B (æ©™è‰²)
â”‚   â”œâ”€â”€ å®ç”¨ç§‘æŠ€åŒ…ï¼š#10B981 (ç»¿è‰²)
â”‚   â””â”€â”€ å¤ªç©ºç§‘æŠ€åŒ…ï¼š#6366F1 (é›è“è‰²)
â”‚
â””â”€â”€ çŠ¶æ€è‰²å½©ï¼š
    â”œâ”€â”€ ç”Ÿäº§ä¸­ï¼š#10B981 (ç»¿è‰²)
    â”œâ”€â”€ åœæ­¢ä¸­ï¼š#EF4444 (çº¢è‰²)
    â”œâ”€â”€ ç¼ºæ–™ä¸­ï¼š#F59E0B (æ©™è‰²)
    â”œâ”€â”€ ç»´æŠ¤ä¸­ï¼š#6B7280 (ç°è‰²)
    â”œâ”€â”€ ç ”ç©¶ä¸­ï¼š#8B5CF6 (ç´«è‰²)
    â””â”€â”€ å·²è§£é”ï¼š#22C55E (ç»¿è‰²)
```

#### 3.2.2 ç‰©å“å›¾æ ‡è‰²å½©

```
ç‰©å“å›¾æ ‡é¢œè‰²æ˜ å°„ï¼š
â”œâ”€â”€ çŸ¿ç‰©ç±»ï¼šæ£•è‰²åˆ°æ©™è‰²ç³»
â”œâ”€â”€ é‡‘å±ç±»ï¼šé“¶è‰²åˆ°ç°è‰²ç³»
â”œâ”€â”€ æœºæ¢°ç±»ï¼šé»„è‰²åˆ°é‡‘è‰²ç³»
â”œâ”€â”€ ç”µå­ç±»ï¼šç»¿è‰²åˆ°è“è‰²ç³»
â”œâ”€â”€ åŒ–å·¥ç±»ï¼šè“è‰²åˆ°ç´«è‰²ç³»
â”œâ”€â”€ ç§‘æŠ€ç±»ï¼šç´«è‰²åˆ°ç²‰è‰²ç³»
â””â”€â”€ å†›äº‹ç±»ï¼šçº¢è‰²åˆ°æ·±çº¢ç³»
```

### 3.3 å­—ä½“å’Œæ’ç‰ˆè§„èŒƒ

#### 3.3.1 å­—ä½“å±‚çº§ç³»ç»Ÿ

```
å­—ä½“å¤§å°è§„èŒƒï¼š
â”œâ”€â”€ æ ‡é¢˜æ–‡å­—ï¼š18px, å­—é‡700 (é¡µé¢æ ‡é¢˜)
â”œâ”€â”€ å‰¯æ ‡é¢˜ï¼š16px, å­—é‡600 (åŒºåŸŸæ ‡é¢˜)
â”œâ”€â”€ æ­£æ–‡æ–‡å­—ï¼š14px, å­—é‡400 (ä¸»è¦æ–‡æœ¬)
â”œâ”€â”€ è¾…åŠ©æ–‡å­—ï¼š12px, å­—é‡400 (è¾…åŠ©ä¿¡æ¯)
â”œâ”€â”€ å°å·æ–‡å­—ï¼š10px, å­—é‡400 (çŠ¶æ€æ ‡ç­¾)
â””â”€â”€ æ•°å­—æ–‡å­—ï¼š14px, å­—é‡600 (æ•°å€¼æ˜¾ç¤º)
```

#### 3.3.2 æ’ç‰ˆé—´è·è§„èŒƒ

```
é—´è·ç³»ç»Ÿï¼š
â”œâ”€â”€ åŸºç¡€é—´è·ï¼š4px (æœ€å°é—´è·å•ä½)
â”œâ”€â”€ ç»„ä»¶å†…é—´è·ï¼š8px (æŒ‰é’®å†…è¾¹è·)
â”œâ”€â”€ ç›¸å…³å…ƒç´ é—´è·ï¼š12px (ç›¸å…³å†…å®¹é—´è·)
â”œâ”€â”€ æ®µè½é—´è·ï¼š16px (æ®µè½ä¹‹é—´é—´è·)
â”œâ”€â”€ åŒºåŸŸé—´è·ï¼š24px (ä¸åŒåŒºåŸŸé—´è·)
â””â”€â”€ é¡µé¢é—´è·ï¼š32px (é¡µé¢è¾¹è·)
```

### 3.4 äº¤äº’è®¾è®¡è§„èŒƒ

#### 3.4.1 è§¦æ‘¸äº¤äº’æ ‡å‡†

```
äº¤äº’è¡Œä¸ºå®šä¹‰ï¼š
â”œâ”€â”€ ç‚¹å‡» (Tap)ï¼š
â”‚   â”œâ”€â”€ ç‰©å“å¡ç‰‡ï¼šæ‰“å¼€ç‰©å“è¯¦æƒ…
â”‚   â”œâ”€â”€ è®¾æ–½æŒ‰é’®ï¼šè°ƒæ•´è®¾æ–½æ•°é‡
â”‚   â”œâ”€â”€ åˆ†ç±»æ ‡ç­¾ï¼šåˆ‡æ¢ç‰©å“åˆ†ç±»
â”‚   â””â”€â”€ åŠŸèƒ½æŒ‰é’®ï¼šæ‰§è¡Œå¯¹åº”åŠŸèƒ½
â”‚
â”œâ”€â”€ é•¿æŒ‰ (Long Press)ï¼š
â”‚   â”œâ”€â”€ ç‰©å“å¡ç‰‡ï¼šå¿«é€Ÿæ“ä½œèœå•
â”‚   â”œâ”€â”€ è®¾æ–½é¡¹ç›®ï¼šè®¾æ–½è¯¦ç»†ä¿¡æ¯
â”‚   â””â”€â”€ é˜Ÿåˆ—ä»»åŠ¡ï¼šä»»åŠ¡ç®¡ç†é€‰é¡¹
â”‚
â””â”€â”€ æ»‘åŠ¨ (Swipe)ï¼š
    â”œâ”€â”€ æ°´å¹³æ»‘åŠ¨ï¼šåˆ‡æ¢åˆ†ç±»æ ‡ç­¾
    â”œâ”€â”€ å‚ç›´æ»‘åŠ¨ï¼šæ»šåŠ¨ç‰©å“åˆ—è¡¨
    â””â”€â”€ åˆ¶ä½œé˜Ÿåˆ—ï¼šæ»‘åŠ¨åˆ é™¤ä»»åŠ¡
```

#### 3.4.2 åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ

```
åŠ¨ç”»è§„èŒƒï¼š
â”œâ”€â”€ é¡µé¢åˆ‡æ¢ï¼š300ms ease-in-out
â”œâ”€â”€ å¼¹çª—å‡ºç°ï¼š200ms ease-out
â”œâ”€â”€ æŒ‰é’®ç‚¹å‡»ï¼š100ms ease-in
â”œâ”€â”€ æ•°å€¼å˜åŒ–ï¼š150ms ease-out
â”œâ”€â”€ è¿›åº¦æ¡ï¼šå®æ—¶æ›´æ–°ï¼Œæ— åŠ¨ç”»
â””â”€â”€ çŠ¶æ€åˆ‡æ¢ï¼š200ms ease-in-out
```

### 3.5 ç»„ä»¶è®¾è®¡è§„èŒƒ

#### 3.5.1 æŒ‰é’®ç»„ä»¶è§„èŒƒ

```
æŒ‰é’®ç±»å‹å®šä¹‰ï¼š
â”œâ”€â”€ ä¸»è¦æŒ‰é’®ï¼š
â”‚   â”œâ”€â”€ èƒŒæ™¯ï¼š#2563EB
â”‚   â”œâ”€â”€ æ–‡å­—ï¼š#FFFFFF
â”‚   â”œâ”€â”€ é«˜åº¦ï¼š44px
â”‚   â”œâ”€â”€ åœ†è§’ï¼š8px
â”‚   â””â”€â”€ ç”¨é€”ï¼šä¸»è¦æ“ä½œ
â”‚
â”œâ”€â”€ æ¬¡è¦æŒ‰é’®ï¼š
â”‚   â”œâ”€â”€ èƒŒæ™¯ï¼šé€æ˜
â”‚   â”œâ”€â”€ è¾¹æ¡†ï¼š1px #2563EB
â”‚   â”œâ”€â”€ æ–‡å­—ï¼š#2563EB
â”‚   â”œâ”€â”€ é«˜åº¦ï¼š44px
â”‚   â””â”€â”€ ç”¨é€”ï¼šæ¬¡è¦æ“ä½œ
â”‚
â”œâ”€â”€ å±é™©æŒ‰é’®ï¼š
â”‚   â”œâ”€â”€ èƒŒæ™¯ï¼š#EF4444
â”‚   â”œâ”€â”€ æ–‡å­—ï¼š#FFFFFF
â”‚   â”œâ”€â”€ é«˜åº¦ï¼š44px
â”‚   â””â”€â”€ ç”¨é€”ï¼šåˆ é™¤ç­‰å±é™©æ“ä½œ
â”‚
â””â”€â”€ å›¾æ ‡æŒ‰é’®ï¼š
    â”œâ”€â”€ å°ºå¯¸ï¼š44Ã—44px
    â”œâ”€â”€ èƒŒæ™¯ï¼šé€æ˜æˆ–æµ…è‰²
    â”œâ”€â”€ å›¾æ ‡ï¼š24Ã—24px
    â””â”€â”€ ç”¨é€”ï¼šå·¥å…·æ æ“ä½œ
```

#### 3.5.2 å¡ç‰‡ç»„ä»¶è§„èŒƒ

```
å¡ç‰‡è®¾è®¡è§„èŒƒï¼š
â”œâ”€â”€ èƒŒæ™¯è‰²ï¼š#FFFFFF
â”œâ”€â”€ è¾¹æ¡†ï¼š1px #E5E7EB
â”œâ”€â”€ åœ†è§’ï¼š8px
â”œâ”€â”€ é˜´å½±ï¼š0 1px 3px rgba(0,0,0,0.1)
â”œâ”€â”€ å†…è¾¹è·ï¼š12px
â”œâ”€â”€ æ‚¬åœæ•ˆæœï¼šé˜´å½±åŠ æ·±
â””â”€â”€ ç‚¹å‡»æ•ˆæœï¼šè½»å¾®ç¼©æ”¾
```

#### 3.5.3 è¿›åº¦æ¡ç»„ä»¶è§„èŒƒ

```
è¿›åº¦æ¡è®¾è®¡ï¼š
â”œâ”€â”€ ç»†è¿›åº¦æ¡ï¼š
â”‚   â”œâ”€â”€ é«˜åº¦ï¼š4px
â”‚   â”œâ”€â”€ èƒŒæ™¯ï¼š#E5E7EB
â”‚   â”œâ”€â”€ å‰æ™¯ï¼šæ ¹æ®ç±»å‹é€‰æ‹©
â”‚   â””â”€â”€ åœ†è§’ï¼š2px
â”‚
â””â”€â”€ ç²—è¿›åº¦æ¡ï¼š
    â”œâ”€â”€ é«˜åº¦ï¼š8px
    â”œâ”€â”€ èƒŒæ™¯ï¼š#E5E7EB
    â”œâ”€â”€ å‰æ™¯ï¼šæ ¹æ®ç±»å‹é€‰æ‹©
    â””â”€â”€ åœ†è§’ï¼š4px
```

## 4. æŠ€æœ¯å®ç°è§„èŒƒ

### 4.1 æŠ€æœ¯æ¶æ„é€‰å‹

#### 4.1.1 å‰ç«¯æŠ€æœ¯æ ˆ

```
æ¨èæŠ€æœ¯æ–¹æ¡ˆï¼š
â”œâ”€â”€ ä¸»æ¡†æ¶ï¼šReact Native
â”‚   â”œâ”€â”€ ä¼˜åŠ¿ï¼šè·¨å¹³å°ã€ç”Ÿæ€æˆç†Ÿã€æ€§èƒ½ä¼˜ç§€
â”‚   â”œâ”€â”€ ç‰ˆæœ¬ï¼šReact Native 0.72+
â”‚   â””â”€â”€ è¯­è¨€ï¼šTypeScript
â”‚
â”œâ”€â”€ çŠ¶æ€ç®¡ç†ï¼šRedux Toolkit
â”‚   â”œâ”€â”€ å…¨å±€çŠ¶æ€ï¼šæ¸¸æˆæ ¸å¿ƒæ•°æ®
â”‚   â”œâ”€â”€ æœ¬åœ°çŠ¶æ€ï¼šReact useState
â”‚   â””â”€â”€ æŒä¹…åŒ–ï¼šRedux Persist
â”‚
â”œâ”€â”€ å¯¼èˆªï¼šReact Navigation 6
â”‚   â”œâ”€â”€ é¡µé¢å¯¼èˆªï¼šStack Navigator
â”‚   â”œâ”€â”€ æ ‡ç­¾å¯¼èˆªï¼šTab Navigator
â”‚   â””â”€â”€ å¼¹çª—å¯¼èˆªï¼šModal Navigator
â”‚
â””â”€â”€ UIç»„ä»¶ï¼š
    â”œâ”€â”€ åŸºç¡€ç»„ä»¶ï¼šReact Nativeå†…ç½®
    â”œâ”€â”€ å›¾æ ‡åº“ï¼šReact Native Vector Icons
    â””â”€â”€ åŠ¨ç”»åº“ï¼šReact Native Reanimated
```

#### 4.1.2 æ•°æ®å­˜å‚¨æŠ€æœ¯

```
å­˜å‚¨æŠ€æœ¯é€‰å‹ï¼š
â”œâ”€â”€ æ¸¸æˆæ•°æ®ï¼šSQLite
â”‚   â”œâ”€â”€ åº“ï¼šreact-native-sqlite-storage
â”‚   â”œâ”€â”€ ä¼˜åŠ¿ï¼šç»“æ„åŒ–å­˜å‚¨ã€æŸ¥è¯¢æ€§èƒ½å¥½
â”‚   â””â”€â”€ ç”¨é€”ï¼šæ¸¸æˆçŠ¶æ€ã€å­˜æ¡£ã€ç»Ÿè®¡æ•°æ®
â”‚
â”œâ”€â”€ é…ç½®æ•°æ®ï¼šAsyncStorage
â”‚   â”œâ”€â”€ åº“ï¼š@react-native-async-storage/async-storage
â”‚   â”œâ”€â”€ ä¼˜åŠ¿ï¼šç®€å•æ˜“ç”¨ã€æ€§èƒ½å¥½
â”‚   â””â”€â”€ ç”¨é€”ï¼šç”¨æˆ·è®¾ç½®ã€åå¥½é…ç½®
â”‚
â”œâ”€â”€ ç¼“å­˜æ•°æ®ï¼šå†…å­˜
â”‚   â”œâ”€â”€ å®ç°ï¼šJavaScriptå¯¹è±¡
â”‚   â”œâ”€â”€ ä¼˜åŠ¿ï¼šè®¿é—®é€Ÿåº¦æœ€å¿«
â”‚   â””â”€â”€ ç”¨é€”ï¼šå½“å‰æ¸¸æˆçŠ¶æ€ã€è®¡ç®—ç»“æœ
â”‚
â””â”€â”€ ä¸´æ—¶æ•°æ®ï¼šæ–‡ä»¶ç³»ç»Ÿ
    â”œâ”€â”€ åº“ï¼šreact-native-fs
    â”œâ”€â”€ ä¼˜åŠ¿ï¼šå¤§å®¹é‡ã€å¯å¯¼å‡º
    â””â”€â”€ ç”¨é€”ï¼šå­˜æ¡£å¤‡ä»½ã€æ—¥å¿—æ–‡ä»¶
```

### 4.2 æ•°æ®ç»“æ„è®¾è®¡

#### 4.2.1 åŸºäº Factorio çš„æ¸¸æˆçŠ¶æ€æ•°æ®ç»“æ„

```typescript
// åŸºäºFactorio 1.1.107æ•°æ®çš„æ¸¸æˆçŠ¶æ€ç»“æ„
interface GameState {
  // ç‰ˆæœ¬ä¿¡æ¯
  version: {
    base: string; // Factorioç‰ˆæœ¬
    DataRawJson: string; // æ•°æ®æ ¼å¼ç‰ˆæœ¬
  };

  // åˆ†ç±»å®šä¹‰
  categories: Category[]; // åŸºäºFactorioçš„åˆ†ç±»
  icons: Icon[]; // å›¾æ ‡å®šä¹‰
  items: Item[]; // ç‰©å“å®šä¹‰
  recipes: Recipe[]; // é…æ–¹å®šä¹‰
  technologies: Technology[]; // ç§‘æŠ€å®šä¹‰

  // ç©å®¶ä¿¡æ¯
  player: {
    id: string;
    level: number;
    experience: number;
    playtime: number;
    currencies: {
      gold: number;
      crystals: number;
    };
  };

  // èµ„æºåº“å­˜ (åŸºäºFactorioç‰©å“ID)
  resources: {
    [itemId: string]: number;
  };

  // è®¾å¤‡å®ä¾‹ç®¡ç†
  equipment: EquipmentManagement;

  // ç§‘æŠ€ç ”å‘ç³»ç»Ÿ
  research: {
    unlockedTechnologies: string[]; // å·²è§£é”çš„ç§‘æŠ€
    researchedTechnologies: string[]; // å·²ç ”ç©¶çš„ç§‘æŠ€
    availableRecipes: string[]; // å¯ç”¨çš„é…æ–¹
    researchQueue: string[]; // ç ”ç©¶é˜Ÿåˆ—
    currentResearch?: ResearchProgress; // å½“å‰ç ”ç©¶é¡¹ç›®
  };

  // åˆ¶ä½œé˜Ÿåˆ—
  craftingQueue: CraftingTask[];

  // æ¸¸æˆè®¾ç½®
  settings: {
    autoSave: boolean;
    soundEnabled: boolean;
    vibrationEnabled: boolean;
    selectedCategory: string;
  };

  // ç”Ÿäº§ç‡æ¨¡å—é™åˆ¶
  limitations: {
    "productivity-module": string[]; // ä¸èƒ½ä½¿ç”¨ç”Ÿäº§ç‡æ¨¡å—çš„é…æ–¹
  };

  // å…ƒæ•°æ®
  metadata: {
    version: string;
    lastSaved: number;
    totalPlaytime: number;
    factorioVersion: string; // å¯¹åº”çš„Factorioç‰ˆæœ¬
  };
}

// ç‰©å“æ•°æ®ç»“æ„ (åŸºäºFactorio)
interface Item {
  id: string;
  name: string;
  category: string;
  stack: number; // å †å æ•°é‡
  row: number; // ç§‘æŠ€æ ‘è¡Œä½ç½®

  // ç‰¹æ®Šå±æ€§
  container?: { size: number }; // å®¹å™¨å®¹é‡
  belt?: { speed: number }; // ä¼ é€å¸¦é€Ÿåº¦
  storageTank?: { capacity: number }; // å‚¨ç½å®¹é‡
  fuel?: { value: number }; // ç‡ƒæ–™å€¼
}

// åˆ†ç±»å®šä¹‰ (åŸºäºFactorio)
interface Category {
  id: string;
  name: string;
  icon?: string;
}

// å›¾æ ‡å®šä¹‰ (åŸºäºFactorio)
interface Icon {
  id: string;
  position: string;
  color: string;
}
```

#### 4.2.2 è®¾å¤‡å®ä¾‹æ•°æ®ç»“æ„

```typescript
interface EquipmentInstance {
  id: string;
  type: string;
  level: number;
  efficiency: number;
  working: boolean;

  // ç‡ƒæ–™è®¾å¤‡ä¸“æœ‰
  fuel?: number;
  maxFuel?: number;
  fuelType?: string;

  // ç”µåŠ›è®¾å¤‡ä¸“æœ‰
  powerConnected?: boolean;
  powerConsumption?: number;

  // æ¨¡å—æ’æ§½
  modules?: {
    [slotIndex: number]: ModuleInstance;
  };

  // çŠ¶æ€ä¿¡æ¯
  lastMaintenance?: number;
  totalRuntime?: number;
  totalProduction?: number;
}
```

#### 4.2.3 åˆ¶ä½œä»»åŠ¡æ•°æ®ç»“æ„

```typescript
interface CraftingTask {
  id: string;
  type: "mining" | "crafting";
  itemId: string;
  quantity: number;
  progress: number;
  totalTime: number;

  // åˆ¶ä½œä»»åŠ¡ä¸“æœ‰
  recipeId?: string;
  materialsConsumed?: boolean;

  // å¼€é‡‡ä»»åŠ¡ä¸“æœ‰
  miningMethod?: "manual" | "automatic";

  // çŠ¶æ€ä¿¡æ¯
  createdAt: number;
  startedAt?: number;
  estimatedCompletion?: number;
}
```

### 4.3 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### 4.3.1 æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–

```
æ¸²æŸ“ä¼˜åŒ–æªæ–½ï¼š
â”œâ”€â”€ è™šæ‹ŸåŒ–æ»šåŠ¨ï¼š
â”‚   â”œâ”€â”€ ä½¿ç”¨FlatListä»£æ›¿ScrollView
â”‚   â”œâ”€â”€ è®¾ç½®åˆç†çš„åˆå§‹æ¸²æŸ“æ•°é‡
â”‚   â””â”€â”€ å®ç°windowSizeä¼˜åŒ–
â”‚
â”œâ”€â”€ å›¾ç‰‡ä¼˜åŒ–ï¼š
â”‚   â”œâ”€â”€ ä½¿ç”¨é€‚å½“çš„å›¾ç‰‡æ ¼å¼å’Œå°ºå¯¸
â”‚   â”œâ”€â”€ å®ç°å›¾ç‰‡æ‡’åŠ è½½
â”‚   â””â”€â”€ ç¼“å­˜é¢‘ç¹ä½¿ç”¨çš„å›¾ç‰‡
â”‚
â”œâ”€â”€ ç»„ä»¶ä¼˜åŒ–ï¼š
â”‚   â”œâ”€â”€ ä½¿ç”¨React.memoé¿å…æ— ç”¨æ¸²æŸ“
â”‚   â”œâ”€â”€ ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ
â”‚   â””â”€â”€ ä½¿ç”¨useCallbacké¿å…å‡½æ•°é‡æ–°åˆ›å»º
â”‚
â””â”€â”€ çŠ¶æ€ç®¡ç†ä¼˜åŒ–ï¼š
    â”œâ”€â”€ é¿å…è¿‡åº¦çš„çŠ¶æ€æ›´æ–°
    â”œâ”€â”€ ä½¿ç”¨æ‰¹é‡æ›´æ–°å‡å°‘æ¸²æŸ“æ¬¡æ•°
    â””â”€â”€ åˆç†æ‹†åˆ†çŠ¶æ€é¿å…å…¨å±€æ›´æ–°
```

#### 4.3.2 å†…å­˜ç®¡ç†ä¼˜åŒ–

```
å†…å­˜ä¼˜åŒ–ç­–ç•¥ï¼š
â”œâ”€â”€ æ•°æ®ç»“æ„ä¼˜åŒ–ï¼š
â”‚   â”œâ”€â”€ ä½¿ç”¨åˆé€‚çš„æ•°æ®ç±»å‹
â”‚   â”œâ”€â”€ é¿å…å¾ªç¯å¼•ç”¨
â”‚   â””â”€â”€ åŠæ—¶æ¸…ç†ä¸ç”¨çš„æ•°æ®
â”‚
â”œâ”€â”€ ç¼“å­˜ç­–ç•¥ï¼š
â”‚   â”œâ”€â”€ è®¾ç½®åˆç†çš„ç¼“å­˜å¤§å°é™åˆ¶
â”‚   â”œâ”€â”€ å®ç°LRUç¼“å­˜æ·˜æ±°ç­–ç•¥
â”‚   â””â”€â”€ å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜
â”‚
â”œâ”€â”€ å¯¹è±¡æ± ï¼š
â”‚   â”œâ”€â”€ é‡ç”¨é¢‘ç¹åˆ›å»ºçš„å¯¹è±¡
â”‚   â”œâ”€â”€ é¢„åˆ†é…å¸¸ç”¨å¯¹è±¡
â”‚   â””â”€â”€ å‡å°‘åƒåœ¾å›æ”¶å‹åŠ›
â”‚
â””â”€â”€ ç›‘æ§å·¥å…·ï¼š
    â”œâ”€â”€ é›†æˆå†…å­˜ä½¿ç”¨ç›‘æ§
    â”œâ”€â”€ è®¾ç½®å†…å­˜æ³„æ¼è­¦å‘Š
    â”œâ”€â”€ å®šæœŸå†…å­˜ä½¿ç”¨æŠ¥å‘Š
    â””â”€â”€ æ€§èƒ½ç“¶é¢ˆè‡ªåŠ¨æ£€æµ‹
```

#### 4.3.3 æ¸¸æˆå¾ªç¯ä¼˜åŒ–

```
æ¸¸æˆå¾ªç¯æ€§èƒ½ä¼˜åŒ–ï¼š
â”œâ”€â”€ é¢‘ç‡æ§åˆ¶ï¼š
â”‚   â”œâ”€â”€ ä¸»å¾ªç¯ï¼š100ms (10fps)
â”‚   â”œâ”€â”€ UIæ›´æ–°ï¼š16.67ms (60fps)
â”‚   â”œâ”€â”€ æ•°æ®ä¿å­˜ï¼š30sè‡ªåŠ¨ä¿å­˜
â”‚   â””â”€â”€ ç»Ÿè®¡è®¡ç®—ï¼š1sæ›´æ–°ä¸€æ¬¡
â”‚
â”œâ”€â”€ è®¡ç®—ä¼˜åŒ–ï¼š
â”‚   â”œâ”€â”€ å¢é‡è®¡ç®—ï¼šåªè®¡ç®—å˜åŒ–çš„éƒ¨åˆ†
â”‚   â”œâ”€â”€ æ‰¹é‡å¤„ç†ï¼šåˆå¹¶å¤šä¸ªå°è®¡ç®—
â”‚   â”œâ”€â”€ å¼‚æ­¥è®¡ç®—ï¼šå¤æ‚è®¡ç®—æ”¾å…¥åå°
â”‚   â””â”€â”€ ç¼“å­˜ç»“æœï¼šç¼“å­˜é‡å¤è®¡ç®—ç»“æœ
â”‚
â”œâ”€â”€ æ›´æ–°ç­–ç•¥ï¼š
â”‚   â”œâ”€â”€ è„æ ‡è®°ï¼šæ ‡è®°éœ€è¦æ›´æ–°çš„æ•°æ®
â”‚   â”œâ”€â”€ ä¼˜å…ˆçº§ï¼šé‡è¦æ•°æ®ä¼˜å…ˆè®¡ç®—
â”‚   â”œâ”€â”€ åˆ†å¸§å¤„ç†ï¼šå¤§ä»»åŠ¡åˆ†å¤šå¸§å®Œæˆ
â”‚   â””â”€â”€ æš‚åœæœºåˆ¶ï¼šåå°æ—¶æš‚åœéå¿…è¦è®¡ç®—
â”‚
â””â”€â”€ èµ„æºç®¡ç†ï¼š
    â”œâ”€â”€ å¯¹è±¡å¤ç”¨ï¼šå¤ç”¨ä¸´æ—¶è®¡ç®—å¯¹è±¡
    â”œâ”€â”€ å»¶è¿Ÿåˆå§‹åŒ–ï¼šæŒ‰éœ€åˆ›å»ºè®¡ç®—å¯¹è±¡
    â”œâ”€â”€ è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼šå®šæœŸæ¸…ç†æ— ç”¨å¯¹è±¡
    â””â”€â”€ èµ„æºé¢„åŠ è½½ï¼šæå‰åŠ è½½å¸¸ç”¨èµ„æº
```

### 4.4 æ•°æ®æŒä¹…åŒ–å®ç°

#### 4.4.1 SQLite æ•°æ®åº“è®¾è®¡

```sql
-- æ¸¸æˆå­˜æ¡£è¡¨
CREATE TABLE save_files (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    game_data TEXT NOT NULL, -- JSONæ ¼å¼çš„æ¸¸æˆæ•°æ®
    preview_image BLOB,      -- å­˜æ¡£é¢„è§ˆå›¾
    created_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL,
    version TEXT NOT NULL,
    is_active BOOLEAN DEFAULT FALSE
);

-- ç”¨æˆ·è®¾ç½®è¡¨
CREATE TABLE user_settings (
    key TEXT PRIMARY KEY,
    value TEXT NOT NULL,
    type TEXT NOT NULL -- 'string', 'number', 'boolean', 'json'
);

-- æ¸¸æˆç»Ÿè®¡è¡¨
CREATE TABLE game_statistics (
    save_id INTEGER,
    stat_name TEXT,
    stat_value REAL,
    recorded_at INTEGER,
    FOREIGN KEY (save_id) REFERENCES save_files(id)
);

-- æˆå°±è®°å½•è¡¨
CREATE TABLE achievements (
    save_id INTEGER,
    achievement_id TEXT,
    unlocked_at INTEGER,
    progress REAL DEFAULT 0,
    FOREIGN KEY (save_id) REFERENCES save_files(id)
);
```

#### 4.4.2 æ•°æ®åºåˆ—åŒ–ç­–ç•¥

```typescript
// æ•°æ®å‹ç¼©å’Œåºåˆ—åŒ–
class GameDataSerializer {
  // åºåˆ—åŒ–æ¸¸æˆçŠ¶æ€
  static serialize(gameState: GameState): string {
    // 1. ç§»é™¤å†—ä½™æ•°æ®
    const cleanedState = this.removeRedundantData(gameState);

    // 2. å‹ç¼©æ•°æ®ç»“æ„
    const compressedState = this.compressData(cleanedState);

    // 3. JSONåºåˆ—åŒ–
    const serialized = JSON.stringify(compressedState);

    // 4. å¯é€‰çš„è¿›ä¸€æ­¥å‹ç¼©
    return this.gzipCompress(serialized);
  }

  // ååºåˆ—åŒ–æ¸¸æˆçŠ¶æ€
  static deserialize(data: string): GameState {
    // 1. è§£å‹ç¼©
    const decompressed = this.gzipDecompress(data);

    // 2. JSONè§£æ
    const parsed = JSON.parse(decompressed);

    // 3. æ•°æ®è§£å‹ç¼©
    const expanded = this.expandData(parsed);

    // 4. æ•°æ®éªŒè¯å’Œä¿®å¤
    return this.validateAndRepair(expanded);
  }

  // ç‰ˆæœ¬è¿ç§»
  static migrate(data: any, fromVersion: string, toVersion: string): GameState {
    const migrations = this.getMigrations(fromVersion, toVersion);
    return migrations.reduce((state, migration) => migration(state), data);
  }
}
```

#### 4.4.3 è‡ªåŠ¨ä¿å­˜æœºåˆ¶

```typescript
class AutoSaveManager {
  private saveTimer: NodeJS.Timeout | null = null;
  private pendingSave = false;
  private lastSaveTime = 0;

  // å¯åŠ¨è‡ªåŠ¨ä¿å­˜
  startAutoSave(interval: number = 30000) {
    this.saveTimer = setInterval(() => {
      this.performAutoSave();
    }, interval);
  }

  // æ‰§è¡Œè‡ªåŠ¨ä¿å­˜
  private async performAutoSave() {
    if (this.pendingSave) return;

    this.pendingSave = true;
    try {
      const gameState = store.getState().game;
      const hasChanges = this.hasSignificantChanges(gameState);

      if (hasChanges) {
        await this.saveGameState(gameState);
        this.lastSaveTime = Date.now();
      }
    } catch (error) {
      console.error("è‡ªåŠ¨ä¿å­˜å¤±è´¥:", error);
    } finally {
      this.pendingSave = false;
    }
  }

  // å¼ºåˆ¶ä¿å­˜
  async forceSave(): Promise<void> {
    if (this.saveTimer) {
      clearInterval(this.saveTimer);
    }
    await this.performAutoSave();
    this.startAutoSave();
  }

  // æ£€æŸ¥æ˜¯å¦æœ‰é‡è¦å˜åŒ–
  private hasSignificantChanges(gameState: GameState): boolean {
    // æ£€æŸ¥èµ„æºå˜åŒ–
    // æ£€æŸ¥è®¾å¤‡çŠ¶æ€å˜åŒ–
    // æ£€æŸ¥ç ”å‘è¿›åº¦å˜åŒ–
    // è¿”å›æ˜¯å¦éœ€è¦ä¿å­˜
    return true;
  }
}
```

## 5. ç”¨æˆ·ä½“éªŒè®¾è®¡

### 5.1 æ–°æ‰‹å¼•å¯¼ç³»ç»Ÿ

#### 5.1.1 å¼•å¯¼æµç¨‹è®¾è®¡

```
æ–°æ‰‹å¼•å¯¼æ­¥éª¤ï¼š
â”œâ”€â”€ ç¬¬ä¸€æ­¥ï¼šç•Œé¢ä»‹ç» (30ç§’)
â”‚   â”œâ”€â”€ å±•ç¤ºä¸»ç•Œé¢å„åŒºåŸŸåŠŸèƒ½
â”‚   â”œâ”€â”€ è¯´æ˜åˆ†ç±»æ ‡ç­¾çš„ä½œç”¨
â”‚   â””â”€â”€ ä»‹ç»ç‰©å“ç½‘æ ¼å¸ƒå±€
â”‚
â”œâ”€â”€ ç¬¬äºŒæ­¥ï¼šåŸºç¡€æ“ä½œ (60ç§’)
â”‚   â”œâ”€â”€ ç‚¹å‡»ç‰©å“æŸ¥çœ‹è¯¦æƒ…
â”‚   â”œâ”€â”€ å°è¯•æ‰‹åŠ¨å¼€é‡‡é“çŸ¿çŸ³
â”‚   â””â”€â”€ è§‚å¯Ÿåº“å­˜æ•°é‡å˜åŒ–
â”‚
â”œâ”€â”€ ç¬¬ä¸‰æ­¥ï¼šè‡ªåŠ¨åŒ–å…¥é—¨ (90ç§’)
â”‚   â”œâ”€â”€ å»ºé€ ç¬¬ä¸€å°çƒ­åŠ›é‡‡æ˜æœº
â”‚   â”œâ”€â”€ è§‚å¯Ÿè‡ªåŠ¨å¼€é‡‡è¿‡ç¨‹
â”‚   â””â”€â”€ ç†è§£ç‡ƒæ–™è‡ªåŠ¨è¡¥å……æœºåˆ¶
â”‚
â”œâ”€â”€ ç¬¬å››æ­¥ï¼šç”Ÿäº§é“¾å»ºç«‹ (120ç§’)
â”‚   â”œâ”€â”€ å»ºé€ ç†”ç‚‰å†¶ç‚¼é“æ¿
â”‚   â”œâ”€â”€ åˆ¶ä½œç¬¬ä¸€ä¸ªé“é½¿è½®
â”‚   â””â”€â”€ å®Œæˆç¬¬ä¸€ä¸ªç§‘æŠ€åŒ…åˆ¶ä½œ
â”‚
â””â”€â”€ ç¬¬äº”æ­¥ï¼šç§‘æŠ€ç ”å‘ (60ç§’)
    â”œâ”€â”€ ä½¿ç”¨ç§‘æŠ€åŒ…è§£é”æ–°æŠ€æœ¯
    â”œâ”€â”€ å»ºé€ è£…é…æœºå®ç°è‡ªåŠ¨åŒ–
    â””â”€â”€ è®¾ç½®ç¬¬ä¸€æ¡å®Œæ•´ç”Ÿäº§çº¿
```

#### 5.1.2 å¼•å¯¼æœºåˆ¶è®¾è®¡

```typescript
interface TutorialStep {
  id: string;
  title: string;
  description: string;
  targetElement?: string;
  highlightArea?: "circle" | "rectangle";
  action?: "tap" | "drag" | "wait";
  condition?: () => boolean;
  onComplete?: () => void;
  skippable: boolean;
}

class TutorialManager {
  private currentStep = 0;
  private steps: TutorialStep[] = [];
  private overlay: React.Component | null = null;

  // å¼€å§‹å¼•å¯¼
  startTutorial(tutorialId: string) {
    this.steps = this.loadTutorialSteps(tutorialId);
    this.showNextStep();
  }

  // æ˜¾ç¤ºä¸‹ä¸€æ­¥
  showNextStep() {
    if (this.currentStep >= this.steps.length) {
      this.completeTutorial();
      return;
    }

    const step = this.steps[this.currentStep];
    this.showStepOverlay(step);
  }

  // æ£€æŸ¥æ­¥éª¤å®Œæˆæ¡ä»¶
  checkStepCompletion() {
    const step = this.steps[this.currentStep];
    if (step.condition && step.condition()) {
      this.currentStep++;
      this.showNextStep();
    }
  }
}
```

### 5.2 æ¸¸æˆå¹³è¡¡æ€§è®¾è®¡

#### 5.2.1 è¿›åº¦æ›²çº¿è®¾è®¡

```
æ¸¸æˆè¿›åº¦å¹³è¡¡ï¼š
â”œâ”€â”€ æ—©æœŸé˜¶æ®µ (0-30åˆ†é’Ÿ)
â”‚   â”œâ”€â”€ æ‰‹åŠ¨æ“ä½œä¸ºä¸»
â”‚   â”œâ”€â”€ èµ„æºè·å–å®¹æ˜“
â”‚   â”œâ”€â”€ åˆ¶ä½œæ—¶é—´çŸ­
â”‚   â””â”€â”€ å¿«é€Ÿæ­£åé¦ˆ
â”‚
â”œâ”€â”€ å‘å±•é˜¶æ®µ (30åˆ†é’Ÿ-2å°æ—¶)
â”‚   â”œâ”€â”€ è‡ªåŠ¨åŒ–å…¥é—¨
â”‚   â”œâ”€â”€ è®¾å¤‡å»ºé€ æˆæœ¬åˆç†
â”‚   â”œâ”€â”€ ç”Ÿäº§é“¾é€æ­¥å¤æ‚
â”‚   â””â”€â”€ ç§‘æŠ€è§£é”æœ‰åº
â”‚
â”œâ”€â”€ æ‰©å¼ é˜¶æ®µ (2-8å°æ—¶)
â”‚   â”œâ”€â”€ å¤§è§„æ¨¡è‡ªåŠ¨åŒ–
â”‚   â”œâ”€â”€ èµ„æºéœ€æ±‚å¢åŠ 
â”‚   â”œâ”€â”€ æ•ˆç‡ä¼˜åŒ–æŒ‘æˆ˜
â”‚   â””â”€â”€ é«˜çº§ç§‘æŠ€è§£é”
â”‚
â””â”€â”€ ä¼˜åŒ–é˜¶æ®µ (8å°æ—¶ä»¥ä¸Š)
    â”œâ”€â”€ å®Œå…¨è‡ªåŠ¨åŒ–
    â”œâ”€â”€ æ•ˆç‡æé™æŒ‘æˆ˜
    â”œâ”€â”€ å¤æ‚ç”Ÿäº§é“¾
    â””â”€â”€ æ— é™æ‰©å±•å¯èƒ½
```

#### 5.2.2 ç»æµå¹³è¡¡è®¾è®¡

```
èµ„æºå¹³è¡¡å…¬å¼ï¼š
â”œâ”€â”€ åŸºç¡€èµ„æºæ¯”ä¾‹ï¼š
â”‚   â”œâ”€â”€ é“çŸ¿çŸ³ï¼šåŸºå‡† (1.0)
â”‚   â”œâ”€â”€ é“œçŸ¿çŸ³ï¼š0.8å€éœ€æ±‚
â”‚   â”œâ”€â”€ ç…¤ç‚­ï¼š0.6å€éœ€æ±‚ (ä½†å¤šç”¨é€”)
â”‚   â””â”€â”€ çŸ³å¤´ï¼š0.4å€éœ€æ±‚
â”‚
â”œâ”€â”€ è®¾å¤‡æˆæœ¬æ›²çº¿ï¼š
â”‚   â”œâ”€â”€ åŸºç¡€è®¾å¤‡ï¼šçº¿æ€§å¢é•¿
â”‚   â”œâ”€â”€ é«˜çº§è®¾å¤‡ï¼šæŒ‡æ•°å¢é•¿
â”‚   â”œâ”€â”€ å‡çº§æˆæœ¬ï¼šç­‰çº§^1.5
â”‚   â””â”€â”€ ç»´æŠ¤æˆæœ¬ï¼šå›ºå®šæ¯”ä¾‹
â”‚
â”œâ”€â”€ ç”Ÿäº§æ•ˆç‡æ›²çº¿ï¼š
â”‚   â”œâ”€â”€ æ‰‹åŠ¨æ•ˆç‡ï¼š1.0å€
â”‚   â”œâ”€â”€ åŸºç¡€è‡ªåŠ¨åŒ–ï¼š5-10å€
â”‚   â”œâ”€â”€ é«˜çº§è‡ªåŠ¨åŒ–ï¼š50-100å€
â”‚   â””â”€â”€ æé™æ•ˆç‡ï¼š1000å€+
â”‚
â””â”€â”€ ç§‘æŠ€è§£é”æˆæœ¬ï¼š
    â”œâ”€â”€ çº¢è‰²ç§‘æŠ€ï¼š10-50åŒ…
    â”œâ”€â”€ ç»¿è‰²ç§‘æŠ€ï¼š20-100åŒ…
    â”œâ”€â”€ è“è‰²ç§‘æŠ€ï¼š50-200åŒ…
    â””â”€â”€ é«˜çº§ç§‘æŠ€ï¼š100-500åŒ…
```

### 5.3 é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ

#### 5.3.1 é”™è¯¯å¤„ç†ç­–ç•¥

```
é”™è¯¯å¤„ç†æœºåˆ¶ï¼š
â”œâ”€â”€ æ•°æ®é”™è¯¯ï¼š
â”‚   â”œâ”€â”€ è‡ªåŠ¨æ•°æ®éªŒè¯
â”‚   â”œâ”€â”€ æŸåæ•°æ®ä¿®å¤
â”‚   â”œâ”€â”€ å¤‡ä»½æ•°æ®æ¢å¤
â”‚   â””â”€â”€ é»˜è®¤å€¼å¡«å……
â”‚
â”œâ”€â”€ æ“ä½œé”™è¯¯ï¼š
â”‚   â”œâ”€â”€ è¾“å…¥éªŒè¯
â”‚   â”œâ”€â”€ æ“ä½œç¡®è®¤
â”‚   â”œâ”€â”€ æ’¤é”€åŠŸèƒ½
â”‚   â””â”€â”€ é”™è¯¯æç¤º
â”‚
â”œâ”€â”€ ç³»ç»Ÿé”™è¯¯ï¼š
â”‚   â”œâ”€â”€ å¼‚å¸¸æ•è·
â”‚   â”œâ”€â”€ é”™è¯¯æ—¥å¿—
â”‚   â”œâ”€â”€ å´©æºƒæ¢å¤
â”‚   â””â”€â”€ é™çº§å¤„ç†
â”‚
â””â”€â”€ ç½‘ç»œé”™è¯¯ï¼š
    â”œâ”€â”€ ç¦»çº¿æ¨¡å¼
    â”œâ”€â”€ é‡è¯•æœºåˆ¶
    â”œâ”€â”€ ç¼“å­˜ç­–ç•¥
    â””â”€â”€ åŒæ­¥æ¢å¤
```

#### 5.3.2 ç”¨æˆ·åé¦ˆç³»ç»Ÿ

```
åé¦ˆæœºåˆ¶è®¾è®¡ï¼š
â”œâ”€â”€ å³æ—¶åé¦ˆï¼š
â”‚   â”œâ”€â”€ æŒ‰é’®ç‚¹å‡»æ•ˆæœ
â”‚   â”œâ”€â”€ æ•°å€¼å˜åŒ–åŠ¨ç”»
â”‚   â”œâ”€â”€ çŠ¶æ€æŒ‡ç¤ºç¯
â”‚   â””â”€â”€ è¿›åº¦æ¡æ›´æ–°
â”‚
â”œâ”€â”€ æ“ä½œç¡®è®¤ï¼š
â”‚   â”œâ”€â”€ æˆåŠŸæ“ä½œæç¤º
â”‚   â”œâ”€â”€ å¤±è´¥åŸå› è¯´æ˜
â”‚   â”œâ”€â”€ è­¦å‘Šä¿¡æ¯å±•ç¤º
â”‚   â””â”€â”€ å»ºè®®æ“ä½œæŒ‡å¯¼
â”‚
â”œâ”€â”€ è¿›åº¦åé¦ˆï¼š
â”‚   â”œâ”€â”€ åˆ¶ä½œè¿›åº¦æ˜¾ç¤º
â”‚   â”œâ”€â”€ ç ”å‘è¿›åº¦è¿½è¸ª
â”‚   â”œâ”€â”€ å»ºé€ è¿›åº¦æç¤º
â”‚   â””â”€â”€ å‡çº§è¿›åº¦å±•ç¤º
â”‚
â””â”€â”€ ç³»ç»Ÿé€šçŸ¥ï¼š
    â”œâ”€â”€ é‡è¦äº‹ä»¶é€šçŸ¥
    â”œâ”€â”€ é”™è¯¯è­¦å‘Šæç¤º
    â”œâ”€â”€ æˆå°±è§£é”é€šçŸ¥
    â””â”€â”€ æ›´æ–°æé†’ä¿¡æ¯
```

## 6. æµ‹è¯•éªŒæ”¶æ ‡å‡†

### 6.1 åŠŸèƒ½æµ‹è¯•è¦æ±‚

#### 6.1.1 æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•

```
åŠŸèƒ½æµ‹è¯•æ¸…å•ï¼š
â”œâ”€â”€ ç‰©å“ç®¡ç†ï¼š
â”‚   âœ“ ç‰©å“åˆ†ç±»æ­£ç¡®æ˜¾ç¤º
â”‚   âœ“ ç‰©å“ç½‘æ ¼å¸ƒå±€æ­£ç¡®
â”‚   âœ“ ç‰©å“è¯¦æƒ…æ•°æ®å‡†ç¡®
â”‚   âœ“ åº“å­˜æ•°é‡å®æ—¶æ›´æ–°
â”‚
â”œâ”€â”€ è®¾å¤‡ç®¡ç†ï¼š
â”‚   âœ“ è®¾å¤‡å»ºé€ åŠŸèƒ½æ­£å¸¸
â”‚   âœ“ è®¾å¤‡æ•°é‡è°ƒæ•´æ­£ç¡®
â”‚   âœ“ è®¾å¤‡çŠ¶æ€æ˜¾ç¤ºå‡†ç¡®
â”‚   âœ“ è‡ªåŠ¨åŒ–ç”Ÿäº§æ­£å¸¸
â”‚
â”œâ”€â”€ åˆ¶ä½œç³»ç»Ÿï¼š
â”‚   âœ“ æ‰‹åŠ¨åˆ¶ä½œåŠŸèƒ½æ­£å¸¸
â”‚   âœ“ åˆ¶ä½œé˜Ÿåˆ—ç®¡ç†æ­£ç¡®
â”‚   âœ“ è¿›åº¦æ˜¾ç¤ºå‡†ç¡®
â”‚   âœ“ ææ–™æ¶ˆè€—æ­£ç¡®
â”‚
â”œâ”€â”€ è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼š
â”‚   âœ“ ç‡ƒæ–™è‡ªåŠ¨è¡¥å……æ­£å¸¸
â”‚   âœ“ åŸæ–™è‡ªåŠ¨æ¶ˆè€—æ­£ç¡®
â”‚   âœ“ è®¾å¤‡è‡ªåŠ¨å¯åœæ­£å¸¸
â”‚   âœ“ ç”Ÿäº§è®¡ç®—å‡†ç¡®
â”‚
â””â”€â”€ æ•°æ®æŒä¹…åŒ–ï¼š
    âœ“ è‡ªåŠ¨ä¿å­˜åŠŸèƒ½æ­£å¸¸
    âœ“ æ‰‹åŠ¨ä¿å­˜åŠŸèƒ½æ­£å¸¸
    âœ“ æ•°æ®åŠ è½½æ­£ç¡®
    âœ“ å¤šå­˜æ¡£ç®¡ç†æ­£å¸¸
```

#### 6.1.2 è¾¹ç•Œæ¡ä»¶æµ‹è¯•

```
è¾¹ç•Œæµ‹è¯•åœºæ™¯ï¼š
â”œâ”€â”€ èµ„æºæé™ï¼š
â”‚   âœ“ åº“å­˜ä¸º0æ—¶çš„å¤„ç†
â”‚   âœ“ åº“å­˜è¾¾åˆ°ä¸Šé™çš„å¤„ç†
â”‚   âœ“ è´Ÿæ•°èµ„æºçš„é˜²æŠ¤
â”‚   âœ“ è¶…å¤§æ•°å€¼çš„å¤„ç†
â”‚
â”œâ”€â”€ è®¾å¤‡æé™ï¼š
â”‚   âœ“ è®¾å¤‡æ•°é‡ä¸º0çš„å¤„ç†
â”‚   âœ“ è®¾å¤‡æ•°é‡è¾¾åˆ°ä¸Šé™
â”‚   âœ“ æ‰€æœ‰è®¾å¤‡åœæœºçš„æƒ…å†µ
â”‚   âœ“ è®¾å¤‡æ•ˆç‡ä¸º0çš„å¤„ç†
â”‚
â”œâ”€â”€ æ—¶é—´æé™ï¼š
â”‚   âœ“ æ¸¸æˆæ—¶é—´è¶…é•¿çš„å¤„ç†
â”‚   âœ“ åˆ¶ä½œæ—¶é—´ä¸º0çš„å¤„ç†
â”‚   âœ“ ç³»ç»Ÿæ—¶é—´å¼‚å¸¸çš„å¤„ç†
â”‚   âœ“ ç¦»çº¿æ—¶é—´è¿‡é•¿çš„å¤„ç†
â”‚
â””â”€â”€ æ•°æ®æé™ï¼š
    âœ“ å­˜æ¡£å¤§å°è¶…é™çš„å¤„ç†
    âœ“ å­˜æ¡£æ•°é‡è¶…é™çš„å¤„ç†
    âœ“ æ•°æ®æŸåçš„æ¢å¤
    âœ“ ç‰ˆæœ¬ä¸å…¼å®¹çš„å¤„ç†
```

### 6.2 æ€§èƒ½æµ‹è¯•æ ‡å‡†

#### 6.2.1 å“åº”æ—¶é—´è¦æ±‚

```
æ€§èƒ½åŸºå‡†ï¼š
â”œâ”€â”€ ç•Œé¢å“åº”ï¼š
â”‚   âœ“ ç‚¹å‡»å“åº” < 100ms
â”‚   âœ“ é¡µé¢åˆ‡æ¢ < 300ms
â”‚   âœ“ æ•°æ®æ›´æ–° < 200ms
â”‚   âœ“ åŠ¨ç”»æµç•… 60fps
â”‚
â”œâ”€â”€ æ•°æ®å¤„ç†ï¼š
â”‚   âœ“ æ¸¸æˆå¾ªç¯ < 10ms
â”‚   âœ“ ä¿å­˜æ“ä½œ < 1000ms
â”‚   âœ“ åŠ è½½æ“ä½œ < 3000ms
â”‚   âœ“ è®¡ç®—æ›´æ–° < 50ms
â”‚
â”œâ”€â”€ å†…å­˜ä½¿ç”¨ï¼š
â”‚   âœ“ åŸºç¡€å†…å­˜ < 100MB
â”‚   âœ“ å³°å€¼å†…å­˜ < 200MB
â”‚   âœ“ å†…å­˜å¢é•¿ < 1MB/å°æ—¶
â”‚   âœ“ å†…å­˜é‡Šæ”¾åŠæ—¶
â”‚
â””â”€â”€ ç”µæ± æ¶ˆè€—ï¼š
    âœ“ å¾…æœºæ¨¡å¼ < 1%/å°æ—¶
    âœ“ æ´»è·ƒæ¨¡å¼ < 10%/å°æ—¶
    âœ“ åå°æ¨¡å¼ < 2%/å°æ—¶
    âœ“ å……ç”µæ—¶æ— è¿‡çƒ­
```

#### 6.2.2 å‹åŠ›æµ‹è¯•è¦æ±‚

```
å‹åŠ›æµ‹è¯•åœºæ™¯ï¼š
â”œâ”€â”€ æ•°æ®é‡å‹åŠ›ï¼š
â”‚   âœ“ 1000+ è®¾å¤‡å®ä¾‹
â”‚   âœ“ 10000+ ç‰©å“åº“å­˜
â”‚   âœ“ 100+ åˆ¶ä½œé˜Ÿåˆ—ä»»åŠ¡
â”‚   âœ“ é•¿æ—¶é—´è¿ç»­è¿è¡Œ
â”‚
â”œâ”€â”€ æ“ä½œé¢‘ç‡å‹åŠ›ï¼š
â”‚   âœ“ å¿«é€Ÿç‚¹å‡»æµ‹è¯•
â”‚   âœ“ å¤§é‡å¹¶å‘æ“ä½œ
â”‚   âœ“ é¢‘ç¹ä¿å­˜åŠ è½½
â”‚   âœ“ å¿«é€Ÿåˆ‡æ¢ç•Œé¢
â”‚
â”œâ”€â”€ èµ„æºå‹åŠ›ï¼š
â”‚   âœ“ ä½å†…å­˜è®¾å¤‡æµ‹è¯•
â”‚   âœ“ å­˜å‚¨ç©ºé—´ä¸è¶³æµ‹è¯•
â”‚   âœ“ ç”µé‡ä¸è¶³æµ‹è¯•
â”‚   âœ“ ç½‘ç»œä¸ç¨³å®šæµ‹è¯•
â”‚
â””â”€â”€ æ—¶é—´å‹åŠ›ï¼š
    âœ“ 7Ã—24å°æ—¶ç¨³å®šè¿è¡Œ
    âœ“ é¢‘ç¹å‰åå°åˆ‡æ¢
    âœ“ é•¿æœŸæ•°æ®ç´¯ç§¯
    âœ“ ç³»ç»Ÿèµ„æºç«äº‰
```

### 6.3 å…¼å®¹æ€§æµ‹è¯•è¦æ±‚

#### 6.3.1 è®¾å¤‡å…¼å®¹æ€§

```
è®¾å¤‡æµ‹è¯•çŸ©é˜µï¼š
â”œâ”€â”€ iOSè®¾å¤‡ï¼š
â”‚   âœ“ iPhone SE (4.7")
â”‚   âœ“ iPhone 12 (6.1")
â”‚   âœ“ iPhone 12 Pro Max (6.7")
â”‚   âœ“ iPad (10.2")
â”‚
â”œâ”€â”€ Androidè®¾å¤‡ï¼š
â”‚   âœ“ å°å±è®¾å¤‡ (5.0"-5.5")
â”‚   âœ“ æ ‡å‡†è®¾å¤‡ (5.5"-6.0")
â”‚   âœ“ å¤§å±è®¾å¤‡ (6.0"-6.7")
â”‚   âœ“ å¹³æ¿è®¾å¤‡ (7"+)
â”‚
â”œâ”€â”€ ç³»ç»Ÿç‰ˆæœ¬ï¼š
â”‚   âœ“ iOS 12+ (æœ€ä½æ”¯æŒ)
â”‚   âœ“ iOS 15+ (æ¨è)
â”‚   âœ“ Android 7+ (æœ€ä½æ”¯æŒ)
â”‚   âœ“ Android 10+ (æ¨è)
â”‚
â””â”€â”€ ç¡¬ä»¶é…ç½®ï¼š
    âœ“ 2GB RAM (æœ€ä½)
    âœ“ 4GB RAM (æ¨è)
    âœ“ 32GB å­˜å‚¨ (æœ€ä½)
    âœ“ 64GB å­˜å‚¨ (æ¨è)
```

## 7. å‘å¸ƒå’Œç»´æŠ¤è®¡åˆ’

### 7.1 ç‰ˆæœ¬å‘å¸ƒè®¡åˆ’

#### 7.1.1 MVP ç‰ˆæœ¬ (v1.0)

```
v1.0 åŠŸèƒ½æ¸…å•ï¼š
â”œâ”€â”€ æ ¸å¿ƒåŠŸèƒ½ (å¿…é¡»):
â”‚   âœ“ 7å¤§åˆ†ç±»ç‰©å“ç®¡ç†
â”‚   âœ“ ç®€åŒ–ç‰©å“è¯¦æƒ…é¡µé¢
â”‚   âœ“ åŸºç¡€è®¾å¤‡ç®¡ç†
â”‚   âœ“ æ‰‹åŠ¨å’Œè‡ªåŠ¨ç”Ÿäº§
â”‚   âœ“ æœ¬åœ°å­˜å‚¨ç³»ç»Ÿ
â”‚
â”œâ”€â”€ åŸºç¡€åŠŸèƒ½ (å¿…é¡»):
â”‚   âœ“ åˆ¶ä½œé˜Ÿåˆ—ç³»ç»Ÿ
â”‚   âœ“ ç§‘æŠ€ç ”å‘ç³»ç»Ÿ
â”‚   âœ“ æ–°æ‰‹å¼•å¯¼ç³»ç»Ÿ
â”‚   âœ“ åŸºç¡€è®¾ç½®åŠŸèƒ½
â”‚
â”œâ”€â”€ ä¼˜åŒ–åŠŸèƒ½ (å¯é€‰):
â”‚   âœ“ æ€§èƒ½ä¼˜åŒ–
â”‚   âœ“ åŠ¨ç”»æ•ˆæœ
â”‚   âœ“ éŸ³æ•ˆæ”¯æŒ
â”‚   âœ“ å¤šè¯­è¨€æ”¯æŒ
â”‚
â””â”€â”€ å‘å¸ƒç›®æ ‡:
    âœ“ iOS App Store
    âœ“ Google Play Store
    âœ“ åŸºç¡€ç”¨æˆ·è·å–
    âœ“ ç”¨æˆ·åé¦ˆæ”¶é›†
```

#### 7.1.2 è¿­ä»£ç‰ˆæœ¬è®¡åˆ’

```
ç‰ˆæœ¬è¿­ä»£è·¯çº¿å›¾ï¼š
â”œâ”€â”€ v1.1 (å‘å¸ƒå1ä¸ªæœˆ):
â”‚   â”œâ”€â”€ Bugä¿®å¤å’Œæ€§èƒ½ä¼˜åŒ–
â”‚   â”œâ”€â”€ ç”¨æˆ·åé¦ˆåŠŸèƒ½æ”¹è¿›
â”‚   â”œâ”€â”€ æ–°å¢æˆå°±ç³»ç»Ÿ
â”‚   â””â”€â”€ ç¤¾äº¤åˆ†äº«åŠŸèƒ½
â”‚
â”œâ”€â”€ v1.2 (å‘å¸ƒå3ä¸ªæœˆ):
â”‚   â”œâ”€â”€ æ–°å¢é«˜çº§è®¾å¤‡ç±»å‹
â”‚   â”œâ”€â”€ æ‰©å±•ç§‘æŠ€æ ‘å†…å®¹
â”‚   â”œâ”€â”€ æ–°å¢ç»Ÿè®¡åˆ†æåŠŸèƒ½
â”‚   â””â”€â”€ æ”¹è¿›UIç•Œé¢
â”‚
â”œâ”€â”€ v1.3 (å‘å¸ƒå6ä¸ªæœˆ):
â”‚   â”œâ”€â”€ æ–°å¢å†›äº‹è£…å¤‡ç³»ç»Ÿ
â”‚   â”œâ”€â”€ æ‰©å±•åŒ–å·¥ç”Ÿäº§é“¾
â”‚   â”œâ”€â”€ æ–°å¢æŒ‘æˆ˜æ¨¡å¼
â”‚   â””â”€â”€ äº‘å­˜æ¡£æ”¯æŒ
â”‚
â””â”€â”€ v2.0 (å‘å¸ƒå1å¹´):
    â”œâ”€â”€ å¤šäººåˆä½œæ¨¡å¼
    â”œâ”€â”€ å·¥å‚è®¾è®¡åˆ†äº«
    â”œâ”€â”€ é«˜çº§è‡ªåŠ¨åŒ–ç³»ç»Ÿ
    â””â”€â”€ 3Då¯è§†åŒ–ç•Œé¢
```

### 7.2 è¿è¥ç»´æŠ¤è®¡åˆ’

#### 7.2.1 æ—¥å¸¸ç»´æŠ¤ä»»åŠ¡

```
ç»´æŠ¤ä»»åŠ¡æ¸…å•ï¼š
â”œâ”€â”€ æ¯æ—¥ä»»åŠ¡:
â”‚   âœ“ ç›‘æ§æœåŠ¡å™¨çŠ¶æ€
â”‚   âœ“ æ£€æŸ¥å´©æºƒæŠ¥å‘Š
â”‚   âœ“ å›å¤ç”¨æˆ·åé¦ˆ
â”‚   âœ“ ç›‘æ§å…³é”®æŒ‡æ ‡
â”‚
â”œâ”€â”€ æ¯å‘¨ä»»åŠ¡:
â”‚   âœ“ åˆ†æç”¨æˆ·æ•°æ®
â”‚   âœ“ æ›´æ–°å†…å®¹è®¡åˆ’
â”‚   âœ“ Bugä¿®å¤ä¼˜å…ˆçº§
â”‚   âœ“ ç«å“åˆ†æè°ƒç ”
â”‚
â”œâ”€â”€ æ¯æœˆä»»åŠ¡:
â”‚   âœ“ ç‰ˆæœ¬å‘å¸ƒè®¡åˆ’
â”‚   âœ“ åŠŸèƒ½éœ€æ±‚è¯„ä¼°
â”‚   âœ“ æŠ€æœ¯å€ºåŠ¡æ¸…ç†
â”‚   âœ“ å›¢é˜Ÿç»©æ•ˆè¯„ä¼°
â”‚
â””â”€â”€ æ¯å­£åº¦ä»»åŠ¡:
    âœ“ äº§å“è·¯çº¿å›¾è°ƒæ•´
    âœ“ æŠ€æœ¯æ¶æ„å‡çº§
    âœ“ å¸‚åœºç­–ç•¥è°ƒæ•´
    âœ“ å›¢é˜Ÿèƒ½åŠ›å»ºè®¾
```

#### 7.2.2 ç”¨æˆ·æ”¯æŒä½“ç³»

```
ç”¨æˆ·æ”¯æŒè®¡åˆ’ï¼š
â”œâ”€â”€ æŠ€æœ¯æ”¯æŒ:
â”‚   â”œâ”€â”€ å¸¸è§é—®é¢˜è§£ç­”
â”‚   â”œâ”€â”€ åœ¨çº¿å®¢æœç³»ç»Ÿ
â”‚   â”œâ”€â”€ ç”¨æˆ·æ‰‹å†Œæ–‡æ¡£
â”‚   â””â”€â”€ è§†é¢‘æ•™ç¨‹åˆ¶ä½œ
â”‚
â”œâ”€â”€ ç¤¾åŒºè¿è¥:
â”‚   â”œâ”€â”€ å®˜æ–¹ç¤¾åŒºå»ºè®¾
â”‚   â”œâ”€â”€ ç”¨æˆ·æ´»åŠ¨ç­–åˆ’
â”‚   â”œâ”€â”€ å†…å®¹åˆ›ä½œæ¿€åŠ±
â”‚   â””â”€â”€ æ„è§åé¦ˆæ”¶é›†
â”‚
â”œâ”€â”€ é—®é¢˜å¤„ç†:
â”‚   â”œâ”€â”€ BugæŠ¥å‘Šå¤„ç†æµç¨‹
â”‚   â”œâ”€â”€ åŠŸèƒ½éœ€æ±‚æ”¶é›†
â”‚   â”œâ”€â”€ ç”¨æˆ·æŠ•è¯‰å¤„ç†
â”‚   â””â”€â”€ æ•°æ®æ¢å¤æœåŠ¡
â”‚
â””â”€â”€ æŒç»­æ”¹è¿›:
    â”œâ”€â”€ ç”¨æˆ·ä½“éªŒä¼˜åŒ–
    â”œâ”€â”€ åŠŸèƒ½è¿­ä»£å‡çº§
    â”œâ”€â”€ æ€§èƒ½æŒç»­ä¼˜åŒ–
    â””â”€â”€ æ–°æŠ€æœ¯åº”ç”¨æ¢ç´¢
```

---

## é™„å½•

### A. æœ¯è¯­è¡¨

- **ç‰©å“ (Item)**: æ¸¸æˆä¸­çš„æ‰€æœ‰å¯ç®¡ç†å¯¹è±¡
- **è®¾å¤‡ (Equipment)**: ç”¨äºç”Ÿäº§ç‰©å“çš„å»ºç­‘
- **è®¾æ–½ (Facility)**: è®¾å¤‡çš„åŒä¹‰è¯ï¼Œåœ¨ç•Œé¢ä¸­ä½¿ç”¨
- **é…æ–¹ (Recipe)**: ç‰©å“çš„åˆ¶ä½œæ–¹æ³•å’Œææ–™éœ€æ±‚
- **ç§‘æŠ€åŒ… (Science Pack)**: ç”¨äºç ”å‘ç§‘æŠ€çš„ç‰¹æ®Šç‰©å“
- **å‡€å¢é•¿ (Net Growth)**: ç‰©å“çš„äº§é‡å‡å»æ¶ˆè€—é‡

### B. æ•°æ®å­—å…¸

è¯¦ç»†çš„æ•°æ®ç»“æ„å®šä¹‰å’Œå­—æ®µè¯´æ˜

### C. API æ¥å£æ–‡æ¡£

å†…éƒ¨æ•°æ®æ¥å£å’Œæ–¹æ³•å®šä¹‰

### D. è®¾è®¡èµ„æº

UI è®¾è®¡ç¨¿ã€å›¾æ ‡èµ„æºã€åŠ¨ç”»è§„èŒƒç­‰

---

**æ–‡æ¡£ä¿¡æ¯**

- ç‰ˆæœ¬ï¼šv2.7
- æ›´æ–°æ—¥æœŸï¼š2025 å¹´ 1 æœˆ 27 æ—¥
- æ–‡æ¡£çŠ¶æ€ï¼šå·²æ›´æ–° - å®Œå–„å­˜å‚¨è®¾å¤‡æ¶ˆè€—æœºåˆ¶ï¼Œæ·»åŠ åº“å­˜æ£€æŸ¥é€»è¾‘
- ä¸»è¦æ›´æ–°ï¼š
  - ç‰©å“åˆ†ç±»è°ƒæ•´ä¸ºåŸºäº Factorio çš„ 6 å¤§åˆ†ç±»
  - é…æ–¹æ•°æ®ç»“æ„é€‚é… Factorio æ ¼å¼
  - ç§‘æŠ€ç³»ç»ŸåŸºäº Factorio ç§‘æŠ€åŒ…
  - ç”Ÿäº§è®¾å¤‡åŸºäº Factorio å®é™…è®¾å¤‡ç±»å‹
  - æ•°æ®å­˜å‚¨é€‚é… Factorio æ•°æ®ç»“æ„
  - **æ–°å¢åº“å­˜æ›´æ–°ç³»ç»Ÿ**ï¼šç´¯ç§¯å°æ•°æ–¹æ¡ˆå¤„ç†éæ•´æ•°äº§é‡
  - **æ–°å¢å¤šè®¾å¤‡ç”Ÿäº§å¤„ç†**ï¼šæ”¯æŒå¤šè®¾å¤‡åŒæ—¶ç”Ÿäº§åŒä¸€ç‰©å“
  - **æ–°å¢æ˜¾ç¤ºå¤„ç†æ–¹æ¡ˆ**ï¼šå‹å¥½æ˜¾ç¤ºéæ•´æ•°äº§é‡
  - **æ–°å¢æ€§èƒ½ä¼˜åŒ–å®ç°**ï¼šæ‰¹é‡æ›´æ–°å’Œå¯¹è±¡æ± ä¼˜åŒ–
  - **æ–°å¢æ‰‹åŠ¨ç”Ÿäº§é˜Ÿåˆ—ç³»ç»Ÿ**ï¼šåŸºäº Factorio Wiki çš„å®Œæ•´æ‰‹åŠ¨åˆ¶ä½œæœºåˆ¶
  - **æ–°å¢ææ–™é¢„æ‰£æœºåˆ¶**ï¼šåˆ¶ä½œå‰é¢„æ‰£ææ–™ï¼Œå–æ¶ˆæ—¶è¿”è¿˜
  - **æ–°å¢é“¾å¼åˆ¶ä½œæ”¯æŒ**ï¼šè‡ªåŠ¨åˆ¶ä½œä¸­é—´äº§å“
  - **æ–°å¢å–æ¶ˆæ“ä½œæœºåˆ¶**ï¼šæ”¯æŒå•ä¸ªã€5 ä¸ªã€å…¨éƒ¨å–æ¶ˆ
  - **æ–°å¢ç‰¹æ®Šé™åˆ¶è§„åˆ™**ï¼šæ— æ³•æ‰‹åŠ¨åˆ¶ä½œçš„ç‰©å“ç±»å‹
  - **æ–°å¢åº“å­˜æ»¡å¤„ç†**ï¼šåº“å­˜æ»¡æ—¶æš‚åœåˆ¶ä½œ
  - **æ–°å¢é“¾å¼åˆ¶ä½œä¼˜åŠ¿**ï¼šä¸è‡ªåŠ¨åŒ–åˆ¶ä½œçš„åŒºåˆ«è¯´æ˜
  - **æ–°å¢ç”¨æˆ·ç•Œé¢è®¾è®¡**ï¼šæ‰‹åŠ¨åˆ¶ä½œé˜Ÿåˆ—ç•Œé¢è§„èŒƒ
  - **è°ƒæ•´é…æ–¹å±•ç¤ºä½ç½®**ï¼šé…æ–¹ä¿¡æ¯åŒºåŸŸç§»è‡³ç‰©å“ä»‹ç»ä¸‹æ–¹ï¼Œä¼˜åŒ–ä¿¡æ¯å±‚æ¬¡ç»“æ„
  - **ä¼˜åŒ–ç‰©å“å¡ç‰‡è®¾è®¡**ï¼šå°†å³ä¸Šè§’æ•°é‡å¾½ç« æ”¹ä¸ºçŠ¶æ€å¾½ç« ï¼Œæ¶ˆé™¤ä¸åº•éƒ¨åº“å­˜æ•°é‡çš„é‡å¤ä¿¡æ¯
  - **æ–°å¢çŠ¶æ€å¾½ç« ç³»ç»Ÿ**ï¼šåŸºäºä¼˜å…ˆçº§çš„çŠ¶æ€åˆ¤æ–­é€»è¾‘ï¼Œæä¾›æ›´ç›´è§‚çš„ç‰©å“çŠ¶æ€æŒ‡ç¤º
  - **æ–°å¢åº“å­˜ä¸Šé™ç³»ç»Ÿ**ï¼šæ”¯æŒé€šè¿‡ç®±å­/å‚¨ç½ç®¡ç†ç‰©å“å­˜å‚¨å®¹é‡ï¼Œè¾¾åˆ°ä¸Šé™æ—¶è‡ªåŠ¨åœæ­¢ç”Ÿäº§
  - **æ–°å¢å­˜å‚¨ç®¡ç†ç•Œé¢**ï¼šåœ¨ç‰©å“è¯¦æƒ…é¡µæ·»åŠ å­˜å‚¨ç®¡ç†åŒºåŸŸï¼Œæ”¯æŒæ·»åŠ /ç§»é™¤å­˜å‚¨è®¾å¤‡
  - **æ–°å¢åº“å­˜æ»¡çŠ¶æ€**ï¼šåœ¨çŠ¶æ€å¾½ç« ç³»ç»Ÿä¸­æ·»åŠ åº“å­˜æ»¡çŠ¶æ€ï¼Œä¼˜å…ˆçº§ä»…æ¬¡äºç»´æŠ¤çŠ¶æ€
  - **å®Œå–„å­˜å‚¨è®¾å¤‡æ¶ˆè€—æœºåˆ¶**ï¼šæ·»åŠ è®¾å¤‡æ—¶ç›´æ¥æ¶ˆè€—ç®±å­/å‚¨ç½åº“å­˜ï¼Œæ— åº“å­˜æ—¶æ— æ³•æ·»åŠ 
  - **æ–°å¢åº“å­˜æ£€æŸ¥é€»è¾‘**ï¼šæ·»åŠ è®¾å¤‡å‰æ£€æŸ¥åº“å­˜ï¼ŒæŒ‰é’®çŠ¶æ€æ ¹æ®åº“å­˜æƒ…å†µåŠ¨æ€è°ƒæ•´
- ä¸‹ä¸€æ¬¡æ›´æ–°ï¼šæ ¹æ®å¼€å‘è¿›åº¦å’Œç”¨æˆ·åé¦ˆè¿›è¡Œè°ƒæ•´
