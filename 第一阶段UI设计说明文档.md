# 第一阶段UI设计说明文档

## 🎨 设计理念

### 核心原则
1. **清晰易懂** - 界面信息层次分明，功能一目了然
2. **高效操作** - 减少操作步骤，提供快捷方式
3. **视觉反馈** - 即时响应用户操作，状态变化明显
4. **工业美学** - 采用科技感的设计风格，符合游戏主题

### 设计风格
- **主题色彩**：深色背景 + 科技蓝/橙色点缀
- **视觉风格**：扁平化设计 + 轻微的新拟态元素
- **图标风格**：线性图标为主，关键元素使用面性图标
- **动效原则**：简洁流畅，功能性优先

## 📱 整体布局

### 主界面布局
```
┌─────────────────────────────────────────────────────┐
│                    顶部状态栏                        │
│  [电力: 900/1200 kW] [时间: 12:34] [菜单]          │
├─────────────────────────────────────────────────────┤
│                                                     │
│                    主内容区域                        │
│                                                     │
│                 (根据选中模块变化)                   │
│                                                     │
│                                                     │
├─────────────────────────────────────────────────────┤
│     [生产]          [设施]          [科技]          │
│       📦              🏭              🔬            │
└─────────────────────────────────────────────────────┘
```

### 响应式设计
- **桌面端** (>1200px): 完整布局，侧边栏展开
- **平板端** (768-1200px): 紧凑布局，侧边栏可收起
- **移动端** (<768px): 单列布局，底部导航固定

## 🏭 生产模块UI

### 1. 主界面设计

#### 顶部分类Tab
```
┌──────────────────────────────────────────────────────────────────────┐
│ [物流] [生产] [中间产品] [战斗] [科技]                        [搜索🔍] │
└──────────────────────────────────────────────────────────────────────┘
```

**分类详情**（参考Factorio）：
1. **物流 (Logistics)**
   - 容器：各类箱子、储罐
   - 传送带：各级传送带、地下传送带、分流器
   - 机械臂：各类机械臂（插入器）
   - 铁路：铁轨、火车、信号
   - 管道：管道、地下管道、泵
   - 电力：电线杆、配电站
   - 机器人：物流/建设机器人、机器人框架

2. **生产 (Production)**
   - 电力：发电设备（蒸汽机、太阳能、核能）
   - 采矿：各类采矿机
   - 冶炼：熔炉、钢炉、电炉
   - 制造：装配机1-3型
   - 化工：炼油厂、化工厂
   - 模块：速度/效率/产能模块

3. **中间产品 (Intermediate)**
   - 原材料：铁板、铜板、钢板、石砖
   - 零件：齿轮、铁棒、铜线
   - 电路：电路板、高级电路、处理器
   - 流体：各类油品、硫酸、润滑油
   - 高级材料：塑料、电池、火箭燃料

4. **战斗 (Combat)**
   - 武器：手枪、冲锋枪、火箭筒、火焰喷射器
   - 弹药：各类子弹、炮弹、火箭弹
   - 装甲：轻型/重型/模块化装甲
   - 防御：围墙、炮塔、地雷
   - 装备：护盾、激光防御、外骨骼

5. **科技 (Science)**
   - 科技包：红、绿、蓝、紫、黄、白瓶
   - 特殊物品：卫星、火箭部件

**设计规范**：
- Tab高度：48px
- 选中状态：底部3px高亮条（主题色） + 文字变色
- 未选中状态：灰色文字(#666)
- 悬停状态：文字变亮(#999)
- Tab图标：每个分类前可添加16x16的小图标
- 搜索框：右侧固定，支持实时搜索和筛选

#### 物品网格
```
┌────────┬────────┬────────┬────────┐
│  [图]  │  [图]  │  [图]  │  [图]  │
│ 铁矿石 │ 铜矿石 │  煤炭  │  石头  │
│  x128  │  x64   │  x256  │  x32   │
├────────┼────────┼────────┼────────┤
│  [图]  │  [图]  │  [图]  │  [图]  │
│  铁板  │  铜板  │  钢板  │ 电路板 │
│  x48   │  x72   │  x16   │  x24   │
└────────┴────────┴────────┴────────┘
```

**物品卡片设计**：
- 尺寸：120x120px (桌面) / 80x80px (移动)
- 内边距：12px
- 圆角：8px
- 背景：深灰色 (#2a2a2a)
- 悬停效果：边框高亮 + 轻微放大(1.05x)
- 点击效果：按下缩小(0.95x)

**未解锁物品**：
- 降低透明度至40%
- 添加锁图标
- 禁用点击交互

### 2. 物品详情弹窗

```
┌─────────────────────────────────────────────┐
│ 铁板                                    [X] │
├─────────────────────────────────────────────┤
│  ┌─────┐                                    │
│  │     │  铁板                              │
│  │ 图标 │  基础的金属材料                    │
│  │     │  库存: 128                         │
│  └─────┘  生产速率: +5.2/分钟              │
│                                             │
├─────────────────────────────────────────────┤
│ 生产配方                                    │
│ ┌─────────────────────────────────────────┐ │
│ │ [铁矿石 x1] ──→ [熔炉] ──→ [铁板 x1]    │ │
│ │ 耗时: 3.2秒   电力: 90kW                │ │
│ └─────────────────────────────────────────┘ │
├─────────────────────────────────────────────┤
│ 用途                                        │
│ • 齿轮 (需要2个)                           │
│ • 传送带 (需要1个)                         │
│ • 装配机 (需要9个)                         │
├─────────────────────────────────────────────┤
│            [立即生产]  [关闭]               │
└─────────────────────────────────────────────┘
```

**弹窗规范**：
- 宽度：600px (桌面) / 90% (移动)
- 最大高度：80vh
- 背景模糊：blur(10px)
- 动画：从下方滑入 (300ms ease-out)

## 🏗️ 设施模块UI

### 1. 设施分类侧栏

```
┌─────────────┐
│ 设施分类    │
├─────────────┤
│ ⚡ 电力设施  │
│ ⛏️ 采集设施  │
│ 🔬 研究设施  │
│ 🏭 特殊设施  │
└─────────────┘
```

**设计规范**：
- 宽度：200px
- 分类项高度：48px
- 选中背景：rgba(66, 165, 245, 0.1)
- 图标尺寸：24x24px

### 2. 设施列表

```
┌───────────────────────────────────────────────────┐
│ 电力设施                                          │
├───────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────┐   │
│ │ [图] 蒸汽机        运行中 ● (3/3)          │   │
│ │      发电: 900kW   效率: 98%               │   │
│ │      [－] 3 [＋]   [详情]                  │   │
│ └─────────────────────────────────────────────┘   │
│ ┌─────────────────────────────────────────────┐   │
│ │ [图] 太阳能板      运行中 ● (5/10)        │   │
│ │      发电: 300kW   效率: 60% (夜晚)        │   │
│ │      [－] 5 [＋]   [详情]                  │   │
│ └─────────────────────────────────────────────┘   │
└───────────────────────────────────────────────────┘
```

**设施卡片设计**：
- 高度：80px
- 内边距：16px
- 状态指示器：8px圆点（绿色=运行，黄色=低效，红色=停止）
- 数量控制：步进器按钮，支持长按快速增减

### 3. 电力管理面板

```
┌───────────────────────────────────────────────────┐
│               电力管理中心                         │
├───────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐              │
│  │ 总发电量     │  │ 总消耗量     │              │
│  │   1,200      │  │    900       │              │
│  │     kW       │  │     kW       │              │
│  └──────────────┘  └──────────────┘              │
│                                                   │
│  电网效率 ████████████████░░░░  75%              │
│                                                   │
│  ⚠️ 电力富余 300kW，建议添加更多生产设施          │
├───────────────────────────────────────────────────┤
│  发电设施                          消耗设施        │
│  • 蒸汽机 x3      900kW          • 采掘机 x5     │
│  • 太阳能板 x5    300kW          • 装配机 x3     │
│                                  • 电炉 x2       │
├───────────────────────────────────────────────────┤
│         [添加发电设施]  [优化电网]                │
└───────────────────────────────────────────────────┘
```

**面板设计**：
- 数据卡片：使用渐变背景突出重要数据
- 进度条：使用渐变色（绿→黄→红）表示状态
- 图表：考虑添加实时功率曲线图

## 🔬 科技模块UI

### 1. 科技树视图

```
┌───────────────────────────────────────────────────┐
│  [列表视图] [树状视图] [搜索]          [研究队列] │
├───────────────────────────────────────────────────┤
│                                                   │
│    ┌─────┐                                        │
│    │自动化│ ─────┐                                │
│    └─────┘      │                                │
│                 ├──→ ┌─────┐                      │
│    ┌─────┐      │    │物流1│ ───→ ┌─────┐        │
│    │电力 │ ─────┘    └─────┘      │物流2│        │
│    └─────┘                        └─────┘        │
│       ↓                                           │
│    ┌─────┐                                        │
│    │电池 │                                        │
│    └─────┘                                        │
│                                                   │
└───────────────────────────────────────────────────┘
```

**科技节点设计**：
- 尺寸：80x80px
- 状态样式：
  - 已解锁：实心填充，饱和度100%
  - 可研究：虚线边框，饱和度70%
  - 未解锁：灰色填充，饱和度20%
- 连线：贝塞尔曲线，箭头指向
- 动画：解锁时光波扩散效果

### 2. 科技详情面板

```
┌─────────────────────────────────────┐
│ 物流系统 1                          │
├─────────────────────────────────────┤
│ [图标]                              │
│                                     │
│ 解锁基础的物流系统                  │
│                                     │
│ 前置科技：                          │
│ • ✓ 自动化                         │
│ • ✓ 电力系统                       │
│                                     │
│ 研究成本：                          │
│ • 🔴 红色科技瓶 x10                │
│ • 🟢 绿色科技瓶 x10                │
│                                     │
│ 解锁内容：                          │
│ • 传送带                           │
│ • 机械臂                           │
│ • 分流器                           │
│                                     │
│ 研究时间：30秒                      │
│                                     │
│ [加入研究队列]  [立即研究]         │
└─────────────────────────────────────┘
```

### 3. 研究队列

```
┌─────────────────────────────────────┐
│ 研究队列 (2/5)                      │
├─────────────────────────────────────┤
│ 1. 物流系统1  ████████░░░░ 65% 🔬   │
│    剩余时间: 10秒                   │
│                                     │
│ 2. 军事科技                         │
│    预计开始: 10秒后                 │
│                                     │
│ [暂停研究] [清空队列]               │
└─────────────────────────────────────┘
```

**队列设计**：
- 支持拖拽重排
- 进度条实时更新
- 显示预计完成时间

## 🎯 交互设计

### 1. 操作反馈

#### 点击反馈
- **按钮**：缩放动画 (scale: 0.95)
- **卡片**：阴影加深 + 轻微下沉
- **Tab**：即时切换，无延迟

#### 状态变化
- **数值变化**：使用数字滚动动画
- **进度更新**：平滑过渡，避免跳变
- **状态切换**：淡入淡出效果

### 2. 快捷操作

#### 键盘快捷键
- `Tab` - 切换底部导航
- `1/2/3` - 快速切换到对应模块
- `Esc` - 关闭当前弹窗
- `Space` - 暂停/继续游戏
- `S` - 快速保存

#### 鼠标操作
- **右键点击**：显示快捷菜单
- **中键点击**：快速查看详情
- **滚轮**：缩放科技树视图
- **拖拽**：移动科技树视图、调整队列顺序

### 3. 提示系统

#### 工具提示 (Tooltip)
```
┌─────────────────────┐
│ 电力采掘机          │
│ 消耗: 90kW         │
│ 产出: 0.5矿石/秒    │
│ 效率: 85%          │
└─────────────────────┘
```
- 延迟显示：鼠标悬停500ms
- 跟随鼠标，不遮挡目标
- 包含关键信息

#### 新手引导
- 首次进入显示操作提示
- 高亮重要UI元素
- 分步骤引导完成首个任务

## 🎨 视觉规范

### 1. 色彩系统

#### 主色调
- **主色**：#2196F3 (科技蓝)
- **辅助色**：#FF9800 (工业橙)
- **背景色**：#1a1a1a (深灰)
- **表面色**：#2a2a2a (中灰)
- **文字色**：#ffffff (主要) / #b0b0b0 (次要)

#### 状态色
- **成功**：#4CAF50 (绿色)
- **警告**：#FFC107 (黄色)
- **错误**：#F44336 (红色)
- **信息**：#2196F3 (蓝色)

### 2. 字体规范

#### 字体选择
- **主字体**：'Roboto', 'Microsoft YaHei', sans-serif
- **等宽字体**：'Roboto Mono', 'Consolas', monospace

#### 字号规范
- **标题**：24px / 32px
- **副标题**：18px / 20px
- **正文**：14px / 16px
- **辅助文字**：12px
- **最小字号**：10px (仅用于标注)

### 3. 间距系统

使用8px基础网格系统：
- **极小**：4px
- **小**：8px
- **中**：16px
- **大**：24px
- **极大**：32px

### 4. 阴影系统

```css
/* 轻微阴影 */
box-shadow: 0 2px 4px rgba(0,0,0,0.1);

/* 中等阴影 */
box-shadow: 0 4px 8px rgba(0,0,0,0.15);

/* 深度阴影 */
box-shadow: 0 8px 16px rgba(0,0,0,0.2);

/* 浮动阴影 */
box-shadow: 0 12px 24px rgba(0,0,0,0.25);
```

## 📱 响应式设计

### 断点设置
```scss
$mobile: 480px;
$tablet: 768px;
$desktop: 1024px;
$wide: 1440px;
```

### 布局适配

#### 移动端适配
- 单列布局
- 底部导航固定
- 弹窗全屏显示
- 触摸手势支持

#### 平板适配
- 双列布局
- 侧边栏可收起
- 弹窗居中显示
- 支持横竖屏切换

#### 桌面适配
- 多列布局
- 侧边栏常驻
- 支持多窗口
- 键鼠操作优化

## 🔧 组件库规范

### 1. 基础组件

#### Button 按钮
```typescript
interface ButtonProps {
  variant: 'primary' | 'secondary' | 'ghost';
  size: 'small' | 'medium' | 'large';
  disabled?: boolean;
  loading?: boolean;
  icon?: ReactNode;
  onClick?: () => void;
}
```

#### Card 卡片
```typescript
interface CardProps {
  title?: string;
  actions?: ReactNode;
  hoverable?: boolean;
  onClick?: () => void;
}
```

#### Dialog 对话框
```typescript
interface DialogProps {
  open: boolean;
  title: string;
  onClose: () => void;
  maxWidth?: 'sm' | 'md' | 'lg';
  fullScreen?: boolean;
}
```

### 2. 业务组件

#### ItemCard 物品卡片
```typescript
interface ItemCardProps {
  item: Item;
  quantity?: number;
  locked?: boolean;
  selected?: boolean;
  onClick?: (item: Item) => void;
}
```

#### FacilityStatus 设施状态
```typescript
interface FacilityStatusProps {
  facility: Facility;
  status: 'running' | 'stopped' | 'warning';
  efficiency: number;
  compact?: boolean;
}
```

#### TechNode 科技节点
```typescript
interface TechNodeProps {
  technology: Technology;
  state: 'locked' | 'available' | 'researching' | 'completed';
  progress?: number;
  onClick?: (tech: Technology) => void;
}
```

## 🚀 动画规范

### 1. 过渡动画

#### 基础过渡
```css
.transition-all {
  transition: all 0.3s ease;
}

.transition-fast {
  transition: all 0.15s ease;
}

.transition-slow {
  transition: all 0.5s ease;
}
```

#### 自定义缓动
```css
.ease-out-back {
  transition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
}

.ease-in-out-smooth {
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}
```

### 2. 关键帧动画

#### 脉冲动画
```css
@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.8; }
}
```

#### 滑入动画
```css
@keyframes slideIn {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
```

#### 旋转加载
```css
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
```

## 📋 UI组件清单

### 必需组件
- [x] 底部导航栏 (BottomNav)
- [x] 物品网格 (ItemGrid)
- [x] 物品详情 (ItemDetail)
- [x] 设施列表 (FacilityList)
- [x] 电力面板 (PowerPanel)
- [x] 科技树 (TechTree)
- [x] 研究队列 (ResearchQueue)
- [x] 进度条 (ProgressBar)
- [x] 状态指示器 (StatusIndicator)
- [x] 数量选择器 (QuantitySelector)

### 通用组件
- [x] 按钮 (Button)
- [x] 卡片 (Card)
- [x] 对话框 (Dialog)
- [x] 标签页 (Tabs)
- [x] 工具提示 (Tooltip)
- [x] 加载器 (Loader)
- [x] 空状态 (EmptyState)
- [x] 错误边界 (ErrorBoundary)

## 🎯 设计交付物

### 1. 设计文件
- **Figma文件**：包含所有页面和组件
- **图标集**：SVG格式，支持主题色
- **切图资源**：2x、3x分辨率

### 2. 样式指南
- **组件库文档**：Storybook展示
- **设计令牌**：JSON格式的设计变量
- **使用示例**：典型场景的UI模板

### 3. 原型演示
- **交互原型**：Figma/Principle
- **动效演示**：After Effects
- **用户流程图**：完整操作路径

## 📝 注意事项

1. **可访问性**
   - 保证足够的颜色对比度 (WCAG AA)
   - 支持键盘导航
   - 提供适当的ARIA标签

2. **性能考虑**
   - 图片使用WebP格式
   - 图标使用SVG Sprite
   - 关键CSS内联加载

3. **国际化**
   - 预留文字扩展空间
   - 避免在图片中嵌入文字
   - 日期时间格式可配置

4. **深色模式**
   - 所有颜色支持主题切换
   - 避免纯黑背景(使用#1a1a1a)
   - 适当降低对比度避免刺眼