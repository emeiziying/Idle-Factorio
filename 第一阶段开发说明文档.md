# ç¬¬ä¸€é˜¶æ®µå¼€å‘è¯´æ˜æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£ä¸ºç¬¬ä¸€é˜¶æ®µå¼€å‘ä»»åŠ¡æä¾›è¯¦ç»†çš„æŠ€æœ¯å®ç°è¯´æ˜ï¼ŒåŒ…æ‹¬æ•°æ®ç»“æ„è®¾è®¡ã€ç»„ä»¶æ¶æ„ã€çŠ¶æ€ç®¡ç†ã€APIæ¥å£ç­‰æŠ€æœ¯ç»†èŠ‚ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯åº”ç”¨ (React)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   çŠ¶æ€ç®¡ç†å±‚ (Redux/Zustand)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     æœåŠ¡å±‚ (Services)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   æ•°æ®æŒä¹…åŒ– (LocalStorage)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—åˆ’åˆ†
```
src/
â”œâ”€â”€ components/          # UIç»„ä»¶
â”‚   â”œâ”€â”€ common/         # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ production/     # ç”Ÿäº§æ¨¡å—ç»„ä»¶
â”‚   â”œâ”€â”€ facilities/     # è®¾æ–½æ¨¡å—ç»„ä»¶
â”‚   â””â”€â”€ technology/     # ç§‘æŠ€æ¨¡å—ç»„ä»¶
â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”œâ”€â”€ store/             # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/             # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â””â”€â”€ data/              # æ¸¸æˆæ•°æ®é…ç½®
```

## ğŸ“Š æ•°æ®ç»“æ„è®¾è®¡

### 1. ç‰©å“ç³»ç»Ÿ

```typescript
// ç‰©å“åŸºç¡€æ¥å£
interface Item {
  id: string;                    // å”¯ä¸€æ ‡è¯†
  name: string;                  // ç‰©å“åç§°
  category: ItemCategory;        // ç‰©å“åˆ†ç±»
  icon: string;                  // å›¾æ ‡è·¯å¾„
  stackSize: number;             // å †å ä¸Šé™
  unlocked: boolean;             // æ˜¯å¦å·²è§£é”
  unlockRequirement?: string[];  // è§£é”æ¡ä»¶ï¼ˆç§‘æŠ€IDåˆ—è¡¨ï¼‰
  description: string;           // ç‰©å“æè¿°
}

// ç‰©å“åˆ†ç±»æšä¸¾
enum ItemCategory {
  RAW_MATERIAL = 'raw_material',      // åŸææ–™
  INTERMEDIATE = 'intermediate',      // ä¸­é—´äº§å“
  FINISHED = 'finished',              // æˆå“
  CONSUMABLE = 'consumable'           // æ¶ˆè€—å“
}

// ç‰©å“åº“å­˜
interface ItemInventory {
  itemId: string;
  quantity: number;
  lastUpdated: number;  // æ—¶é—´æˆ³
}

// ç”Ÿäº§é…æ–¹
interface Recipe {
  id: string;
  outputItemId: string;
  outputQuantity: number;
  inputs: RecipeInput[];
  craftingTime: number;        // ç§’
  craftingMachine: string[];    // å¯ç”¨çš„ç”Ÿäº§è®¾æ–½ID
  energyRequired: number;       // æ‰€éœ€ç”µåŠ› (kW)
  unlocked: boolean;
}

interface RecipeInput {
  itemId: string;
  quantity: number;
}
```

### 2. è®¾æ–½ç³»ç»Ÿ

```typescript
// è®¾æ–½åŸºç¡€æ¥å£
interface Facility {
  id: string;
  name: string;
  type: FacilityType;
  category: FacilityCategory;
  icon: string;
  maxStackSize: number;         // æœ€å¤§å»ºé€ æ•°é‡
  unlocked: boolean;
  unlockRequirement?: string[];  // è§£é”æ¡ä»¶
}

// è®¾æ–½ç±»å‹
enum FacilityType {
  POWER_GENERATOR = 'power_generator',   // å‘ç”µè®¾æ–½
  RESOURCE_EXTRACTOR = 'extractor',      // èµ„æºé‡‡é›†
  PRODUCTION = 'production',             // ç”Ÿäº§è®¾æ–½
  RESEARCH = 'research'                  // ç ”ç©¶è®¾æ–½
}

// è®¾æ–½åˆ†ç±»ï¼ˆç”¨äºUIæ˜¾ç¤ºï¼‰
enum FacilityCategory {
  POWER = 'power',              // ç”µåŠ›ç›¸å…³
  MINING = 'mining',            // é‡‡çŸ¿
  SMELTING = 'smelting',        // å†¶ç‚¼
  CRAFTING = 'crafting',        // åˆ¶é€ 
  CHEMICAL = 'chemical',        // åŒ–å·¥
  RESEARCH_LAB = 'research'     // ç ”ç©¶
}

// è®¾æ–½å®ä¾‹ï¼ˆç©å®¶å»ºé€ çš„è®¾æ–½ï¼‰
interface FacilityInstance {
  id: string;                   // å®ä¾‹ID
  facilityId: string;           // è®¾æ–½ç±»å‹ID
  count: number;                // æ•°é‡
  status: FacilityStatus;       // è¿è¡ŒçŠ¶æ€
  efficiency: number;           // æ•ˆç‡ (0-100)
  powerConsumption?: number;    // ç”µåŠ›æ¶ˆè€— (kW)
  powerGeneration?: number;     // ç”µåŠ›äº§å‡º (kW)
  production?: ProductionData;  // ç”Ÿäº§æ•°æ®
}

enum FacilityStatus {
  RUNNING = 'running',
  STOPPED = 'stopped',
  NO_POWER = 'no_power',
  NO_RESOURCE = 'no_resource',
  OUTPUT_FULL = 'output_full'
}

interface ProductionData {
  currentRecipeId?: string;
  progress: number;           // 0-100
  inputBuffer: ItemStack[];   // è¾“å…¥ç¼“å†²åŒº
  outputBuffer: ItemStack[];  // è¾“å‡ºç¼“å†²åŒº
}

interface ItemStack {
  itemId: string;
  quantity: number;
}
```

### 3. ç§‘æŠ€ç³»ç»Ÿ

```typescript
// ç§‘æŠ€å®šä¹‰
interface Technology {
  id: string;
  name: string;
  icon: string;
  category: TechCategory;
  tier: number;                    // ç§‘æŠ€ç­‰çº§
  prerequisites: string[];         // å‰ç½®ç§‘æŠ€ID
  cost: TechCost[];               // ç ”ç©¶æˆæœ¬
  researchTime: number;            // ç ”ç©¶æ—¶é—´ï¼ˆç§’ï¼‰
  effects: TechEffect[];           // è§£é”æ•ˆæœ
  unlocked: boolean;               // æ˜¯å¦å·²è§£é”
  researching: boolean;            // æ˜¯å¦æ­£åœ¨ç ”ç©¶
  progress: number;                // ç ”ç©¶è¿›åº¦ (0-100)
}

// ç§‘æŠ€åˆ†ç±»
enum TechCategory {
  AUTOMATION = 'automation',       // è‡ªåŠ¨åŒ–
  LOGISTICS = 'logistics',         // ç‰©æµ
  MILITARY = 'military',           // å†›äº‹
  PRODUCTION = 'production',       // ç”Ÿäº§
  ENERGY = 'energy',              // èƒ½æº
  RESEARCH = 'research'           // ç ”ç©¶
}

// ç§‘æŠ€æˆæœ¬ï¼ˆç§‘æŠ€ç“¶ï¼‰
interface TechCost {
  sciencePackType: SciencePackType;
  quantity: number;
}

enum SciencePackType {
  RED = 'red',          // çº¢è‰²ç§‘æŠ€ç“¶ï¼ˆåŸºç¡€ï¼‰
  GREEN = 'green',      // ç»¿è‰²ç§‘æŠ€ç“¶ï¼ˆå†›äº‹ï¼‰
  BLUE = 'blue',        // è“è‰²ç§‘æŠ€ç“¶ï¼ˆåŒ–å·¥ï¼‰
  PURPLE = 'purple',    // ç´«è‰²ç§‘æŠ€ç“¶ï¼ˆç”Ÿäº§ï¼‰
  YELLOW = 'yellow',    // é»„è‰²ç§‘æŠ€ç“¶ï¼ˆæ•ˆèƒ½ï¼‰
  WHITE = 'white'       // ç™½è‰²ç§‘æŠ€ç“¶ï¼ˆå¤ªç©ºï¼‰
}

// ç§‘æŠ€æ•ˆæœ
interface TechEffect {
  type: TechEffectType;
  targets: string[];    // ç›®æ ‡IDåˆ—è¡¨
  value?: number;       // æ•ˆæœæ•°å€¼
}

enum TechEffectType {
  UNLOCK_RECIPE = 'unlock_recipe',
  UNLOCK_ITEM = 'unlock_item',
  UNLOCK_FACILITY = 'unlock_facility',
  INCREASE_SPEED = 'increase_speed',
  INCREASE_EFFICIENCY = 'increase_efficiency',
  REDUCE_COST = 'reduce_cost'
}

// ç ”ç©¶é˜Ÿåˆ—
interface ResearchQueue {
  queue: string[];              // ç§‘æŠ€IDé˜Ÿåˆ—
  currentResearch?: string;     // å½“å‰ç ”ç©¶çš„ç§‘æŠ€ID
  lastUpdateTime: number;       // ä¸Šæ¬¡æ›´æ–°æ—¶é—´æˆ³
}
```

### 4. ç”µåŠ›ç³»ç»Ÿ

```typescript
// ç”µåŠ›ç½‘ç»œçŠ¶æ€
interface PowerGrid {
  totalGeneration: number;      // æ€»å‘ç”µé‡ (kW)
  totalConsumption: number;     // æ€»æ¶ˆè€—é‡ (kW)
  efficiency: number;           // ç”µç½‘æ•ˆç‡ (0-100)
  generators: PowerGenerator[]; // å‘ç”µæœºåˆ—è¡¨
  consumers: PowerConsumer[];   // ç”¨ç”µè®¾å¤‡åˆ—è¡¨
}

interface PowerGenerator {
  facilityInstanceId: string;
  type: string;                 // å‘ç”µæœºç±»å‹
  maxOutput: number;            // æœ€å¤§è¾“å‡º (kW)
  currentOutput: number;        // å½“å‰è¾“å‡º (kW)
  fuelType?: string;           // ç‡ƒæ–™ç±»å‹
  fuelConsumption?: number;    // ç‡ƒæ–™æ¶ˆè€—ç‡
}

interface PowerConsumer {
  facilityInstanceId: string;
  type: string;
  powerDemand: number;         // ç”µåŠ›éœ€æ±‚ (kW)
  powerReceived: number;       // å®é™…è·å¾—ç”µåŠ› (kW)
  priority: number;            // ä¼˜å…ˆçº§ (1-10)
}
```

## ğŸ® æ¸¸æˆçŠ¶æ€ç®¡ç†

### å…¨å±€æ¸¸æˆçŠ¶æ€

```typescript
interface GameState {
  // ç©å®¶æ•°æ®
  player: PlayerState;
  
  // ç‰©å“åº“å­˜
  inventory: Map<string, ItemInventory>;
  
  // è®¾æ–½å®ä¾‹
  facilities: Map<string, FacilityInstance>;
  
  // ç§‘æŠ€çŠ¶æ€
  technologies: Map<string, Technology>;
  researchQueue: ResearchQueue;
  
  // ç”µåŠ›ç³»ç»Ÿ
  powerGrid: PowerGrid;
  
  // æ¸¸æˆç»Ÿè®¡
  statistics: GameStatistics;
  
  // æ¸¸æˆè®¾ç½®
  settings: GameSettings;
}

interface PlayerState {
  id: string;
  name: string;
  playTime: number;              // æ¸¸æˆæ—¶é—´ï¼ˆç§’ï¼‰
  lastSaveTime: number;          // ä¸Šæ¬¡ä¿å­˜æ—¶é—´
}

interface GameStatistics {
  totalItemsProduced: Map<string, number>;
  totalPowerGenerated: number;
  totalResearchCompleted: number;
  achievementsUnlocked: string[];
}

interface GameSettings {
  autoSave: boolean;
  autoSaveInterval: number;      // åˆ†é’Ÿ
  difficulty: DifficultyLevel;
  soundEnabled: boolean;
  notificationsEnabled: boolean;
}

enum DifficultyLevel {
  EASY = 'easy',
  NORMAL = 'normal',
  HARD = 'hard'
}
```

## ğŸ”§ æ ¸å¿ƒæœåŠ¡è®¾è®¡

### 1. ç‰©å“æœåŠ¡ (ItemService)

```typescript
class ItemService {
  // è·å–æ‰€æœ‰ç‰©å“
  getAllItems(): Item[];
  
  // è·å–å·²è§£é”ç‰©å“
  getUnlockedItems(): Item[];
  
  // æŒ‰åˆ†ç±»è·å–ç‰©å“
  getItemsByCategory(category: ItemCategory): Item[];
  
  // è·å–ç‰©å“è¯¦æƒ…
  getItemDetails(itemId: string): ItemDetails;
  
  // æ£€æŸ¥ç‰©å“æ˜¯å¦è§£é”
  isItemUnlocked(itemId: string): boolean;
  
  // è·å–ç‰©å“é…æ–¹
  getRecipesForItem(itemId: string): Recipe[];
  
  // è·å–ä½¿ç”¨è¯¥ç‰©å“çš„é…æ–¹
  getRecipesUsingItem(itemId: string): Recipe[];
}

interface ItemDetails {
  item: Item;
  inventory: ItemInventory;
  recipes: Recipe[];
  usedInRecipes: Recipe[];
  productionRate: number;        // ç”Ÿäº§é€Ÿç‡
  consumptionRate: number;       // æ¶ˆè€—é€Ÿç‡
}
```

### 2. è®¾æ–½æœåŠ¡ (FacilityService)

```typescript
class FacilityService {
  // è·å–æ‰€æœ‰è®¾æ–½ç±»å‹
  getAllFacilities(): Facility[];
  
  // è·å–ç‰¹æ®Šè®¾æ–½ï¼ˆäº§ç‰©ä¸åœ¨ç‰©å“åˆ—è¡¨ä¸­ï¼‰
  getSpecialFacilities(): Facility[];
  
  // åˆ›å»ºè®¾æ–½å®ä¾‹
  createFacility(facilityId: string, count: number): FacilityInstance;
  
  // æ›´æ–°è®¾æ–½çŠ¶æ€
  updateFacilityStatus(instanceId: string): void;
  
  // è®¡ç®—è®¾æ–½æ•ˆç‡
  calculateEfficiency(instance: FacilityInstance): number;
  
  // è·å–è®¾æ–½ç”Ÿäº§æ•°æ®
  getProductionData(instanceId: string): ProductionData;
  
  // è®¾ç½®ç”Ÿäº§é…æ–¹
  setRecipe(instanceId: string, recipeId: string): boolean;
}
```

### 3. ç§‘æŠ€æœåŠ¡ (TechnologyService)

```typescript
class TechnologyService {
  // è·å–ç§‘æŠ€æ ‘æ•°æ®
  getTechTree(): TechTreeNode[];
  
  // è·å–å¯ç ”ç©¶çš„ç§‘æŠ€
  getAvailableTechnologies(): Technology[];
  
  // å¼€å§‹ç ”ç©¶
  startResearch(techId: string): boolean;
  
  // æ·»åŠ åˆ°ç ”ç©¶é˜Ÿåˆ—
  addToQueue(techId: string): boolean;
  
  // æ›´æ–°ç ”ç©¶è¿›åº¦
  updateResearchProgress(): void;
  
  // å®Œæˆç ”ç©¶
  completeResearch(techId: string): void;
  
  // åº”ç”¨ç§‘æŠ€æ•ˆæœ
  applyTechEffects(effects: TechEffect[]): void;
  
  // è·å–ç ”ç©¶é˜Ÿåˆ—
  getResearchQueue(): ResearchQueue;
  
  // è°ƒæ•´ç ”ç©¶é˜Ÿåˆ—é¡ºåº
  reorderQueue(newOrder: string[]): void;
}

interface TechTreeNode {
  technology: Technology;
  children: TechTreeNode[];
  position: { x: number; y: number };  // ç”¨äºUIå¸ƒå±€
}
```

### 4. ç”µåŠ›æœåŠ¡ (PowerService)

```typescript
class PowerService {
  // è·å–ç”µåŠ›ç³»ç»ŸçŠ¶æ€
  getPowerGridState(): PowerGrid;
  
  // æ·»åŠ å‘ç”µè®¾æ–½
  addGenerator(facility: FacilityInstance): void;
  
  // æ·»åŠ ç”¨ç”µè®¾æ–½
  addConsumer(facility: FacilityInstance): void;
  
  // æ›´æ–°ç”µåŠ›åˆ†é…
  updatePowerDistribution(): void;
  
  // è®¡ç®—ç”µç½‘æ•ˆç‡
  calculateGridEfficiency(): number;
  
  // è·å–ç”µåŠ›ç»Ÿè®¡
  getPowerStatistics(): PowerStatistics;
  
  // æ£€æŸ¥ç”µåŠ›å¹³è¡¡
  checkPowerBalance(): PowerBalance;
}

interface PowerStatistics {
  totalGeneration: number;
  totalConsumption: number;
  generationByType: Map<string, number>;
  consumptionByType: Map<string, number>;
  historicalData: PowerHistoryPoint[];
}

interface PowerBalance {
  isBalanced: boolean;
  surplus: number;              // å‰©ä½™ç”µåŠ›
  deficit: number;              // ç¼ºå£ç”µåŠ›
  recommendations: string[];    // å»ºè®®
}
```

## ğŸ–¼ï¸ UIç»„ä»¶è®¾è®¡

### 1. ç”Ÿäº§æ¨¡å—ç»„ä»¶

```typescript
// ç‰©å“ç½‘æ ¼ç»„ä»¶
interface ItemGridProps {
  items: Item[];
  category?: ItemCategory;
  onItemClick: (item: Item) => void;
  showQuantity?: boolean;
}

// ç‰©å“è¯¦æƒ…å¯¹è¯æ¡†
interface ItemDetailDialogProps {
  item: Item;
  open: boolean;
  onClose: () => void;
  onCraft?: (recipeId: string) => void;
}

// åˆ†ç±»æ ‡ç­¾ç»„ä»¶
interface CategoryTabsProps {
  categories: ItemCategory[];
  selected: ItemCategory;
  onChange: (category: ItemCategory) => void;
  counts?: Map<ItemCategory, number>;  // å„åˆ†ç±»ç‰©å“æ•°é‡
}
```

### 2. è®¾æ–½æ¨¡å—ç»„ä»¶

```typescript
// è®¾æ–½åˆ—è¡¨ç»„ä»¶
interface FacilityListProps {
  facilities: FacilityInstance[];
  onFacilityClick: (facility: FacilityInstance) => void;
  onQuantityChange: (id: string, delta: number) => void;
  groupBy?: 'type' | 'status' | 'product';
}

// ç”µåŠ›ç®¡ç†é¢æ¿
interface PowerManagementPanelProps {
  powerGrid: PowerGrid;
  onAddGenerator: (type: string) => void;
  onOptimize: () => void;
}

// è®¾æ–½çŠ¶æ€å¡ç‰‡
interface FacilityStatusCardProps {
  facility: FacilityInstance;
  showDetails?: boolean;
  onConfigure?: () => void;
}
```

### 3. ç§‘æŠ€æ¨¡å—ç»„ä»¶

```typescript
// ç§‘æŠ€æ ‘å¯è§†åŒ–ç»„ä»¶
interface TechTreeVisualizerProps {
  techTree: TechTreeNode[];
  onTechClick: (tech: Technology) => void;
  highlightPath?: string[];  // é«˜äº®è·¯å¾„
}

// ç ”ç©¶é˜Ÿåˆ—ç»„ä»¶
interface ResearchQueueProps {
  queue: ResearchQueue;
  onReorder: (newOrder: string[]) => void;
  onRemove: (techId: string) => void;
  onPause?: () => void;
}

// ç§‘æŠ€è¯¦æƒ…é¢æ¿
interface TechDetailPanelProps {
  technology: Technology;
  onResearch: () => void;
  onAddToQueue: () => void;
  showPrerequisites?: boolean;
}
```

## ğŸ”„ æ¸¸æˆå¾ªç¯ä¸æ›´æ–°

### æ¸¸æˆå¾ªç¯ç®¡ç†å™¨

```typescript
class GameLoop {
  private lastUpdate: number;
  private updateInterval: number = 100; // 100ms
  
  // å¯åŠ¨æ¸¸æˆå¾ªç¯
  start(): void {
    this.lastUpdate = Date.now();
    this.loop();
  }
  
  // ä¸»å¾ªç¯
  private loop(): void {
    const now = Date.now();
    const deltaTime = now - this.lastUpdate;
    
    // æ›´æ–°å„ä¸ªç³»ç»Ÿ
    this.updateProduction(deltaTime);
    this.updatePower(deltaTime);
    this.updateResearch(deltaTime);
    this.updateStatistics(deltaTime);
    
    this.lastUpdate = now;
    requestAnimationFrame(() => this.loop());
  }
  
  // æ›´æ–°ç”Ÿäº§ç³»ç»Ÿ
  private updateProduction(deltaTime: number): void {
    // æ›´æ–°æ‰€æœ‰è®¾æ–½çš„ç”Ÿäº§è¿›åº¦
    // å¤„ç†è¾“å…¥/è¾“å‡ºç¼“å†²åŒº
    // æ›´æ–°åº“å­˜
  }
  
  // æ›´æ–°ç”µåŠ›ç³»ç»Ÿ
  private updatePower(deltaTime: number): void {
    // è®¡ç®—å‘ç”µé‡
    // åˆ†é…ç”µåŠ›
    // æ›´æ–°è®¾æ–½çŠ¶æ€
  }
  
  // æ›´æ–°ç ”ç©¶ç³»ç»Ÿ
  private updateResearch(deltaTime: number): void {
    // æ›´æ–°ç ”ç©¶è¿›åº¦
    // æ£€æŸ¥å®Œæˆçš„ç ”ç©¶
    // åº”ç”¨è§£é”æ•ˆæœ
  }
}
```

## ğŸ’¾ æ•°æ®æŒä¹…åŒ–

### å­˜å‚¨æ–¹æ¡ˆ

```typescript
class StorageService {
  private readonly STORAGE_KEY = 'factorio_game_save';
  
  // ä¿å­˜æ¸¸æˆ
  saveGame(gameState: GameState): void {
    const saveData = this.serializeGameState(gameState);
    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(saveData));
  }
  
  // åŠ è½½æ¸¸æˆ
  loadGame(): GameState | null {
    const saveData = localStorage.getItem(this.STORAGE_KEY);
    if (!saveData) return null;
    
    return this.deserializeGameState(JSON.parse(saveData));
  }
  
  // è‡ªåŠ¨ä¿å­˜
  enableAutoSave(interval: number): void {
    setInterval(() => {
      this.saveGame(getGameState());
    }, interval * 60 * 1000);
  }
  
  // å¯¼å‡ºå­˜æ¡£
  exportSave(): string {
    const saveData = localStorage.getItem(this.STORAGE_KEY);
    return btoa(saveData || '');
  }
  
  // å¯¼å…¥å­˜æ¡£
  importSave(encodedData: string): boolean {
    try {
      const saveData = atob(encodedData);
      localStorage.setItem(this.STORAGE_KEY, saveData);
      return true;
    } catch {
      return false;
    }
  }
}
```

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. æ¸²æŸ“ä¼˜åŒ–
- ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨å¤„ç†å¤§é‡ç‰©å“åˆ—è¡¨
- å®ç°ç»„ä»¶æ‡’åŠ è½½
- ä½¿ç”¨React.memoä¼˜åŒ–ç»„ä»¶é‡æ¸²æŸ“
- æ‰¹é‡æ›´æ–°DOMæ“ä½œ

### 2. çŠ¶æ€ç®¡ç†ä¼˜åŒ–
- ä½¿ç”¨Immerè¿›è¡Œä¸å¯å˜çŠ¶æ€æ›´æ–°
- å®ç°çŠ¶æ€åˆ†ç‰‡ï¼Œé¿å…å…¨å±€æ›´æ–°
- ä½¿ç”¨é€‰æ‹©å™¨ç¼“å­˜è®¡ç®—ç»“æœ
- å®ç°çŠ¶æ€è®¢é˜…çš„ç»†ç²’åº¦æ§åˆ¶

### 3. è®¡ç®—ä¼˜åŒ–
- ä½¿ç”¨Web Workerså¤„ç†å¤æ‚è®¡ç®—
- å®ç°è®¡ç®—ç»“æœç¼“å­˜
- ä¼˜åŒ–æ¸¸æˆå¾ªç¯çš„æ›´æ–°é¢‘ç‡
- ä½¿ç”¨å¢é‡æ›´æ–°è€Œéå…¨é‡è®¡ç®—

### 4. å†…å­˜ç®¡ç†
- åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„å¯¹è±¡å¼•ç”¨
- ä½¿ç”¨å¯¹è±¡æ± ç®¡ç†é¢‘ç¹åˆ›å»ºçš„å¯¹è±¡
- é™åˆ¶å†å²æ•°æ®çš„ä¿å­˜é‡
- å®ç°èµ„æºçš„æŒ‰éœ€åŠ è½½

## ğŸ“š å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- ä½¿ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼
- éµå¾ªESLintè§„åˆ™
- ä½¿ç”¨Prettieræ ¼å¼åŒ–ä»£ç 
- ç¼–å†™å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒé€»è¾‘

### å‘½åè§„èŒƒ
- ç»„ä»¶ä½¿ç”¨PascalCase
- å‡½æ•°å’Œå˜é‡ä½¿ç”¨camelCase
- å¸¸é‡ä½¿ç”¨UPPER_SNAKE_CASE
- ç±»å‹å’Œæ¥å£ä½¿ç”¨PascalCase

### ç›®å½•ç»“æ„è§„èŒƒ
- æ¯ä¸ªæ¨¡å—ä¸€ä¸ªæ–‡ä»¶å¤¹
- ç›¸å…³çš„ç±»å‹å®šä¹‰æ”¾åœ¨typesæ–‡ä»¶ä¸­
- å·¥å…·å‡½æ•°æ”¾åœ¨utilsæ–‡ä»¶å¤¹
- æµ‹è¯•æ–‡ä»¶ä¸æºæ–‡ä»¶åŒç›®å½•

### Gitæäº¤è§„èŒƒ
- feat: æ–°åŠŸèƒ½
- fix: ä¿®å¤bug
- docs: æ–‡æ¡£æ›´æ–°
- style: ä»£ç æ ¼å¼
- refactor: é‡æ„
- test: æµ‹è¯•ç›¸å…³
- chore: æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [ç¬¬ä¸€é˜¶æ®µå¼€å‘ä»»åŠ¡æ–‡æ¡£](./ç¬¬ä¸€é˜¶æ®µå¼€å‘ä»»åŠ¡æ–‡æ¡£.md)
- [æ¸¸æˆè®¾è®¡æ–‡æ¡£](./å¼‚æ˜Ÿå·¥å‚v3è®¾è®¡æ–‡æ¡£.md)
- [ç”µåŠ›ç³»ç»Ÿè®¾è®¡æ–‡æ¡£](./ç”µåŠ›ç³»ç»Ÿè®¾è®¡æ–‡æ¡£.md)
- [ç§‘æŠ€é¡µé¢è®¾è®¡æ–‡æ¡£](./ç§‘æŠ€é¡µé¢è®¾è®¡æ–‡æ¡£.md)