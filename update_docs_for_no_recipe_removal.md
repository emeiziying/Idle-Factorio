# 移除无配方物品逻辑后的文档和测试更新总结

## 背景
经过分析发现，项目中的所有 578 个物品都有对应的配方（包括采矿配方），因此"无配方物品"和"原材料"的特殊处理逻辑是不必要的。

## 主要更新内容

### 1. 文档更新

#### 手动采集识别系统文档 (`docs/systems/手动采集识别系统.md`)
- ✅ 移除"原材料类物品"分类
- ✅ 更新UI显示逻辑，移除原材料相关的情况
- ✅ 调整验证流程说明

#### CLAUDE.md
- 需要更新：将 "raw material" 替换为 "material"
- 需要更新：移除原材料相关的特殊说明

#### 其他文档
- `docs/design/异星工厂v2.md` - 检查并移除原材料相关描述
- `docs/design/物品分类系统设计.md` - 更新物品分类，移除原材料分类

### 2. 测试更新

#### TechnologyService 测试
- ✅ 将"应该返回 true 当物品是原材料时"改为"应该返回 false 当物品没有配方时"
- ✅ 更新相关的期望值从 `true` 改为 `false`

#### DataService 测试
- ✅ 更新 `getRowDisplayName` 测试中的"原材料"为"基础材料"

#### RecipeService 测试
- ✅ 已有的"应处理无配方的物品"测试逻辑正确，返回0值

#### DependencyService 测试
- 需要检查：移除总原材料需求相关的测试

### 3. 代码逻辑更新（已在之前的任务中处理）

#### 核心服务
- `TechnologyService.isRecipeUnlocked()` - 无配方时返回 false
- `DataService.isRecipeUnlocked()` - 无配方时返回 false
- `RecipeService` - 移除原材料相关注释
- `DependencyService` - 移除原材料需求计算

#### 工具类
- `manualCraftingValidator` - 移除 RAW_MATERIAL 枚举和相关逻辑

#### UI组件
- 更新提示文本，从"暂无配方"改为"没有可用的制作配方"
- 移除原材料相关的特殊显示逻辑

### 4. 关键概念变更

1. **物品分类**：
   - 之前：原材料 → 中间产品 → 最终产品
   - 现在：基础材料（通过采矿获得）→ 中间产品 → 最终产品

2. **配方判断**：
   - 之前：`recipes.length === 0` 表示原材料，始终可用
   - 现在：`recipes.length === 0` 表示数据错误，不可用

3. **手动制作**：
   - 之前：原材料可以直接"采集"
   - 现在：所有物品都需要通过配方制作（包括采矿配方）

### 5. 后续建议

1. 运行完整测试套件确保没有遗漏：`pnpm test`
2. 检查类型错误：`pnpm type-check`
3. 在开发环境中测试关键功能：
   - 手动制作功能
   - 科技解锁判断
   - 链式制作
4. 更新用户文档和帮助说明